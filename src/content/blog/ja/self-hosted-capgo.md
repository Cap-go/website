---
slug: self-hosted-capgo
title: セルフホスト型Capgo
description: Capgoのセルフホスティングを使用すると、Capgoのクラウドサービスを使用することなく、ユーザーにCapacitorのライブアップデートを配信できます。
author: Anik Dhabal Babu
author_image_url: 'https://avatars.githubusercontent.com/u/81948346?v=4'
author_url: 'https://x.com/anikdhabal'
created_at: 2023-09-20T00:00:00.000Z
updated_at: 2023-09-20T00:00:00.000Z
head_image: /self-hosted-capgo.webp
head_image_alt: 自ホストのcapgo
keywords: >-
  mobile app development, live updates, OTA updates, continuous integration,
  mobile app updates
tag: Solution
published: true
locale: ja
next_blog: ''
---
このガイドでは、Capgoのセルフホスティングの方法について段階的に説明し、セルフホスティングのメリットと課題について説明します。

# はじめに

セルフホスティングとは、サーバーとネットワークを自分で設定し、自分のウェブサイトやアプリケーションを運用する形態です。PaaSやパブリッククラウドプロバイダーを利用する代わりに、セルフホスティングを選択する人々は、自身のネットワークを運用し、ウェブサイトやアプリケーションの構築に加えて、メンテナンスとアップタイムの責任を負います。

Capgoを始める最も簡単な方法は、[クラウドの公式マネージドサービス](https://capgo.app/)を利用することですが、自身で管理することを希望する場合は、自分のサーバーでCapgoをセルフホストすることもできます。

## セルフホスティングとは？

デジタル領域におけるセルフホスティングとは、オンラインプレゼンスとサービスを管理・制御するために、自身のサーバーやホスティングインフラを運用する実践を指します。サードパーティのホスティングプロバイダーに依存する代わりに、個人や組織が自身の条件でサーバー、ウェブサイト、アプリケーション、データストレージを設定・管理することを選択します。

## なぜセルフホスティングを選択するのか？

セルフホスティングを選択する理由は多くあります。主な利点には以下のようなものがあります：

* **プライバシーとコントロール：** セルフホスティングでは、データとプライバシーを完全にコントロールできます。サードパーティプロバイダーによる活動の追跡やデータの販売を心配する必要がありません。

* **コスト削減：** 特に多くのリソースを使用する場合や複数のサービスを運用する場合、長期的にはセルフホスティングの方がコスト効率が良くなる可能性があります。

* **カスタマイズ：** セルフホスティングでは、特定のニーズに合わせてアプリケーションやサービスをカスタマイズする柔軟性があります。

* **学習と実験：** セルフホスティングは、Linux、システム管理、その他の技術的なトピックについて学ぶ良い方法です。また、新しいソフトウェアやサービスを実験する楽しい方法にもなります。

* **独立性：** セルフホスティングは、外部プロバイダーへの依存度を減らします。彼らの利用規約、価格変更、潜在的なサービス中断に左右されません。この独立性は、オンラインプレゼンスを重要な機能として利用するビジネスや個人にとって重要です。

## Capgo CloudとCapgo Self-Hostedの違いは何ですか？

Capgoのバージョンは1つだけです。私のクラウド製品とセルフホスト製品は完全に同等です。より優れた、あるいはより完全な機能セットを持つプレミアムや独占的な商用バージョンはありません。

両方とも同じダッシュボード、同じアクション可能なメトリクス、そして[訪問者のプライバシーを尊重する](https://capgo.app/privacy/)という同じコミットメントを得られます。

私は2018年12月にCapgoの開発を開始し、2019年5月にSaaSサブスクリプションビジネスを立ち上げました。このプロジェクトは非常に活発で、積極的に開発され、急速に成長しています。また、堅牢で実戦で検証されています。

以下がCapgo CloudとCapgo Self-Hostedの違いです：

|   | Cloud | Self-hosted |
| --- | --- | --- |
| **ホスティング** | 簡単で便利です。最初のアップデートの送信を開始するまでに2分かかり、高可用性、バックアップ、セキュリティ、メンテナンスはすべて私が行います。私がすべてを管理するので、あなたは何も心配する必要がありません。 | すべて自分で行います。サーバーを取得し、インフラストラクチャを管理する必要があります。インストール、メンテナンス、アップグレード、サーバー容量、アップタイム、バックアップ、セキュリティ、安定性、一貫性、読み込み時間などの責任を負います。 |
| **ストレージ** | すべての訪問者データはEU所有のクラウドインフラストラクチャで排他的に処理されます。サイトデータは、ドイツの安全で暗号化されたサーバーに保管されます。これにより、サイトデータは厳格なEUデータプライバシー法によって保護され、GDPRへの準拠が確保されます。ウェブサイトデータがEUを離れることはありません。 | 完全なコントロールがあり、希望する任意の国の任意のサーバーでCapgoをホストできます。地下室のサーバーでホストするか、GDPRに準拠していないものを含む任意のクラウドプロバイダーでホストできます。 |
| **生データ** | モダンな外観で、使いやすく、高速に読み込まれるダッシュボードですべてのサイト統計とメトリクスを確認できます。ダッシュボードで集計された統計のみを確認できます。 | アナリストで生データへのアクセスが必要ですか？Capgoを自身でホストすることでその選択肢が得られます。データベースから直接データを取得し、選択したデータ分析ツールにインポートできます。 |
| **コスト** | アップデーターサービスの提供にはコストが関連するため、サブスクリプション料金を請求します。 | サーバーの費用とサーバー運用に関連する費用のみを支払う必要があります。私に料金を支払う必要はなく、クラウドプロバイダーにのみ支払います。 |
| **プレミアムサポート** | Capgoを構築・維持する実際の人間による本物のサポートを提供します。 | プレミアムサポートは含まれていません。セルフホストリリースはコミュニティサポートのみです。 |
| **リリース** | 週に複数回の新機能とアップデートで継続的に開発・改善されています。 | 年2回公開される長期リリースで、最新機能はクラウドで最初にテストされるため、すぐには利用できません。 |

# Capgoをセルフホストする方法

CapgoではSupabaseを主に使用しています。セルフホストするには、[Supabaseセルフホスティングのドキュメント](https://supabase.com/docs/guides/self-hosting/docker)に従うだけです。

# セルフホストCapgoでCLIを使用する
セルフホストCapgoでCLIを使用するには、アプリディレクトリのcapacitor.config.tsを編集し、以下のように設定します：

```ts
const config: CapacitorConfig = {
  appId: 'com.demo.app',
  appName: 'demoApp',
  webDir: 'dist',
  bundledWebRuntime: false,
  plugins: {
    CapacitorUpdater : {
      localHost: "http://localhost:5173",
      localWebHost: "http://localhost:5173",
      localSupa: "http://localhost:54321",
      localSupaAnon: "see_notes",
    },
  },
};
```

注：localSupaAnonを取得するには、この[チュートリアル](https://capgo.app/docs/self-hosted/local-dev/getting-started/)に従い、anonキーをlocalSupaAnonにコピーしてください。

# セルフホストCapgoでcapacitor updaterを使用する

**要件**

[capgo](https://github.com/Cap-go/capgo/)をクローン

セルフホストCapgoでcapacitor updaterを使用するには、アプリディレクトリの`capacitor.config.ts`を編集し、以下のように設定します：

```ts
const config: CapacitorConfig = {
  appId: 'com.demo.app',
  appName: 'demoApp',
  webDir: 'dist',
  bundledWebRuntime: false,
  plugins: {
    CapacitorUpdater : {
      statsUrl: "http://localhost:54321/functions/v1/stats",
      channelUrl: "http://localhost:54321/functions/v1/channel_self",
      updateUrl: "http://localhost:54321/functions/v1/updates"
    },
  },
};
```

これにより、開発環境でローカルCapgoを使用できるようになります。ただし、デフォルトではこれだけでは不十分です。

# 結論

結論として、Capgoのセルフホスティングは、そのためのリソースと専門知識を持つ組織にとって良い選択肢となり得ます。アップデートプロセス、セキュリティ、コンプライアンスのコントロールなど、多くの利点を提供します。ただし、セルフホストするかどうかを決定する前に、メリットと課題を慎重に検討することが重要です。

Capgoのセルフホスティングを検討している場合は、まずCapgoの[セルフホスティングドキュメント](https://capgo.app/docs/self-hosted/getting-started/)を読むことをお勧めします。これにより、セルフホスティングの要件とリスクについての理解を深めることができます。
