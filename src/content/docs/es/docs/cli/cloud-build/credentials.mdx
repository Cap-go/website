---
title: Gesti√≥n de Credenciales
description: Guarda y gestiona credenciales de compilaci√≥n localmente para compilaciones iOS y Android
locale: es
sidebar:
  order: 5
---

import { Steps, Aside } from '@astrojs/starlight/components';

Gestiona tus credenciales de compilaci√≥n de iOS y Android localmente para compilaciones en la nube convenientes.

## Descripci√≥n General

Capgo CLI te permite guardar credenciales de compilaci√≥n localmente en tu m√°quina en la carpeta `.capgo-credentials`. Cuando ejecutas una compilaci√≥n, estas credenciales se usan autom√°ticamente y se env√≠an de forma segura a los servidores de compilaci√≥n de Capgo.

<Aside type="tip" title="¬øNecesitas Ayuda para Obtener Credenciales?">
Si a√∫n no tienes tus certificados y credenciales, consulta estas gu√≠as completas:

**iOS:**
- [C√≥mo Obtener Certificados iOS](/docs/cli/cloud-build/ios/#how-to-get-ios-certificates-and-provisioning-profiles) - Gu√≠a paso a paso
- [Gu√≠a de Certificados iOS (Capgo)](https://capgo.app/cloud/native-builds/certificates/ios/) - Tutorial detallado con capturas de pantalla
- [Blog: Compilaciones Autom√°ticas iOS](https://capgo.app/blog/automatic-capacitor-ios-build-github-action/) - Configuraci√≥n completa de CI/CD

**Android:**
- [Crear un Keystore](/docs/cli/cloud-build/android/#creating-a-keystore) - Gu√≠a paso a paso
- [Gu√≠a de Certificados Android (Capgo)](https://capgo.app/cloud/native-builds/certificates/android/) - Tutorial detallado con capturas de pantalla
- [Blog: Compilaciones Autom√°ticas Android](https://capgo.app/blog/automatic-capacitor-android-build-github-action/) - Configuraci√≥n completa de CI/CD
</Aside>

<Aside type="caution" title="Garant√≠a de Seguridad">
**Tus credenciales NUNCA se almacenan permanentemente en los servidores de Capgo:**
- ‚úÖ Usadas SOLO durante el proceso de compilaci√≥n activo
- ‚úÖ Eliminadas autom√°ticamente despu√©s de completar la compilaci√≥n
- ‚úÖ Retenci√≥n m√°xima: 24 horas (incluso si la compilaci√≥n falla)
- ‚úÖ Las aplicaciones se env√≠an directamente a Aplicaci√≥n Store/Play Store - no almacenamos NADA
- ‚úÖ Transmitidas de forma segura sobre HTTPS
</Aside>

## Comandos

### Guardar Credenciales

Almacena tus credenciales de compilaci√≥n localmente para uso autom√°tico:

```bash
npx @capgo/cli build credentials save --platform <ios|android> [opciones]
```

### Listar Credenciales

Ver credenciales guardadas actualmente (las contrase√±as est√°n enmascaradas):

```bash
npx @capgo/cli build credentials list
```

### Limpiar Credenciales

Eliminar credenciales guardadas de tu m√°quina local:

```bash
# Limpiar todas las credenciales
npx @capgo/cli build credentials clear

# Limpiar solo credenciales iOS
npx @capgo/cli build credentials clear --platform ios

# Limpiar solo credenciales Android
npx @capgo/cli build credentials clear --platform android
```

## Guardar Credenciales iOS

<Aside type="note">
**¬øA√∫n no tienes certificados iOS?** Consulta la [gu√≠a de Compilaciones iOS](/docs/cli/cloud-build/ios/#how-to-get-ios-certificates-and-provisioning-profiles) para instrucciones sobre c√≥mo crear certificados y perfiles de aprovisionamiento.
</Aside>

### Ejemplo Completo

```bash
npx @capgo/cli build credentials save \
  --platform ios \
  --certificate ./cert.p12 \
  --p12-password "TuContrase√±aP12" \
  --provisioning-profile ./profile.mobileprovision \
  --apple-key ./AuthKey_ABC1234567.p8 \
  --apple-key-id "ABC1234567" \
  --apple-issuer-id "00000000-0000-0000-0000-000000000000" \
  --apple-team-id "TEAM123456"
```

### Opciones iOS

| Opci√≥n | Descripci√≥n | Requerido |
|--------|-------------|----------|
| `--certificate <ruta>` | Ruta al archivo de certificado .p12 | S√≠ (lanzamiento) |
| `--p12-password <contrase√±a>` | Contrase√±a para el certificado .p12 | S√≠ (lanzamiento) |
| `--provisioning-profile <ruta>` | Ruta al archivo .mobileprovision | S√≠ (lanzamiento) |
| `--provisioning-profile-prod <ruta>` | Perfil de aprovisionamiento de producci√≥n (opcional) | No |
| `--apple-key <ruta>` | Ruta a la clave API .p8 de Aplicaci√≥n Store Connect | S√≠ (env√≠o) |
| `--apple-key-id <id>` | ID de clave API de Aplicaci√≥n Store Connect | S√≠ (env√≠o) |
| `--apple-issuer-id <id>` | ID de emisor API de Aplicaci√≥n Store Connect (UUID) | S√≠ (env√≠o) |
| `--apple-team-id <id>` | ID de equipo de Aplicaci√≥n Store Connect | S√≠ (env√≠o) |
| `--apple-id <email>` | Email de Apple ID (autenticaci√≥n alternativa) | No |
| `--apple-app-password <contrase√±a>` | Contrase√±a espec√≠fica de la aplicaci√≥n (autenticaci√≥n alternativa) | No |

### Qu√© se Almacena

Cuando guardas credenciales iOS, el CLI:
1. Lee los archivos de certificado y perfil de aprovisionamiento
2. Los convierte a codificaci√≥n base64
3. Guarda las credenciales en la carpeta `.capgo-credentials`
4. Almacena contrase√±as e IDs como texto plano (solo archivos locales)

La estructura de archivos almacenada:
```json
{
  "ios": {
    "BUILD_CERTIFICATE_BASE64": "...",
    "BUILD_PROVISION_PROFILE_BASE64": "...",
    "APPLE_KEY_CONTENT": "...",
    "P12_PASSWORD": "...",
    "APPLE_KEY_ID": "ABC1234567",
    "APPLE_ISSUER_ID": "...",
    "APP_STORE_CONNECT_TEAM_ID": "TEAM123456"
  }
}
```

## Guardar Credenciales Android

<Aside type="note">
**¬øA√∫n no tienes un keystore?** Consulta la [gu√≠a de Compilaciones Android](/docs/cli/cloud-build/android/#creating-a-keystore) para instrucciones sobre c√≥mo crear un keystore y configurar credenciales de Play Store.
</Aside>

### Ejemplo Completo

```bash
npx @capgo/cli build credentials save \
  --platform android \
  --keystore ./release.keystore \
  --keystore-alias "mi-alias-de-clave" \
  --keystore-key-password "Contrase√±aClave123" \
  --keystore-store-password "Contrase√±aAlmac√©n123" \
  --play-config ./play-store-service-account.json
```

### Opciones Android

| Opci√≥n | Descripci√≥n | Requerido |
|--------|-------------|----------|
| `--keystore <ruta>` | Ruta al archivo .keystore o .jks | S√≠ (lanzamiento) |
| `--keystore-alias <alias>` | Alias de la clave en el keystore | S√≠ (lanzamiento) |
| `--keystore-key-password <contrase√±a>` | Contrase√±a para el alias de la clave | S√≠ (lanzamiento) |
| `--keystore-store-password <contrase√±a>` | Contrase√±a para el keystore | S√≠ (lanzamiento) |
| `--play-config <ruta>` | Ruta al JSON de la cuenta de servicio de Play Store | S√≠ (env√≠o) |

### Qu√© se Almacena

Cuando guardas credenciales Android, el CLI:
1. Lee los archivos keystore y JSON de la cuenta de servicio
2. Los convierte a codificaci√≥n base64
3. Guarda las credenciales en la carpeta `.capgo-credentials`
4. Almacena contrase√±as y alias como texto plano (solo archivos locales)

La estructura de archivos almacenada:
```json
{
  "android": {
    "ANDROID_KEYSTORE_FILE": "...",
    "PLAY_CONFIG_JSON": "...",
    "KEYSTORE_KEY_ALIAS": "mi-alias-de-clave",
    "KEYSTORE_KEY_PASSWORD": "...",
    "KEYSTORE_STORE_PASSWORD": "..."
  }
}
}
```

## Usar Credenciales Guardadas

Una vez que hayas guardado las credenciales, se usan autom√°ticamente cuando compiles:

```bash
# Las credenciales se cargan autom√°ticamente desde la carpeta .capgo-credentials
npx @capgo/cli build com.example.app --platform ios
```

Tambi√©n puedes sobrescribir las credenciales guardadas usando Variables de entorno:

```bash
# Las variables de entorno tienen prioridad sobre las credenciales guardadas
BUILD_CERTIFICATE_BASE64="..." \
P12_PASSWORD="contrase√±a-diferente" \
npx @capgo/cli build com.example.app --platform ios
```

**Orden de precedencia:**
1. Variables de entorno (prioridad m√°s alta)
2. Credenciales guardadas en la carpeta `.capgo-credentials`
3. Sin credenciales (prioridad m√°s baja)

## Ver Credenciales Guardadas

Lista qu√© credenciales tienes guardadas:

```bash
npx @capgo/cli build credentials list
```

Ejemplo de salida:
```
üìã Credenciales de Compilaci√≥n Guardadas:

Credenciales iOS:
  ‚úì Certificado (base64)
  ‚úì Perfil de Aprovisionamiento (base64)
  ‚úì Contenido de Clave Apple (base64)
  ‚úì Contrase√±a P12: ********
  ‚úì ID de Clave Apple: ABC1234567
  ‚úì ID de Emisor Apple: 00000000-0000-0000-0000-000000000000
  ‚úì ID de Equipo: TEAM123456

Credenciales Android:
  ‚úì Keystore (base64)
  ‚úì Configuraci√≥n de Play Store (base64)
  ‚úì Alias de Keystore: mi-alias-de-clave
  ‚úì Contrase√±a de Clave: ********
  ‚úì Contrase√±a de Almac√©n: ********

Ubicaci√≥n: .capgo-credentials/

üîí Estas credenciales se almacenan localmente solo en tu m√°quina.
   Al compilar, se env√≠an a Capgo pero NUNCA se almacenan all√≠.
   Se eliminan autom√°ticamente despu√©s de completar la compilaci√≥n (m√°x. 24 horas).
```

## Mejores Pr√°cticas de Seguridad

### Seguridad de Almacenamiento Local

1. **Permisos de Archivo**
   ```bash
   # Asegurar que la carpeta de credenciales no sea legible por otros
   chmod 700 .capgo-credentials
   chmod 600 .capgo-credentials/*
   ```

2. **Nunca Confirmar Credenciales**
   ```bash
   # Agregar a .gitignore
   echo ".capgo-credentials/" >> .gitignore
   ```

3. **Separar Credenciales**
   - Usa diferentes credenciales para desarrollo local vs CI/CD
   - Rota las credenciales regularmente
   - No compartas credenciales entre miembros del equipo

### Uso en CI/CD

Para entornos CI/CD, **prefiere Variables de entorno** sobre credenciales guardadas:

```yaml
# GitHub Actions
env:
  BUILD_CERTIFICATE_BASE64: ${{ secrets.IOS_CERTIFICATE }}
  P12_PASSWORD: ${{ secrets.P12_PASSWORD }}
  # ... otros secretos
```

Esto es m√°s seguro porque:
- Los secretos son gestionados por tu plataforma CI/CD
- No hay archivos de credenciales en los runners
- F√°cil rotaci√≥n y control de acceso
- Pistas de auditor√≠a para uso de secretos

### Rotaci√≥n de Credenciales

Rota tus credenciales regularmente:

1. **iOS**: Genera nuevos certificados y claves API anualmente
2. **Android**: Cambia las contrase√±as del keystore anualmente
3. **Despu√©s de cambios de equipo**: Rota cuando los miembros del equipo se vayan

Actualizar credenciales guardadas:
```bash
# Vuelve a ejecutar el comando save con nuevas credenciales
npx @capgo/cli build credentials save --platform ios --certificate ./nuevo-cert.p12 ...
```

## Soluci√≥n de Problemas

### "No se encontraron credenciales"

Si la compilaci√≥n dice que no se encontraron credenciales:

1. **Verifica si las credenciales est√°n guardadas**:
   ```bash
   npx @capgo/cli build credentials list
   ```

2. **Guarda las credenciales si faltan**:
   ```bash
   npx @capgo/cli build credentials save --platform ios ...
   ```

3. **Verifica que la carpeta de credenciales exista**:
   ```bash
   ls -la .capgo-credentials/
   ```

### "Permiso denegado" al leer credenciales

Corrige los permisos de archivo:

```bash
chmod 700 .capgo-credentials
chmod 600 .capgo-credentials/*
```

### Las credenciales no se est√°n usando

Verifica que se especifique la plataforma correcta:

```bash
# Aseg√∫rate de que --platform coincida con las credenciales guardadas
npx @capgo/cli build com.example.app --platform ios  # Usa credenciales ios
npx @capgo/cli build com.example.app --platform android  # Usa credenciales android
```

### Limpiar y volver a guardar credenciales

Si las credenciales parecen corruptas:

```bash
# Limpiar todas las credenciales
npx @capgo/cli build credentials clear

# Guardar nuevamente
npx @capgo/cli build credentials save --platform ios ...
```

## Migraci√≥n desde Variables de Entorno

Si actualmente est√°s usando Variables de entorno, puedes migrar a credenciales guardadas:

<Steps>

1. **Extrae tus Variables de entorno actuales**
   ```bash
   echo $BUILD_CERTIFICATE_BASE64  # Verifica que existan
   ```

2. **Decodifica los archivos base64 a archivos originales** (si es necesario)
   ```bash
   echo "$BUILD_CERTIFICATE_BASE64" | base64 -d > cert.p12
   echo "$BUILD_PROVISION_PROFILE_BASE64" | base64 -d > profile.mobileprovision
   ```

3. **Guarda usando el CLI**
   ```bash
   npx @capgo/cli build credentials save \
     --platform ios \
     --certificate ./cert.p12 \
     --provisioning-profile ./profile.mobileprovision \
     --p12-password "$P12_PASSWORD" \
     --apple-key-id "$APPLE_KEY_ID" \
     --apple-issuer-id "$APPLE_ISSUER_ID" \
     --apple-team-id "$APP_STORE_CONNECT_TEAM_ID"
   ```

4. **Prueba la compilaci√≥n**
   ```bash
   npx @capgo/cli build com.example.app --platform ios
   ```

5. **Elimina las Variables de entorno** (opcional)
   ```bash
   unset BUILD_CERTIFICATE_BASE64 BUILD_PROVISION_PROFILE_BASE64
   ```

</Steps>

## Ubicaci√≥n de Archivo

Las credenciales se almacenan en la carpeta `.capgo-credentials`:
- **macOS/Linux**: `.capgo-credentials/` (en la ra√≠z de tu proyecto o directorio home)
- **Windows**: `.capgo-credentials\` (en la ra√≠z de tu proyecto o directorio home)

La carpeta se crea autom√°ticamente cuando guardas credenciales por primera vez.

## Pr√≥ximos Pasos

- [Comenzar](/docs/cli/cloud-build/getting-started/) - Crea tu primera compilaci√≥n
- [Compilaciones iOS](/docs/cli/cloud-build/ios/) - Configuraci√≥n de compilaci√≥n espec√≠fica para iOS
- [Compilaciones Android](/docs/cli/cloud-build/android/) - Configuraci√≥n de compilaci√≥n espec√≠fica para Android
- [Soluci√≥n de Problemas](/docs/cli/cloud-build/troubleshooting/) - Problemas comunes y soluciones

## ¬øNecesitas Ayuda?

- üìö [Gu√≠a de soluci√≥n de problemas](/docs/cli/cloud-build/troubleshooting/)
- üí¨ [Comunidad Discord](https://discord.com/invite/VnYRvBfgA6)
- üìß Email: support@Capgo.Aplicaci√≥n
