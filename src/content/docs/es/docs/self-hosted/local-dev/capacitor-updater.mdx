---
title: Usar el capacitor updater con capgo autoalojado
description: Cómo usar el Capacitor Updater con Capgo auto alojado
sidebar:
  order: 2
locale: es
---

## ¿Qué cubrirá este tutorial?

Este tutorial mostrará cómo usar capacitor updater en un entorno de desarrollo con capgo auto-alojado

## Requisitos

1. [Capgo clonado](https://githubcom/Cap-go/capgo/)

## Comenzando

Para usar capacitor updater con capgo auto-alojado edita el `capacitorconfigts` desde el directorio de tu aplicación y configúralo así:

```ts
const config: CapacitorConfig = {
  appId: 'comdemoapp',
  appName: 'demoApp',
  webDir: 'dist',
  bundledWebRuntime: false,
  plugins: {
    CapacitorUpdater : {
      statsUrl: "http://localhost:54321/functions/v1/stats",
      channelUrl: "http://localhost:54321/functions/v1/channel_self",
      updateUrl: "http://localhost:54321/functions/v1/updates"
    },
  },
};
```

Esto te permitirá usar capgo local en desarrollo. Sin embargo, por defecto, esto no es suficiente

En Android es necesario habilitar la [comunicación en texto plano](https://developerandroidcom/topic/security/risks/cleartext/) ya que por defecto SSL está deshabilitado en local
Esto se puede lograr modificando [AndroidManifestxml](https://githubcom/Cap-go/capacitor-updater/blob/main/android/src/main/AndroidManifestxml/) y añadiendo `android:usesCleartextTraffic="true"` en la etiqueta `application`
Un ejemplo completo de este cambio se puede ver [aquí](https://gistgithubcom/WcaleNieWolny/061a015acdebe35eaf3afd7030797701/)

Dado que por defecto, Android no permite `http`, capgo ha implementado una verificación para http [aquí](https://githubcom/Cap-go/capgo/blob/4cce6c0707d745faa2afbab643e636bad927c602/supabase/functions/updates/indexts/#L396)
Este código puede no estar siempre aquí, pero por ahora es necesario cambiar esta línea para que las actualizaciones funcionen
Esta línea debería verse algo así:
```ts
    if (!signedURL || (signedURLstartsWith('http://') || signedURLstartsWith('https://'))) {
```

:::danger
⚠️ No subas `supabase/functions/updates/indexts` al repositorio remoto\
Este código está aquí [con propósito](https://githubcom/Cap-go/capacitor-updater/issues/37/#issuecomment-1684916354)
:::

También podría haber un problema que impida que la aplicación de Android se conecte. Si no ves ninguna solicitud siendo enviada a las funciones edge, ejecuta
```bash
adb reverse tcp:54321 tcp:54321
```