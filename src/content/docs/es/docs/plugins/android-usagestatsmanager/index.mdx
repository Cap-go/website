---
title: "@Capgo/Capacitor-android-usagestatsmanager"
description: Plugin de estad√≠sticas de uso de Android para aplicaciones Capacitor con seguimiento de uso de aplicaciones, monitoreo de tiempo de pantalla y anal√≠ticas de uso.
tableOfContents: false
next: false
prev: false
sidebar:
  order: 1
  label: "Introducci√≥n"
locale: es
hero:
  tagline: Accede a las estad√≠sticas de uso de Android para monitorear el uso de aplicaciones, el tiempo de pantalla y anal√≠ticas de comportamiento del usuario con datos a nivel del sistema.
  image:
    file: ~public/icons/Plugins/android-usagestatsmanager.svg
  actions:
    - text: Comenzar
      Enlace: /docs/Plugins/android-usagestatsmanager/getting-started/
      icon: right-arrow
      variant: primary
    - text: GitHub
      Enlace: https://GitHub.com/Cap-go/Capacitor-android-usagestatsmanager/
      icon: external
      variant: minimal
---

Importar { Card, CardGrid } De '@astrojs/starlight/components';

## Descripci√≥n general

El Plugin Capacitor Android Uso Stats Manager expone el SDK de UsageStatsManager de Android a aplicaciones Capacitor, permitiendo el acceso a estad√≠sticas de uso de aplicaciones detalladas y datos de uso del dispositivo. Este Plugin permite a los desarrolladores rastrear patrones de uso de aplicaciones, tiempo de pantalla y anal√≠ticas de comportamiento del usuario en dispositivos Android.

<CardGrid stagger>
  <Card title="Estad√≠sticas de uso" icon="rocket">
    Accede a datos del SDK de UsageStatsManager de Android üì±
  </Card>
  <Card title="Monitoreo de aplicaciones" icon="moon">
    Rastrea el tiempo de uso y frecuencia de aplicaciones individuales üïê
  </Card>
  <Card title="Gesti√≥n de permisos" icon="approve-Verificar">
    Maneja permisos de estad√≠sticas de uso sin problemas üõ°Ô∏è
  </Card>
  <Card title="Informaci√≥n de paquetes" icon="puzzle">
    Consulta detalles y metadatos de paquetes instalados üì¶
  </Card>
</CardGrid>

## Instalaci√≥n

```bash
npm install @capgo/capacitor-android-usagestatsmanager
npx cap sync
```

## Permisos requeridos

Agrega estos permisos a tu `android/app/src/main/AndroidManifest.xml`:

```xml
<uses-permission android:name="android.permission.PACKAGE_USAGE_STATS" />
<uses-permission android:name="android.permission.QUERY_ALL_PACKAGES" />
```

## M√©todos principales de API

### Estad√≠sticas de uso
- `queryAndAggregateUsageStats(options)` - Recupera estad√≠sticas de uso detalladas para aplicaciones instaladas
- `isUsageStatsPermissionGranted()` - Verifica si el permiso de estad√≠sticas de uso est√° concedido
- `openUsageStatsSettings()` - Abre la configuraci√≥n del sistema para el permiso de estad√≠sticas de uso

### Informaci√≥n de paquetes
- `queryAllPackages()` - Obtiene informaci√≥n sobre todos los paquetes instalados

## Ejemplo de uso

```typescript
import { AndroidUsageStatsManager } from '@capgo/capacitor-android-usagestatsmanager';

// Check if permission is granted
const permissionResult = await AndroidUsageStatsManager.isUsageStatsPermissionGranted();
if (!permissionResult.granted) {
  // Open settings to grant permission
  await AndroidUsageStatsManager.openUsageStatsSettings();
  return;
}

// Query usage statistics
const statsOptions = {
  intervalType: 0, // INTERVAL_DAILY
  startTime: Date.now() - (7 * 24 * 60 * 60 * 1000), // 7 days ago
  endTime: Date.now()
};

const usageStats = await AndroidUsageStatsManager.queryAndAggregateUsageStats(statsOptions);
console.log('Usage statistics:', usageStats);

// Get all installed packages
const packages = await AndroidUsageStatsManager.queryAllPackages();
console.log('Installed packages:', packages);
```

## Manejo de permisos

El Plugin requiere permisos especiales que no pueden ser concedidos a trav√©s de solicitudes normales de permisos en tiempo de ejecuci√≥n:

1. **PACKAGE_USAGE_STATS**: Permite el acceso a estad√≠sticas de uso
2. **QUERY_ALL_PACKAGES**: Requerido para informaci√≥n de paquetes (Android 11+)

Los usuarios deben conceder manualmente estos permisos a trav√©s de la configuraci√≥n del sistema. Usa `openUsageStatsSettings()` para dirigir a los usuarios a la p√°gina de configuraci√≥n apropiada.

## Tipos de datos

### Estad√≠sticas de uso
- Tiempo de uso de la aplicaci√≥n y frecuencia
- Primera y √∫ltima vez usado
- Tiempo total en primer plano
- Conteo de lanzamientos

### Informaci√≥n de paquetes
- Nombre y versi√≥n del paquete
- Tiempo de instalaci√≥n
- Etiquetas e iconos de aplicaciones
- Aplicaciones del sistema vs aplicaciones de usuario

## Casos de uso

- **Aplicaciones de bienestar digital**: Monitorea el tiempo de pantalla y el uso de aplicaciones
- **Controles parentales**: Rastrea el uso del dispositivo de los ni√±os
- **Aplicaciones de productividad**: Analiza patrones de trabajo y tiempo de concentraci√≥n
- **Anal√≠ticas**: Comprende el comportamiento del usuario y el compromiso con la aplicaci√≥n

## Compatibilidad con Android

- **Versi√≥n m√≠nima de Android**: Nivel de API 21 (Android 5.0)
- **Caracter√≠sticas avanzadas**: Nivel de API 29+ (Android 10+) para estad√≠sticas mejoradas
- **Consultas de paquetes**: Nivel de API 30+ (Android 11+) requiere QUERY_ALL_PACKAGES

## Consideraciones de seguridad

- El permiso de estad√≠sticas de uso es sensible y requiere consentimiento del usuario
- Considera la privacidad del usuario al recopilar datos de uso
- Implementa pr√°cticas adecuadas de manejo y almacenamiento de datos
- Sigue las pol√≠ticas de Google Play para la recopilaci√≥n de datos de uso

## Documentaci√≥n

Consulta la [documentaci√≥n completa](/docs/plugins/android-usagestatsmanager/getting-started/) para gu√≠as detalladas de implementaci√≥n y patrones de uso avanzados.
