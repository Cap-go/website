---
title: チャネルシステム
description: capacitor-updater でチャンネルシステムを使用する方法
sidebar:
  order: 6
locale: ja
---

CapgoとCapacitor-updaterには強力なチャンネルシステムが付属しています

## チャンネルでできること：

* 開発やベータテスト用にデバイスをチャンネルに関連付ける
* 開発ブランチごとに1つのチャンネルを使用し、チームメンバーが端末から自己割り当てしてテストできるようにする

## デバイスをチャンネルに割り当てる：

* チャンネルをデフォルトに設定すると、新しいデバイスがCapgoに更新を要求するたびにこのチャンネルが応答します
* [**getDeviceId**](/docs/plugin/api#getdeviceid)メソッドで**deviceId**をバックエンドに送信し、Capgo公開APIで割り当てる
* チャンネルを自己割り当て可能に設定し（[**setChannel**](/docs/plugin/api#setchannel)メソッド）、プラグインの`setChannel`メソッドでデバイスがチャンネルを購読できるようにする（ユーザーの操作の有無は問わない）
* [設定](/docs/plugin/settings#defaultchannel)の`defaultChannel`オプションを使用して、このプラグイン設定を持つすべてのデバイスのデフォルトチャンネルを設定する

:::note
デバイスを直接バンドルに割り当てることもできます
:::

## チャンネルオプション

<figure><img src="/channel_setting_1.webp" alt=""><figcaption></figcaption></figure>

各オプションの詳細：

| オプション | 説明 |
| --------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| **ネイティブ以下への自動ダウングレードを無効化** | アプリのネイティブバージョンがチャンネルのバージョンより大きい場合、更新を送信しない |
| **メジャーバージョン以上への自動アップグレードを無効化** | アプリのネイティブバージョンがチャンネルのバージョンのメジャー（**1**23）より低い場合、更新を送信しない |
| **マイナーバージョン以上への自動アップグレードを無効化** | アプリのネイティブバージョンがチャンネルのバージョンのマイナー（1**2**3）より低い場合、更新を送信しない |
| **デバイスの自己割り当てを許可** | デバイスがこのチャンネルに対して`setChannel`メソッドを使用することを許可 |
| **iOS** | iOSデバイスがこのチャンネルから更新をダウンロードすることを許可 |
| **Android** | Androidデバイスがこのチャンネルから更新をダウンロードすることを許可 |
| **エミュレータを許可** | エミュレータがこのチャンネルから更新を受信することを許可 |
| **開発ビルドを許可** | 開発ビルドがこのチャンネルから更新を受信することを許可 |

:::note
CI/CDをGoogle Playへのバージョン送信用に設定している場合、Google Playは毎回20台以上の実機でアプリを実行します。Capgoは新しいバンドルの最初の4時間、統計にカウントされるのを防ぐためにGoogleデータセンターのIPをブロックします
:::

:::note
Capgoはエミュレータと開発ビルドを使用量にカウントしませんが、これらが3%を超えるとアカウントは修正されるまでロックされることに注意してください
:::