---
title: "Erste Schritte mit Screen Orientation"
description: "Lernen Sie, wie Sie das Screen Orientation Plugin installieren und verwenden, um Geräteorientierung in Ihrer Capacitor-App zu steuern und zu erkennen"
sidebar:
  order: 2
locale: de
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Code, Steps, Aside } from '@astrojs/starlight/components';
import { PackageManagers } from 'starlight-package-managers'

<Steps>
1. **Paket installieren**
   <PackageManagers pkg="@capgo/capacitor-screen-orientation" pkgManagers={['npm', 'pnpm', 'yarn', 'bun']} />

2. **Mit nativen Projekten synchronisieren**
   <PackageManagers type="exec" pkg="cap" args="sync" pkgManagers={['npm', 'pnpm', 'yarn', 'bun']} />

3. **iOS-Konfiguration (optional)**
   Um physikalische Geräteorientierung mit Bewegungssensoren auf iOS zu erkennen, fügen Sie zu Ihrer `Info.plist` hinzu:
   ```xml
   <key>NSMotionUsageDescription</key>
   <string>Diese App verwendet Bewegungssensoren zur Erkennung der Geräteorientierung.</string>
   ```
</Steps>

## Grundlegende Verwendung

```typescript
import { ScreenOrientation } from '@capgo/capacitor-screen-orientation';

// Aktuelle Orientierung abrufen
const current = await ScreenOrientation.orientation();
console.log('Aktuelle Orientierung:', current.type);

// Im Landscape-Modus sperren
await ScreenOrientation.lock({ orientation: 'landscape' });

// Orientierung entsperren
await ScreenOrientation.unlock();

// Auf Orientierungsänderungen abhören
const listener = await ScreenOrientation.addListener(
  'screenOrientationChange',
  (result) => {
    console.log('Orientierung geändert:', result.type);
  }
);
```

## Erkennung der physikalischen Orientierung

Dieses Plugin hat eine einzigartige Funktion: Es kann die **wahre physikalische Orientierung** des Geräts unter Verwendung von Bewegungssensoren erkennen, auch wenn der Benutzer die Orientierungssperre auf seinem Gerät aktiviert hat.

<Aside type="note">
  Die Benutzeroberfläche respektiert weiterhin die Orientierungssperreinstellung des Benutzers. Motion-Tracking ermöglicht es Ihnen, zu wissen, wie das Gerät physikalisch gehalten wird, aber die Benutzeroberfläche dreht sich nicht, wenn die Orientierungssperre aktiviert ist.
</Aside>

```typescript
import { ScreenOrientation } from '@capgo/capacitor-screen-orientation';

// Motion-basiertes Tracking starten
await ScreenOrientation.startOrientationTracking({
  bypassOrientationLock: true
});

// Jetzt zeigen Orientierungsänderungsereignisse die physikalische Orientierung
const listener = await ScreenOrientation.addListener(
  'screenOrientationChange',
  (result) => {
    console.log('Physikalische Orientierung:', result.type);
  }
);

// Überprüfen Sie, ob Orientierungssperre aktiviert ist
const lockStatus = await ScreenOrientation.isOrientationLocked();
if (lockStatus.locked) {
  console.log('Benutzer hat Orientierungssperre aktiviert');
  console.log('Physisch:', lockStatus.physicalOrientation);
  console.log('UI:', lockStatus.uiOrientation);
}

// Tracking beenden, wenn fertig
await ScreenOrientation.stopOrientationTracking();
```

## API-Referenz

### orientation()

Rufen Sie die aktuelle Bildschirmausrichtung ab.

```typescript
const result = await ScreenOrientation.orientation();
// Rückgabe: { type: OrientationType }
```

**OrientationType-Werte:**
- `'portrait-primary'` - Hochformat, Startknopf unten
- `'portrait-secondary'` - Hochformat, umgekehrt
- `'landscape-primary'` - Querformat, Startknopf rechts
- `'landscape-secondary'` - Querformat, Startknopf links

### lock(options)

Sperren Sie den Bildschirm auf eine bestimmte Ausrichtung.

```typescript
interface OrientationLockOptions {
  orientation: OrientationLockType;
  bypassOrientationLock?: boolean; // Motion Tracking aktivieren
}

await ScreenOrientation.lock({ orientation: 'landscape' });
```

**OrientationLockType-Werte:**
- `'any'` - Beliebige Orientierung
- `'natural'` - Natürliche Ausrichtung des Geräts
- `'landscape'` - Beliebiger Landscape-Modus
- `'portrait'` - Beliebiger Portrait-Modus
- `'portrait-primary'` / `'portrait-secondary'`
- `'landscape-primary'` / `'landscape-secondary'`

### unlock()

Entsperren Sie die Bildschirmausrichtung.

```typescript
await ScreenOrientation.unlock();
```

### startOrientationTracking(options?)

Beginnen Sie mit der Verfolgung der physikalischen Geräteausrichtung mit Bewegungssensoren.

```typescript
await ScreenOrientation.startOrientationTracking({
  bypassOrientationLock: true
});
```

### stopOrientationTracking()

Stoppen Sie die Motion-basierte Orientierungsverfolgung.

```typescript
await ScreenOrientation.stopOrientationTracking();
```

### isOrientationLocked()

Überprüfen Sie, ob die Geräteorientierungssperre aktiviert ist.

```typescript
const result = await ScreenOrientation.isOrientationLocked();
// Rückgabe: {
//   locked: boolean,
//   physicalOrientation?: OrientationType,
//   uiOrientation?: OrientationType
// }
```

<Aside type="tip">
  Diese Methode erfordert, dass Motion Tracking aktiv ist, um ordnungsgemäß zu funktionieren.
</Aside>

### addListener(eventName, callback)

Abhören auf Orientierungsänderungen.

```typescript
const listener = await ScreenOrientation.addListener(
  'screenOrientationChange',
  (result) => {
    console.log('Neue Orientierung:', result.type);
  }
);

// Entfernen Sie, wenn fertig
await listener.remove();
```

### removeAllListeners()

Entfernen Sie alle Event-Listener.

```typescript
await ScreenOrientation.removeAllListeners();
```

## Vollständiges Beispiel

```typescript
import { ScreenOrientation } from '@capgo/capacitor-screen-orientation';

class OrientationManager {
  private listener: any = null;

  async init() {
    // Motion Tracking für Erkennung der physikalischen Ausrichtung starten
    await ScreenOrientation.startOrientationTracking({
      bypassOrientationLock: true
    });

    // Auf Änderungen abhören
    this.listener = await ScreenOrientation.addListener(
      'screenOrientationChange',
      this.onOrientationChange.bind(this)
    );

    // Anfängliche Orientierung abrufen
    const { type } = await ScreenOrientation.orientation();
    console.log('Anfängliche Orientierung:', type);
  }

  onOrientationChange(result: { type: string }) {
    console.log('Orientierung geändert zu:', result.type);

    // Benutzeroberfläche basierend auf Orientierung anpassen
    if (result.type.includes('landscape')) {
      this.showLandscapeUI();
    } else {
      this.showPortraitUI();
    }
  }

  showLandscapeUI() {
    // Landscape-spezifische UI-Anpassungen
  }

  showPortraitUI() {
    // Portrait-spezifische UI-Anpassungen
  }

  async lockLandscape() {
    await ScreenOrientation.lock({ orientation: 'landscape' });
  }

  async lockPortrait() {
    await ScreenOrientation.lock({ orientation: 'portrait' });
  }

  async freeRotation() {
    await ScreenOrientation.unlock();
  }

  async checkIfUserHasOrientationLock() {
    const { locked, physicalOrientation, uiOrientation } =
      await ScreenOrientation.isOrientationLocked();

    if (locked) {
      console.log(`Gerät wird in ${physicalOrientation} gehalten, aber UI zeigt ${uiOrientation}`);
      return true;
    }
    return false;
  }

  async destroy() {
    await ScreenOrientation.stopOrientationTracking();
    if (this.listener) {
      await this.listener.remove();
    }
  }
}
```

## Plattformnotizen

### iOS
- Verwendet Core Motion Framework für Erkennung der physikalischen Ausrichtung
- Erfordert `NSMotionUsageDescription` in Info.plist für Bewegungssensoren
- Vollständige Unterstützung für alle Ausrichtungstypen

### Android
- Verwendet Beschleunigungssensor für Erkennung der physikalischen Ausrichtung
- Keine zusätzlichen Berechtigungen erforderlich
- Vollständige Unterstützung für alle Ausrichtungstypen

### Web
- Verwendet Screen Orientation API
- Bewegungssensor-Erkennung ist begrenzt
- Einige Browser unterstützen möglicherweise nicht alle Lock-Typen
