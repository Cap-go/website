---
title: Kanäle
sidebar:
  order: 2
locale: de
---

import { Aside, Steps } from '@astrojs/starlight/components';

Ein Live Update-Kanal zeigt auf ein bestimmtes JS-Bundle-Build Ihrer App, das mit allen Geräten geteilt wird, die so konfiguriert sind, dass sie diesem Kanal für Updates lauschen. Wenn Sie das [Capgo Live Updates SDK](/docs/getting-started/quickstart/) in Ihrer App installieren, überprüft jedes native Binary, das auf diesen Kanal konfiguriert ist, bei jedem Start der App, ob Updates verfügbar sind. Sie können das Build, auf das ein Kanal zeigt, jederzeit ändern und können auch auf frühere Builds zurückrollen, wenn nötig.

## Einen Kanal einrichten

Jede App hat einen standardmäßigen Kanal mit dem Namen "Produktion", der nicht gelöscht werden kann. Um neue Kanäle hinzuzufügen:

1. Gehen Sie zum Abschnitt "Kanäle" im Capgo-Dashboard. 
2. Klicken Sie auf die Schaltfläche "Neuer Kanal".
3. Geben Sie einen Namen für den Kanal ein und klicken Sie auf "Erstellen".

Kanalnamen können beliebig gewählt werden. Eine gängige Strategie ist, die Kanäle auf die Entwicklungsphasen abzustimmen, wie zum Beispiel:

- `Entwicklung` - für das Testen von Live-Updates auf lokalen Geräten oder Emulatoren.
- `QA` - für Ihr QA-Team, um Updates vor einer breiteren Veröffentlichung zu überprüfen.
- `Staging` - für abschließende Tests in einer produktionsähnlichen Umgebung.
- `Produktion` - für die Version Ihrer App, die Endbenutzer aus den App-Stores erhalten.

## Den Kanal in Ihrer App konfigurieren

Nachdem Sie Ihre Kanäle erstellt haben, müssen Sie Ihre App konfigurieren, um den entsprechenden Kanal abzuhören. In diesem Beispiel verwenden wir den `Entwicklung`-Kanal.

Öffnen Sie Ihre `capacitorconfig.ts` (oder `capacitorconfig.json`) Datei. Unter dem Abschnitt `plugins` setzen Sie die `channel`-Eigenschaft des `CapacitorUpdater`-Plugins auf den Namen Ihres gewünschten Kanals:

```ts
import { CapacitorConfig } from '@capacitor/cli';

const config: CapacitorConfig = {
  plugins: {
    CapacitorUpdater: {
      defaultChannel: 'Entwicklung',
    },
  },
};
```

Bauen Sie als Nächstes Ihre Web-App und führen Sie `npx cap sync` aus, um die aktualisierte Konfigurationsdatei in Ihre iOS- und Android-Projekte zu kopieren. Wenn Sie diesen Synchronisierungsschritt überspringen, verwenden Ihre nativen Projekte weiterhin den Kanal, für den sie zuvor konfiguriert waren.

<Aside type="caution">

Die `defaultChannel`-Eigenschaft überschreibt immer den standardmäßigen Cloud-Kanal, aber Sie können die deviceId dennoch auf einen Kanal in der Cloud zwingen.

</Aside>


## Ein Bundle einem Kanal zuweisen

Um ein Live-Update bereitzustellen, müssen Sie ein neues JS-Bundle-Build hochladen und es einem Kanal zuweisen. Dies können Sie in einem Schritt mit der Capgo CLI tun:

```shell
npx @capgo/cli@latest upload --channel=Entwicklung
```

Dies lädt Ihre gebauten Webressourcen hoch und setzt das neue Bundle als aktives Build für den `Entwicklung`-Kanal. Alle Apps, die konfiguriert sind, diesen Kanal abzuhören, erhalten das Update beim nächsten Check.

Sie können Builds auch aus dem Abschnitt "Bundles" des Capgo-Dashboards Kanälen zuweisen. Klicken Sie auf das Menüsymbol neben einem Build und wählen Sie "Kanal zuweisen", um den Kanal für dieses Build auszuwählen.

## Bundle-Versionierung und Kanäle

Es ist wichtig zu beachten, dass Bundles in Capgo global für Ihre App sind, nicht spezifisch für einzelne Kanäle. Dasselbe Bundle kann mehreren Kanälen zugewiesen werden.

Bei der Versionierung Ihrer Bundles empfehlen wir die Verwendung von semantischer Versionierung [semver](https://semverorg/) mit Pre-Release-Identifikatoren für kanalspezifische Builds. Zum Beispiel könnte ein Beta-Release als `123-beta1` versioniert werden.

Dieser Ansatz hat mehrere Vorteile:

- Er kommuniziert klar die Beziehung zwischen den Builds. `123-beta1` ist offensichtlich eine Vorabversion von `123`.
- Er ermöglicht die Wiederverwendung von Versionsnummern über Kanäle hinweg, was Verwirrung reduziert.
- Er ermöglicht klare Rückrollpfade. Wenn Sie von `123` zurückrollen müssen, wissen Sie, dass `122` die vorherige stabile Version ist.

Hier ist ein Beispiel, wie Sie Ihre Bundle-Versionen mit einem typischen Kanal-Setup in Einklang bringen könnten:

- `Entwicklung`-Kanal: `123-dev1`, `123-dev2`, usw.
- `QA`-Kanal: `123-qa1`, `123-qa2`, usw.
- `Staging`-Kanal: `123-rc1`, `123-rc2`, usw.
- `Produktion`-Kanal: `123`, `124`, usw.

Die Verwendung von semver mit Pre-Release-Identifikatoren ist ein empfohlener Ansatz, aber nicht unbedingt erforderlich. Der Schlüssel ist, ein Versionierungsschema zu finden, das die Beziehungen zwischen Ihren Builds klar kommuniziert und mit dem Entwicklungsprozess Ihres Teams in Einklang steht.

## Ein Live-Update zurückrollen

Wenn Sie ein Live-Update bereitstellen, das einen Fehler einführt oder anderweitig zurückgesetzt werden muss, können Sie ganz einfach auf ein vorheriges Build zurückrollen. Gehen Sie dazu zum Abschnitt "Kanäle" des Dashboards:

<Steps>

1. Klicken Sie auf den Namen des Kanals, den Sie zurückrollen möchten.
2. Finden Sie das Build, auf das Sie zurücksetzen möchten, und klicken Sie auf das Kronensymbol.
![Rollback-Build](/select_bundlewebp)
3. Bestätigen Sie die Aktion.

</Steps>

Das ausgewählte Build wird sofort wieder das aktive Build für diesen Kanal. Apps erhalten die zurückgerollte Version beim nächsten Check auf ein Update.

## Automatisierung von Bereitstellungen

Für fortgeschrittenere Workflows können Sie Ihre Live-Update-Bereitstellungen als Teil Ihrer CI/CD-Pipeline automatisieren. Durch die Integration von Capgo in Ihren Build-Prozess können Sie neue Bundles automatisch hochladen und ihnen Kanäle zuweisen, wann immer Sie in bestimmte Branches pushen oder neue Releases erstellen.

Siehe die [CI/CD-Integration](/docs/cicd-integration/) Dokumentation, um mehr über die Automatisierung von Capgo-Live-Updates zu erfahren.

## Bereitstellung auf einem Gerät

Jetzt, da Sie die Kanäle verstanden haben, sind Sie bereit, Live-Updates auf echten Geräten bereitzustellen. Der grundlegende Prozess ist:

1. Installieren Sie das Capgo SDK in Ihrer App.
2. Konfigurieren Sie die App, um auf Ihren gewünschten Kanal zu hören.
3. Laden Sie ein Build hoch und weisen Sie es diesem Kanal zu.
4. Starten Sie die App und warten Sie auf das Update!

Für eine detailliertere Anleitung sehen Sie sich den [Bereitstellung von Live-Updates](/docs/getting-started/deploy/) Leitfaden an. Viel Spaß beim Aktualisieren!