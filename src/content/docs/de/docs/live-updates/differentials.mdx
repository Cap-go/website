---
title: Schnelle Updates
sidebar:
  order: 4
locale: de
---

import { Aside, Steps } from '@astrojs/starlight/components';

Das Live-Update-System von Capgo kann Updates schneller und effizienter bereitstellen, indem es nur die geänderten Dateien sendet, anstatt das gesamte JS-Bündel.

Dies ist besonders vorteilhaft für Benutzer mit langsameren oder begrenzten Netzwerkverbindungen, da es die Menge der herunterzuladenden Daten minimiert.

Ein weiterer Vorteil besteht darin, dass bei der App große Assets, die sich selten ändern, wie Bilder oder Videos, im Vergleich zu gezippten JS-Dateien nur einmal heruntergeladen werden.

## Wie differenzielle Updates funktionieren

Differenzielle Updates in Capgo werden durch das in Ihrer App installierte Capgo-Plugin verwaltet. Wenn Sie eine neue Version Ihrer App mit dem `--partial`-Flag hochladen, führt Capgo Folgendes aus:

1. Jede Datei in Ihrem Build wird einzeln hochgeladen.
2. Es werden Prüfziffern für jede Datei erzeugt.
3. Ein neues JSON-Manifest wird erstellt, das alle Dateien und ihre Prüfziffern auflistet.
4. Dieses Manifest wird in der Capgo-Datenbank hochgeladen.

Wenn ein Gerät, auf dem Ihre App läuft, nach einem Update sucht, erhält das Capgo-Plugin das neue Manifest vom Server. Es vergleicht dieses Manifest mit dem, das es derzeit hat, und identifiziert, welche Dateien sich basierend auf den Prüfziffern und Dateipfaden geändert haben.

Das Plugin lädt dann nur die geänderten Dateien herunter, anstatt das gesamte JS-Bündel. Es rekonstruierte die neue Version der App, indem es diese heruntergeladenen Dateien mit den unveränderten Dateien kombiniert, die es bereits hat.

<Aside title="Manifest">

Im Falle differenzieller Updates speichert das Gerät alle heruntergeladenen Dateien in einem gemeinsamen Cache. Capgo wird diesen niemals bereinigen, aber das Betriebssystem kann dies jederzeit tun.

</Aside>

## Aktivierung differenzieller Updates

Um differenzielle Updates für Ihre Capgo-App zu aktivieren, verwenden Sie einfach das `--partial`-Flag, wenn Sie eine neue Version hochladen:

## Durchsetzen differenzieller Updates

Wenn Sie sicherstellen möchten, dass alle Uploads differenzielle Updates sind und versehentliche vollständige Bündel-Uploads verhindern möchten, können Sie das `--partial-only`-Flag verwenden:

```shell
npx @capgo/cli@latest upload --partial-only
```

Wenn `--partial-only` verwendet wird, uploadet Capgo nur einzelne Dateien und erstellt ein Manifest. Jedes Gerät, das kein Partial unterstützt, kann das Update nicht herunterladen.

Sie möchten möglicherweise `--partial-only` verwenden, wenn:

- Sie immer differenzielle Updates verwenden möchten und niemals vollständige Bündel-Uploads zulassen möchten.
- Sie eine CI/CD-Pipeline einrichten und sicherstellen möchten, dass alle automatisierten Uploads differenziell sind.
- Ihre App groß ist und die Bandbreite begrenzt ist, sodass Sie die Upload-/Download-Größen minimieren müssen.

Wenn Sie einen vollständigen Bündel-Upload durchführen müssen, während `--partial-only` gesetzt ist, führen Sie einfach den Upload-Befehl ohne `--partial-only` aus. Dies überschreibt die Einstellung für diesen einzelnen Upload und ermöglicht es Ihnen, ein komplettes Bündel bei Bedarf zu pushen.

## Fehlerbehebung

Wenn die differenziellen Updates nicht zu funktionieren scheinen (d.h. Geräte das vollständige JS-Bündel auch bei kleinen Änderungen immer herunterladen), überprüfen Sie Folgendes:

- Sie verwenden jedes Mal das `--partial`-Flag, wenn Sie eine neue Version hochladen.
- Wenn Sie `--partial-only` verwenden, stellen Sie sicher, dass Sie das `--partial`-Flag nicht versehentlich weggelassen haben.
- Ihr Gerät führt die neueste Version des Capgo-Plugins aus.
- Ihr Gerät hat eine stabile Netzwerkverbindung und kann die Capgo-Server erreichen.

Sie können auch die Capgo-Webanwendung verwenden, um die Einzelheiten Ihres letzten Uploads zu überprüfen:
<Steps>
1. Gehen Sie zur [Webanwendung](https://appcapgoio).
2. Klicken Sie auf Ihre App.
3. Klicken Sie auf die Bündelnummer in der Statusleiste.
4. Wählen Sie das letzte Bündel aus.
5. Überprüfen Sie das Feld `Partial`.
  ![bundle type](/bundle_typewebp)
</Steps>

Wenn Sie weiterhin Probleme haben, wenden Sie sich bitte an den Capgo-Support, um weitere Unterstützung zu erhalten. Sie können die Serverprotokolle überprüfen, um zu bestätigen, dass Ihre partiellen Uploads korrekt verarbeitet werden und dass die Geräte die aktualisierten Manifesten erhalten.

Das war's! Das `--partial`-Flag sagt Capgo, die erforderlichen Einzeldatei-Uploads und die Manifestgenerierung für differenzielle Updates durchzuführen.

Beachten Sie, dass Sie das `--partial`-Flag jedes Mal verwenden müssen, wenn Sie eine neue Version hochladen, die als differenzielles Update bereitgestellt werden soll. Wenn Sie das Flag weglassen, lädt Capgo das gesamte JS-Bündel als einzelne Datei hoch, und die Geräte laden das gesamte Bündel herunter, selbst wenn nur ein kleiner Teil geändert wurde.