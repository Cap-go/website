---
title: Verwendung des Capacitor-Updaters mit selbstgehostetem Capgo
description: Wie man den Capacitor Updater mit selbstgehostetem Capgo verwendet
sidebar:
  order: 2
locale: de
---

## Was dieses Tutorial abdecken wird?

Dieses Tutorial zeigt, wie man den Capacitor Updater in einer Entwicklungsumgebung mit selbst gehostetem Capgo verwendet.

## Voraussetzungen

1. [Klonen Sie Capgo](https://githubcom/Cap-go/capgo/)

## Erste Schritte

Um den Capacitor Updater mit selbst-gehostetem Capgo zu verwenden, bearbeiten Sie die `capacitorconfigts` in Ihrem Anwendungsverzeichnis und setzen Sie sie wie folgt:

```ts
const config: CapacitorConfig = {
  appId: 'comdemoapp',
  appName: 'demoApp',
  webDir: 'dist',
  bundledWebRuntime: false,
  plugins: {
    CapacitorUpdater : {
      statsUrl: "http://localhost:54321/functions/v1/stats",
      channelUrl: "http://localhost:54321/functions/v1/channel_self",
      updateUrl: "http://localhost:54321/functions/v1/updates"
    },
  },
};
```

Damit können Sie Capgo lokal in der Entwicklung verwenden. Allerdings ist dies standardmäßig nicht genug.

In Android ist es erforderlich, [klare Kommunikation](https://developerandroidcom/topic/security/risks/cleartext/) zu aktivieren, da SSL standardmäßig lokal deaktiviert ist. Dies kann erreicht werden, indem Sie [AndroidManifestxml](https://githubcom/Cap-go/capacitor-updater/blob/main/android/src/main/AndroidManifestxml/) ändern und `android:usesCleartextTraffic="true"` im `application`-Tag hinzufügen. Ein vollständiges Beispiel für diese Änderung finden Sie [hier](https://gistgithubcom/WcaleNieWolny/061a015acdebe35eaf3afd7030797701/).

Da Android standardmäßig keine `http`-Verbindungen erlaubt, hat Capgo eine Überprüfung für `http` [hier](https://githubcom/Cap-go/capgo/blob/4cce6c0707d745faa2afbab643e636bad927c602/supabase/functions/updates/indexts/#L396) implementiert. Dieser Code könnte nicht immer vorhanden sein, aber vorerst ist eine Änderung zu dieser Zeile erforderlich, um die Updates zum Laufen zu bringen. Diese Zeile sollte ungefähr so aussehen:
```ts
    if (!signedURL || (signedURLstartsWith('http://') || signedURLstartsWith('https://'))) {
```

:::danger
⚠️ Kommittieren Sie `supabase/functions/updates/indexts` nicht in das entfernte Repository\
Dieser Code ist [absichtlich hier](https://githubcom/Cap-go/capacitor-updater/issues/37/#issuecomment-1684916354).
:::

Es könnte auch ein Problem geben, das die Android-App daran hindert, sich zu verbinden. Wenn Sie keine Anfragen an die Edge-Funktionen sehen, führen Sie aus:
```bash
adb reverse tcp:54321 tcp:54321
```