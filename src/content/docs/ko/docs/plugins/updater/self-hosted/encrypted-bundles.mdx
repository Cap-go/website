---
title: "암호화된 번들"
locale: ko
description: "자체 호스팅 환경에서 수동 업데이트 플러그인을 활용하는 포괄적인 가이드로, 안전하고 효율적인 업데이트를 위한 암호화된 번들 관리 단계와 프로세스를 자세히 설명합니다."
sidebar:
  order: 5
---
import { LinkCard, CardGrid } from '@astrojs/starlight/components';

## 종단 간 암호화

버전 4.15.0부터 플러그인은 암호화된 업데이트를 보낼 수 있습니다.

### 1단계: 개인 키 생성
```bash title='개인 키 생성'
npx @capgo/cli key create
```

### 2단계: 번들 생성 및 압축
```bash title="체크섬과 함께 번들 zip 생성"
npx @capgo/cli bundle zip [appId] --key-v2 --json
```

`--key-v2` 플래그는 더 나은 체크섬을 가진 새로운 암호화 시스템을 사용하며, `--json` 플래그는 암호화에 필요한 체크섬을 포함한 번들 정보를 출력합니다.

### 3단계: 번들 암호화
```bash title="체크섬과 함께 번들 zip 암호화"
npx @capgo/cli encrypt [path/to/zip] [checksum]
```

`checksum` 매개변수는 2단계의 zip 명령으로 생성된 SHA256 체크섬입니다. encrypt 명령은 `ivSessionKey`를 반환하고 암호화된 체크섬을 생성합니다. 업데이트 페이로드에서 `ivSessionKey` 키를 `session_key`로 이름을 변경해야 합니다.

### 4단계: 업데이트 페이로드에서 사용
```json
{
"version": "1.2.3",
"url": "https://myserver.com/app/updates/my-new-app-2.0.0.zip",
"session_key": "encrypted_session_key",
"checksum": "encrypted_checksum_from_encrypt_command"
}
```

`session_key`는 encrypt 명령에서 반환된 `ivSessionKey`이며, `checksum`은 암호화 중에 생성된 암호화된 체크섬입니다(zip 명령의 원래 체크섬이 아님).

그러면 앱이 개인 키를 사용하여 `session_key`를 복호화하고 복호화된 `session_key`를 사용하여 업데이트를 복호화할 수 있습니다. 암호화된 체크섬은 번들 무결성 검증을 보장합니다.

## 더 알아보기

<CardGrid>
<LinkCard
	title="종단 간 암호화 가이드"
	href="https://capgo.app/blog/introducing-end-to-end-security-to-capacitor-updater-with-code-signing/"
	description="RSA + AES 암호화를 사용한 Capgo의 암호화 시스템 작동 방식에 대한 자세한 설명"
/>
<LinkCard
	title="자체 호스팅 라이브 업데이트"
	href="https://capgo.app/blog/self-hosted-live-updates/"
	description="자체 호스팅 업데이트 설정을 위한 완전한 워크플로우"
/>
</CardGrid>
