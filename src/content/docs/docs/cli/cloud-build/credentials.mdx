---
title: Managing Credentials
description: Save and manage build credentials locally for iOS and Android builds
sidebar:
  order: 5
---

import { Steps, Aside } from '@astrojs/starlight/components';

Manage your iOS and Android build credentials locally for convenient cloud builds.

## Overview

Capgo CLI allows you to save build credentials locally on your machine in the `.capgo-credentials` folder. When you run a build, these credentials are automatically used and sent securely to Capgo's build servers.

<Aside type="tip" title="Need Help Getting Credentials?">
If you don't have your certificates and credentials yet, check these comprehensive guides:

**iOS:**
- [How to Get iOS Certificates](/docs/cli/cloud-build/ios/#how-to-get-ios-certificates-and-provisioning-profiles) - Step-by-step guide
- [iOS Certificates Guide (Capgo)](https://capgo.app/cloud/native-builds/certificates/ios/) - Detailed tutorial with screenshots
- [Blog: Automatic iOS Builds](https://capgo.app/blog/automatic-capacitor-ios-build-github-action/) - Complete CI/CD setup

**Android:**
- [Creating a Keystore](/docs/cli/cloud-build/android/#creating-a-keystore) - Step-by-step guide
- [Android Certificates Guide (Capgo)](https://capgo.app/cloud/native-builds/certificates/android/) - Detailed tutorial with screenshots
- [Blog: Automatic Android Builds](https://capgo.app/blog/automatic-capacitor-android-build-github-action/) - Complete CI/CD setup
</Aside>

<Aside type="caution" title="Security Guarantee">
**Your credentials are NEVER stored permanently on Capgo servers:**
- âœ… Used ONLY during the active build process
- âœ… Automatically deleted after build completion
- âœ… Maximum retention: 24 hours (even if build fails)
- âœ… Apps are sent directly to App Store/Play Store - we store NOTHING
- âœ… Transmitted securely over HTTPS
</Aside>

## Commands

### Save Credentials

Store your build credentials locally for automatic use:

```bash
npx @capgo/cli build credentials save --platform <ios|android> [options]
```

### List Credentials

View currently saved credentials (passwords are masked):

```bash
npx @capgo/cli build credentials list
```

### Clear Credentials

Remove saved credentials from your local machine:

```bash
# Clear all credentials
npx @capgo/cli build credentials clear

# Clear only iOS credentials
npx @capgo/cli build credentials clear --platform ios

# Clear only Android credentials
npx @capgo/cli build credentials clear --platform android
```

## Saving iOS Credentials

<Aside type="note">
**Don't have iOS certificates yet?** See the [iOS Builds guide](/docs/cli/cloud-build/ios/#how-to-get-ios-certificates-and-provisioning-profiles) for instructions on creating certificates and provisioning profiles.
</Aside>

### Complete Example

```bash
npx @capgo/cli build credentials save \
  --platform ios \
  --certificate ./cert.p12 \
  --p12-password "YourP12Password" \
  --provisioning-profile ./profile.mobileprovision \
  --apple-key ./AuthKey_ABC1234567.p8 \
  --apple-key-id "ABC1234567" \
  --apple-issuer-id "00000000-0000-0000-0000-000000000000" \
  --apple-team-id "TEAM123456"
```

### iOS Options

| Option | Description | Required |
|--------|-------------|----------|
| `--certificate <path>` | Path to .p12 certificate file | Yes (release) |
| `--p12-password <password>` | Password for the .p12 certificate | Yes (release) |
| `--provisioning-profile <path>` | Path to .mobileprovision file | Yes (release) |
| `--provisioning-profile-prod <path>` | Production provisioning profile (optional) | No |
| `--apple-key <path>` | Path to App Store Connect API .p8 key | Yes (submission) |
| `--apple-key-id <id>` | App Store Connect API Key ID | Yes (submission) |
| `--apple-issuer-id <id>` | App Store Connect API Issuer ID (UUID) | Yes (submission) |
| `--apple-team-id <id>` | App Store Connect Team ID | Yes (submission) |
| `--apple-id <email>` | Apple ID email (alternative auth) | No |
| `--apple-app-password <password>` | App-specific password (alternative auth) | No |

### What Gets Stored

When you save iOS credentials, the CLI:
1. Reads the certificate and provisioning profile files
2. Converts them to base64 encoding
3. Saves the credentials to the `.capgo-credentials` folder
4. Stores passwords and IDs as plain text (local files only)

The stored file structure:
```json
{
  "ios": {
    "BUILD_CERTIFICATE_BASE64": "...",
    "BUILD_PROVISION_PROFILE_BASE64": "...",
    "APPLE_KEY_CONTENT": "...",
    "P12_PASSWORD": "...",
    "APPLE_KEY_ID": "ABC1234567",
    "APPLE_ISSUER_ID": "...",
    "APP_STORE_CONNECT_TEAM_ID": "TEAM123456"
  }
}
```

## Saving Android Credentials

<Aside type="note">
**Don't have a keystore yet?** See the [Android Builds guide](/docs/cli/cloud-build/android/#creating-a-keystore) for instructions on creating a keystore and setting up Play Store credentials.
</Aside>

### Complete Example

```bash
npx @capgo/cli build credentials save \
  --platform android \
  --keystore ./release.keystore \
  --keystore-alias "my-key-alias" \
  --keystore-key-password "KeyPassword123" \
  --keystore-store-password "StorePassword123" \
  --play-config ./play-store-service-account.json
```

### Android Options

| Option | Description | Required |
|--------|-------------|----------|
| `--keystore <path>` | Path to .keystore or .jks file | Yes (release) |
| `--keystore-alias <alias>` | Key alias in the keystore | Yes (release) |
| `--keystore-key-password <password>` | Password for the key alias | Yes (release) |
| `--keystore-store-password <password>` | Password for the keystore | Yes (release) |
| `--play-config <path>` | Path to Play Store service account JSON | Yes (submission) |

### What Gets Stored

When you save Android credentials, the CLI:
1. Reads the keystore and service account JSON files
2. Converts them to base64 encoding
3. Saves the credentials to the `.capgo-credentials` folder
4. Stores passwords and alias as plain text (local files only)

The stored file structure:
```json
{
  "android": {
    "ANDROID_KEYSTORE_FILE": "...",
    "PLAY_CONFIG_JSON": "...",
    "KEYSTORE_KEY_ALIAS": "my-key-alias",
    "KEYSTORE_KEY_PASSWORD": "...",
    "KEYSTORE_STORE_PASSWORD": "..."
  }
}
}
```

## Using Saved Credentials

Once you've saved credentials, they're automatically used when you build:

```bash
# Credentials automatically loaded from .capgo-credentials folder
npx @capgo/cli build com.example.app --platform ios
```

You can also override saved credentials using environment variables:

```bash
# Environment variables take precedence over saved credentials
BUILD_CERTIFICATE_BASE64="..." \
P12_PASSWORD="different-password" \
npx @capgo/cli build com.example.app --platform ios
```

**Precedence order:**
1. Environment variables (highest priority)
2. Saved credentials in `.capgo-credentials` folder
3. No credentials (lowest priority)

## Viewing Saved Credentials

List what credentials you have saved:

```bash
npx @capgo/cli build credentials list
```

Example output:
```
ðŸ“‹ Saved Build Credentials:

iOS Credentials:
  âœ“ Certificate (base64)
  âœ“ Provisioning Profile (base64)
  âœ“ Apple Key Content (base64)
  âœ“ P12 Password: ********
  âœ“ Apple Key ID: ABC1234567
  âœ“ Apple Issuer ID: 00000000-0000-0000-0000-000000000000
  âœ“ Team ID: TEAM123456

Android Credentials:
  âœ“ Keystore (base64)
  âœ“ Play Store Config (base64)
  âœ“ Keystore Alias: my-key-alias
  âœ“ Key Password: ********
  âœ“ Store Password: ********

Location: .capgo-credentials/

ðŸ”’ These credentials are stored locally on your machine only.
   When building, they are sent to Capgo but NEVER stored there.
   They are auto-deleted after build completion (max 24 hours).
```

## Security Best Practices

### Local Storage Security

1. **File Permissions**
   ```bash
   # Ensure credentials folder is not readable by others
   chmod 700 .capgo-credentials
   chmod 600 .capgo-credentials/*
   ```

2. **Never Commit Credentials**
   ```bash
   # Add to .gitignore
   echo ".capgo-credentials/" >> .gitignore
   ```

3. **Separate Credentials**
   - Use different credentials for local development vs CI/CD
   - Rotate credentials regularly
   - Don't share credentials between team members

### CI/CD Usage

For CI/CD environments, **prefer environment variables** over saved credentials:

```yaml
# GitHub Actions
env:
  BUILD_CERTIFICATE_BASE64: ${{ secrets.IOS_CERTIFICATE }}
  P12_PASSWORD: ${{ secrets.P12_PASSWORD }}
  # ... other secrets
```

This is more secure because:
- Secrets are managed by your CI/CD platform
- No credential files on runners
- Easy rotation and access control
- Audit trails for secret usage

### Credential Rotation

Regularly rotate your credentials:

1. **iOS**: Generate new certificates and API keys yearly
2. **Android**: Change keystore passwords annually
3. **After team changes**: Rotate when team members leave

Update saved credentials:
```bash
# Re-run save command with new credentials
npx @capgo/cli build credentials save --platform ios --certificate ./new-cert.p12 ...
```

## Troubleshooting

### "No credentials found"

If the build says no credentials were found:

1. **Check if credentials are saved**:
   ```bash
   npx @capgo/cli build credentials list
   ```

2. **Save credentials if missing**:
   ```bash
   npx @capgo/cli build credentials save --platform ios ...
   ```

3. **Verify credentials folder exists**:
   ```bash
   ls -la .capgo-credentials/
   ```

### "Permission denied" when reading credentials

Fix file permissions:

```bash
chmod 700 .capgo-credentials
chmod 600 .capgo-credentials/*
```

### Credentials not being used

Check that the correct platform is specified:

```bash
# Make sure --platform matches saved credentials
npx @capgo/cli build com.example.app --platform ios  # Uses ios credentials
npx @capgo/cli build com.example.app --platform android  # Uses android credentials
```

### Clear and re-save credentials

If credentials seem corrupted:

```bash
# Clear all credentials
npx @capgo/cli build credentials clear

# Save again
npx @capgo/cli build credentials save --platform ios ...
```

## Migration from Environment Variables

If you're currently using environment variables, you can migrate to saved credentials:

<Steps>

1. **Extract your current environment variables**
   ```bash
   echo $BUILD_CERTIFICATE_BASE64  # Verify they exist
   ```

2. **Decode base64 files back to original files** (if needed)
   ```bash
   echo "$BUILD_CERTIFICATE_BASE64" | base64 -d > cert.p12
   echo "$BUILD_PROVISION_PROFILE_BASE64" | base64 -d > profile.mobileprovision
   ```

3. **Save using the CLI**
   ```bash
   npx @capgo/cli build credentials save \
     --platform ios \
     --certificate ./cert.p12 \
     --provisioning-profile ./profile.mobileprovision \
     --p12-password "$P12_PASSWORD" \
     --apple-key-id "$APPLE_KEY_ID" \
     --apple-issuer-id "$APPLE_ISSUER_ID" \
     --apple-team-id "$APP_STORE_CONNECT_TEAM_ID"
   ```

4. **Test the build**
   ```bash
   npx @capgo/cli build com.example.app --platform ios
   ```

5. **Remove environment variables** (optional)
   ```bash
   unset BUILD_CERTIFICATE_BASE64 BUILD_PROVISION_PROFILE_BASE64
   ```

</Steps>

## File Location

Credentials are stored in the `.capgo-credentials` folder:
- **macOS/Linux**: `.capgo-credentials/` (in your project root or home directory)
- **Windows**: `.capgo-credentials\` (in your project root or home directory)

The folder is automatically created when you save credentials for the first time.

## Next Steps

- [Getting Started](/docs/cli/cloud-build/getting-started/) - Create your first build
- [iOS Builds](/docs/cli/cloud-build/ios/) - iOS-specific build configuration
- [Android Builds](/docs/cli/cloud-build/android/) - Android-specific build configuration
- [Troubleshooting](/docs/cli/cloud-build/troubleshooting/) - Common issues and solutions

## Need Help?

- ðŸ“š [Troubleshooting guide](/docs/cli/cloud-build/troubleshooting/)
- ðŸ’¬ [Discord community](https://discord.com/invite/VnYRvBfgA6)
- ðŸ“§ Email: support@capgo.app
