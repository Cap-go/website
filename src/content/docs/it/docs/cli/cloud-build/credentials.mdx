---
title: Gestione delle Credenziali
description: Salva e gestisci le credenziali di build localmente per le build iOS e Android
locale: it
sidebar:
  order: 5
---

import { Steps, Aside } from '@astrojs/starlight/components';

Gestisci le tue credenziali di build iOS e Android localmente per comode build cloud.

## Panoramica

CLI Capgo ti consente di salvare le credenziali di build localmente sul tuo computer nella cartella `.capgo-credentials`. Quando esegui una build, queste credenziali vengono automaticamente utilizzate e inviate in modo sicuro ai server di build di Capgo.

<Aside type="tip" title="Hai Bisogno di Aiuto per Ottenere le Credenziali?">
Se non hai ancora i tuoi certificati e credenziali, consulta queste guide complete:

**iOS:**
- [Come Ottenere i Certificati iOS](/docs/cli/cloud-build/ios/#how-to-get-ios-certificates-and-provisioning-profiles) - Guida passo-passo
- [Guida ai Certificati iOS (Capawesome)](https://capawesome.io/cloud/native-builds/certificates/ios/) - Tutorial dettagliato con screenshot
- [Blog: Build iOS Automatiche](https://capgo.app/blog/automatic-capacitor-ios-build-github-action/) - Configurazione CI/CD completa

**Android:**
- [Creazione di un Keystore](/docs/cli/cloud-build/android/#creating-a-keystore) - Guida passo-passo
- [Guida ai Certificati Android (Capawesome)](https://capawesome.io/cloud/native-builds/certificates/android/) - Tutorial dettagliato con screenshot
- [Blog: Build Android Automatiche](https://capgo.app/blog/automatic-capacitor-android-build-github-action/) - Configurazione CI/CD completa
</Aside>

<Aside type="caution" title="Garanzia di Sicurezza">
**Le tue credenziali NON vengono MAI archiviate permanentemente sui server Capgo:**
- âœ… Utilizzate SOLO durante il processo di build attivo
- âœ… Automaticamente eliminate dopo il completamento della build
- âœ… Conservazione massima: 24 ore (anche se la build fallisce)
- âœ… Le app vengono inviate direttamente all'App Store/Play Store - NON conserviamo NULLA
- âœ… Trasmesse in modo sicuro tramite HTTPS
</Aside>

## Comandi

### Salva Credenziali

Memorizza le tue credenziali di build localmente per l'uso automatico:

```bash
npx @capgo/cli build credentials save --platform <ios|android> [opzioni]
```

### Elenca Credenziali

Visualizza le credenziali attualmente salvate (le password sono mascherate):

```bash
npx @capgo/cli build credentials list
```

### Cancella Credenziali

Rimuovi le credenziali salvate dal tuo computer locale:

```bash
# Cancella tutte le credenziali
npx @capgo/cli build credentials clear

# Cancella solo le credenziali iOS
npx @capgo/cli build credentials clear --platform ios

# Cancella solo le credenziali Android
npx @capgo/cli build credentials clear --platform android
```

## Salvataggio delle Credenziali iOS

<Aside type="note">
**Non hai ancora i certificati iOS?** Consulta la [guida alle Build iOS](/docs/cli/cloud-build/ios/#how-to-get-ios-certificates-and-provisioning-profiles) per le istruzioni sulla creazione di certificati e profili di provisioning.
</Aside>

### Esempio Completo

```bash
npx @capgo/cli build credentials save \
  --platform ios \
  --certificate ./cert.p12 \
  --p12-password "YourP12Password" \
  --provisioning-profile ./profile.mobileprovision \
  --apple-key ./AuthKey_ABC1234567.p8 \
  --apple-key-id "ABC1234567" \
  --apple-issuer-id "00000000-0000-0000-0000-000000000000" \
  --apple-team-id "TEAM123456"
```

### Opzioni iOS

| Opzione | Descrizione | Richiesto |
|--------|-------------|----------|
| `--certificate <percorso>` | Percorso al file certificato .p12 | SÃ¬ (rilascio) |
| `--p12-password <password>` | Password per il certificato .p12 | SÃ¬ (rilascio) |
| `--provisioning-profile <percorso>` | Percorso al file .mobileprovision | SÃ¬ (rilascio) |
| `--provisioning-profile-prod <percorso>` | Profilo di provisioning produzione (opzionale) | No |
| `--apple-key <percorso>` | Percorso alla chiave API .p8 di App Store Connect | SÃ¬ (invio) |
| `--apple-key-id <id>` | ID Chiave API di App Store Connect | SÃ¬ (invio) |
| `--apple-issuer-id <id>` | ID Emittente API di App Store Connect (UUID) | SÃ¬ (invio) |
| `--apple-team-id <id>` | ID Team di App Store Connect | SÃ¬ (invio) |
| `--apple-id <email>` | Email Apple ID (autenticazione alternativa) | No |
| `--apple-app-password <password>` | Password specifica dell'app (autenticazione alternativa) | No |

### Cosa Viene Memorizzato

Quando salvi le credenziali iOS, il CLI:
1. Legge i file del certificato e del profilo di provisioning
2. Li converte in codifica base64
3. Salva le credenziali nella cartella `.capgo-credentials`
4. Memorizza password e ID come testo normale (solo file locali)

La struttura del file memorizzato:
```json
{
  "ios": {
    "BUILD_CERTIFICATE_BASE64": "...",
    "BUILD_PROVISION_PROFILE_BASE64": "...",
    "APPLE_KEY_CONTENT": "...",
    "P12_PASSWORD": "...",
    "APPLE_KEY_ID": "ABC1234567",
    "APPLE_ISSUER_ID": "...",
    "APP_STORE_CONNECT_TEAM_ID": "TEAM123456"
  }
}
```

## Salvataggio delle Credenziali Android

<Aside type="note">
**Non hai ancora un keystore?** Consulta la [guida alle Build Android](/docs/cli/cloud-build/android/#creating-a-keystore) per le istruzioni sulla creazione di un keystore e sulla configurazione delle credenziali del Play Store.
</Aside>

### Esempio Completo

```bash
npx @capgo/cli build credentials save \
  --platform android \
  --keystore ./release.keystore \
  --keystore-alias "my-key-alias" \
  --keystore-key-password "KeyPassword123" \
  --keystore-store-password "StorePassword123" \
  --play-config ./play-store-service-account.json
```

### Opzioni Android

| Opzione | Descrizione | Richiesto |
|--------|-------------|----------|
| `--keystore <percorso>` | Percorso al file .keystore o .jks | SÃ¬ (rilascio) |
| `--keystore-alias <alias>` | Alias della chiave nel keystore | SÃ¬ (rilascio) |
| `--keystore-key-password <password>` | Password per l'alias della chiave | SÃ¬ (rilascio) |
| `--keystore-store-password <password>` | Password per il keystore | SÃ¬ (rilascio) |
| `--play-config <percorso>` | Percorso al JSON dell'account servizio Play Store | SÃ¬ (invio) |

### Cosa Viene Memorizzato

Quando salvi le credenziali Android, il CLI:
1. Legge i file keystore e JSON dell'account servizio
2. Li converte in codifica base64
3. Salva le credenziali nella cartella `.capgo-credentials`
4. Memorizza password e alias come testo normale (solo file locali)

La struttura del file memorizzato:
```json
{
  "android": {
    "ANDROID_KEYSTORE_FILE": "...",
    "PLAY_CONFIG_JSON": "...",
    "KEYSTORE_KEY_ALIAS": "my-key-alias",
    "KEYSTORE_KEY_PASSWORD": "...",
    "KEYSTORE_STORE_PASSWORD": "..."
  }
}
}
```

## Utilizzo delle Credenziali Salvate

Una volta salvate le credenziali, vengono automaticamente utilizzate quando costruisci:

```bash
# Credenziali caricate automaticamente dalla cartella .capgo-credentials
npx @capgo/cli build com.example.app --platform ios
```

Puoi anche sovrascrivere le credenziali salvate usando variabili d'ambiente:

```bash
# Le variabili d'ambiente hanno la precedenza sulle credenziali salvate
BUILD_CERTIFICATE_BASE64="..." \
P12_PASSWORD="password-diversa" \
npx @capgo/cli build com.example.app --platform ios
```

**Ordine di precedenza:**
1. Variabili d'ambiente (prioritÃ  massima)
2. Credenziali salvate nella cartella `.capgo-credentials`
3. Nessuna credenziale (prioritÃ  minima)

## Visualizzazione delle Credenziali Salvate

Elenca quali credenziali hai salvato:

```bash
npx @capgo/cli build credentials list
```

Esempio di output:
```
ðŸ“‹ Credenziali di Build Salvate:

Credenziali iOS:
  âœ“ Certificato (base64)
  âœ“ Profilo di Provisioning (base64)
  âœ“ Contenuto Chiave Apple (base64)
  âœ“ Password P12: ********
  âœ“ ID Chiave Apple: ABC1234567
  âœ“ ID Emittente Apple: 00000000-0000-0000-0000-000000000000
  âœ“ ID Team: TEAM123456

Credenziali Android:
  âœ“ Keystore (base64)
  âœ“ Configurazione Play Store (base64)
  âœ“ Alias Keystore: my-key-alias
  âœ“ Password Chiave: ********
  âœ“ Password Store: ********

Posizione: .capgo-credentials/

ðŸ”’ Queste credenziali sono archiviate localmente solo sul tuo computer.
   Durante la build, vengono inviate a Capgo ma MAI archiviate.
   Vengono eliminate automaticamente dopo il completamento della build (max 24 ore).
```

## Migliori Pratiche di Sicurezza

### Sicurezza dell'Archiviazione Locale

1. **Autorizzazioni File**
   ```bash
   # Assicurati che la cartella delle credenziali non sia leggibile da altri
   chmod 700 .capgo-credentials
   chmod 600 .capgo-credentials/*
   ```

2. **Mai Eseguire il Commit delle Credenziali**
   ```bash
   # Aggiungi a .gitignore
   echo ".capgo-credentials/" >> .gitignore
   ```

3. **Separa le Credenziali**
   - Usa credenziali diverse per lo sviluppo locale rispetto a CI/CD
   - Ruota le credenziali regolarmente
   - Non condividere le credenziali tra i membri del team

### Utilizzo in CI/CD

Per ambienti CI/CD, **preferisci le variabili d'ambiente** rispetto alle credenziali salvate:

```yaml
# GitHub Actions
env:
  BUILD_CERTIFICATE_BASE64: ${{ secrets.IOS_CERTIFICATE }}
  P12_PASSWORD: ${{ secrets.P12_PASSWORD }}
  # ... altri segreti
```

Questo Ã¨ piÃ¹ sicuro perchÃ©:
- I segreti sono gestiti dalla tua piattaforma CI/CD
- Nessun file di credenziali sui runner
- Facile rotazione e controllo degli accessi
- Tracce di audit per l'uso dei segreti

### Rotazione delle Credenziali

Ruota regolarmente le tue credenziali:

1. **iOS**: Genera nuovi certificati e chiavi API annualmente
2. **Android**: Cambia le password del keystore annualmente
3. **Dopo cambiamenti del team**: Ruota quando i membri del team se ne vanno

Aggiorna le credenziali salvate:
```bash
# Riesegui il comando di salvataggio con nuove credenziali
npx @capgo/cli build credentials save --platform ios --certificate ./new-cert.p12 ...
```

## Risoluzione dei Problemi

### "Nessuna credenziale trovata"

Se la build dice che non sono state trovate credenziali:

1. **Verifica se le credenziali sono salvate**:
   ```bash
   npx @capgo/cli build credentials list
   ```

2. **Salva le credenziali se mancanti**:
   ```bash
   npx @capgo/cli build credentials save --platform ios ...
   ```

3. **Verifica che la cartella delle credenziali esista**:
   ```bash
   ls -la .capgo-credentials/
   ```

### "Permesso negato" durante la lettura delle credenziali

Correggi le autorizzazioni dei file:

```bash
chmod 700 .capgo-credentials
chmod 600 .capgo-credentials/*
```

### Le credenziali non vengono utilizzate

Verifica che la piattaforma corretta sia specificata:

```bash
# Assicurati che --platform corrisponda alle credenziali salvate
npx @capgo/cli build com.example.app --platform ios  # Usa credenziali ios
npx @capgo/cli build com.example.app --platform android  # Usa credenziali android
```

### Cancella e risalva le credenziali

Se le credenziali sembrano corrotte:

```bash
# Cancella tutte le credenziali
npx @capgo/cli build credentials clear

# Salva di nuovo
npx @capgo/cli build credentials save --platform ios ...
```

## Migrazione da Variabili d'Ambiente

Se attualmente stai usando variabili d'ambiente, puoi migrare alle credenziali salvate:

<Steps>

1. **Estrai le tue variabili d'ambiente attuali**
   ```bash
   echo $BUILD_CERTIFICATE_BASE64  # Verifica che esistano
   ```

2. **Decodifica i file base64 ai file originali** (se necessario)
   ```bash
   echo "$BUILD_CERTIFICATE_BASE64" | base64 -d > cert.p12
   echo "$BUILD_PROVISION_PROFILE_BASE64" | base64 -d > profile.mobileprovision
   ```

3. **Salva usando il CLI**
   ```bash
   npx @capgo/cli build credentials save \
     --platform ios \
     --certificate ./cert.p12 \
     --provisioning-profile ./profile.mobileprovision \
     --p12-password "$P12_PASSWORD" \
     --apple-key-id "$APPLE_KEY_ID" \
     --apple-issuer-id "$APPLE_ISSUER_ID" \
     --apple-team-id "$APP_STORE_CONNECT_TEAM_ID"
   ```

4. **Testa la build**
   ```bash
   npx @capgo/cli build com.example.app --platform ios
   ```

5. **Rimuovi le variabili d'ambiente** (opzionale)
   ```bash
   unset BUILD_CERTIFICATE_BASE64 BUILD_PROVISION_PROFILE_BASE64
   ```

</Steps>

## Posizione del File

Le credenziali sono archiviate nella cartella `.capgo-credentials`:
- **macOS/Linux**: `.capgo-credentials/` (nella radice del progetto o nella directory home)
- **Windows**: `.capgo-credentials\` (nella radice del progetto o nella directory home)

La cartella viene creata automaticamente quando salvi le credenziali per la prima volta.

## Prossimi Passi

- [Iniziare](/docs/cli/cloud-build/getting-started/) - Crea la tua prima build
- [Build iOS](/docs/cli/cloud-build/ios/) - Configurazione build specifica per iOS
- [Build Android](/docs/cli/cloud-build/android/) - Configurazione build specifica per Android
- [Risoluzione dei Problemi](/docs/cli/cloud-build/troubleshooting/) - Problemi comuni e soluzioni

## Serve Aiuto?

- ðŸ“š [Guida alla risoluzione dei problemi](/docs/cli/cloud-build/troubleshooting/)
- ðŸ’¬ [Community Discord](https://discord.com/invite/VnYRvBfgA6)
- ðŸ“§ Email: support@capgo.app
