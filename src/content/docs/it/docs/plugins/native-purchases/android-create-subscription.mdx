---
title: Crea Abbonamento Auto-Rinnovabile Android
description: Guida passo dopo passo per creare abbonamenti auto-rinnovabili in Google Play Console per il plugin native-purchases.
sidebar:
  order: 4
locale: it
---

import { Steps } from '@astrojs/starlight/components';

Gli abbonamenti auto-rinnovabili forniscono accesso a contenuti, servizi o funzionalità premium nella tua app su base continuativa. Questa guida ti aiuterà a creare e configurare abbonamenti in Google Play Console.

## Panoramica

Gli abbonamenti si rinnovano automaticamente alla fine di ogni periodo di fatturazione fino a quando l'utente non li annulla. Sono ideali per:
- Accesso ai contenuti Premium
- Esperienze senza annunci
- Archiviazione cloud
- Servizi continui

## Creazione di un Abbonamento

<Steps>

1. **Vai agli Abbonamenti**

   In Google Play Console, seleziona la tua app e scegli **Monetizzazione > Abbonamenti** dal menu a sinistra.

   Fai clic sul pulsante **Crea abbonamento** per iniziare.

   ![Vai agli abbonamenti](/native-purchases/android/create-subscription/navigate-to-subscriptions.webp)

2. **Inserisci Informazioni di Base**

   Fornisci un nome di abbonamento e un ID prodotto. L'ID del prodotto è richiesto per la configurazione nella tua app e non può essere modificato in seguito.

   ![Inserisci dettagli dell'abbonamento](/native-purchases/android/create-subscription/enter-subscription-details.webp)

3. **Crea Piano di Base**

   Google Play richiede esattamente un piano di base per abbonamento. Il plugin native-purchases supporta un solo piano di base per mantenere la compatibilità con iOS.

   Fai clic su **Aggiungi piano di base** per continuare.

   ![Crea piano di base](/native-purchases/android/create-subscription/create-base-plan.webp)

4. **Configura Dettagli Piano di Base**

   Inserisci:
   - **ID piano di base**: Identificatore univoco per questo piano
   - **Periodo di fatturazione**: Con che frequenza gli utenti vengono addebitati (settimanale, mensile, annuale, ecc.)
   - **Periodo di grazia**: Finestra temporale durante la quale Google mantiene l'abbonamento mentre riprova il pagamento prima dell'annullamento

   ![Configura piano di base](/native-purchases/android/create-subscription/configure-base-plan-details.webp)

5. **Imposta Prezzi**

   Accedi alla sezione dei prezzi e seleziona tutti i paesi/regioni in cui desideri offrire l'abbonamento.

   ![Seleziona regioni](/native-purchases/android/create-subscription/select-pricing-regions.webp)

6. **Configura Prezzo**

   Imposta il tuo prezzo di base nella tua valuta principale. Google Play lo converte automaticamente nelle valute locali.

   ![Imposta prezzo](/native-purchases/android/create-subscription/set-base-price.webp)

7. **Rivedi Prezzi Regionali**

   Rivedi i prezzi convertiti automaticamente per ogni paese. Puoi modificare i singoli prezzi se necessario.

   ![Rivedi prezzi](/native-purchases/android/create-subscription/review-regional-pricing.webp)

8. **Salva Configurazione**

   Salva la tua configurazione dei prezzi.

   ![Salva prezzi](/native-purchases/android/create-subscription/save-pricing-configuration.webp)

9. **Attiva Abbonamento**

   Fai clic sul pulsante **Attiva** per rendere il tuo prodotto di abbonamento attivo e disponibile per l'acquisto.

   ![Attiva abbonamento](/native-purchases/android/create-subscription/activate-subscription.webp)

</Steps>

## Considerazioni Importanti

### Limitazione Piano di Base

Il plugin native-purchases richiede esattamente un piano di base per abbonamento per garantire coerenza con la gestione degli abbonamenti iOS. Più piani di base non sono supportati.

### Periodo di Grazia

Il periodo di grazia consente a Google Play di riprovare i pagamenti non riusciti mantenendo l'accesso all'abbonamento dell'utente. I periodi di grazia comuni sono:
- 3 giorni per gli abbonamenti mensili
- 7 giorni per gli abbonamenti più lunghi

### Stato dell'Abbonamento

Dopo la creazione, il tuo abbonamento avrà lo stato "Bozza" fino all'attivazione. Puoi testare gli abbonamenti in bozza in modalità sandbox.

## Utilizzo nella Tua App

Una volta creato, fai riferimento all'abbonamento nella tua app utilizzando l'ID del prodotto:

```typescript
import { NativePurchases, PURCHASE_TYPE } from '@capgo/native-purchases';

// Carica informazioni sull'abbonamento
const { products } = await NativePurchases.getProducts({
  productIdentifiers: ['com.example.premium.monthly'],
  productType: PURCHASE_TYPE.SUBS,
});

const product = products[0];
console.log(`${product.title} — ${product.priceString}`);

// Acquista (planIdentifier = ID Piano di Base da Google Play Console)
const transaction = await NativePurchases.purchaseProduct({
  productIdentifier: 'com.example.premium.monthly',
  planIdentifier: 'monthly-plan', // RICHIESTO su Android, ignorato su iOS
  productType: PURCHASE_TYPE.SUBS,
});

console.log('ID Transazione', transaction.transactionId);

// Successivamente, controlla lo stato dell'acquisto
const { purchases } = await NativePurchases.getPurchases({
  productType: PURCHASE_TYPE.SUBS,
});

const subscription = purchases.find(
  (purchase) => purchase.productIdentifier === 'com.example.premium.monthly',
);

if (subscription && subscription.purchaseState === 'PURCHASED' && subscription.isAcknowledged) {
  console.log('Abbonamento attivo localmente');
  // Per la scadenza/annullamento, convalida purchaseToken tramite il tuo backend
}
```

## Prossimi Passi

- [Crea un'offerta introduttiva](/docs/plugins/native-purchases/android-introductory-offer/) per attirare nuovi abbonati
- [Configura test sandbox](/docs/plugins/native-purchases/android-sandbox-testing/) per testare i tuoi abbonamenti
- Configura la convalida della ricevuta del backend per la sicurezza

## Risoluzione dei Problemi

**L'abbonamento non appare nell'app:**
- Verifica che l'ID del prodotto corrisponda esattamente
- Assicurati che l'abbonamento sia attivato
- Controlla che la tua app abbia il nome del pacchetto corretto
- Attendi 2-3 ore dopo l'attivazione affinché le modifiche si propaghino

**Errori del piano di base:**
- Assicurati di avere esattamente un piano di base
- Verifica che tutti i campi obbligatori siano compilati
- Controlla che il periodo di fatturazione sia valido

**Problemi di prezzi:**
- Conferma che almeno un paese sia selezionato
- Verifica che il prezzo di base sia maggiore del minimo consentito
- Controlla che i tassi di conversione della valuta siano accettabili
