---
title: "@capgo/capacitor-android-usagestatsmanager"
description: Plugin de statistiques d'utilisation Android pour les applications Capacitor avec suivi d'utilisation des applications, surveillance du temps d'√©cran et analyses d'utilisation.
locale: fr
tableOfContents: false
next: false
prev: false
sidebar:
  order: 1
  label: "Introduction"
hero:
  tagline: Acc√©dez aux statistiques d'utilisation Android pour surveiller l'utilisation des applications, le temps d'√©cran et les analyses de comportement des utilisateurs avec des donn√©es au niveau du syst√®me.
  image:
    file: ~public/icons/plugins/android-usagestatsmanager.svg
  actions:
    - text: Commencer
      link: /docs/plugins/android-usagestatsmanager/getting-started/
      icon: right-arrow
      variant: primary
    - text: Github
      link: https://github.com/Cap-go/capacitor-android-usagestatsmanager/
      icon: external
      variant: minimal
---

import { Card, CardGrid } from '@astrojs/starlight/components';

## Aper√ßu

Le plugin Capacitor Android Usage Stats Manager expose le SDK UsageStatsManager d'Android aux applications Capacitor, permettant l'acc√®s √† des statistiques d'utilisation d√©taill√©es des applications et aux donn√©es d'utilisation de l'appareil. Ce plugin permet aux d√©veloppeurs de suivre les mod√®les d'utilisation des applications, le temps d'√©cran et les analyses de comportement des utilisateurs sur les appareils Android.

<CardGrid stagger>
  <Card title="Statistiques d'utilisation" icon="rocket">
    Acc√©der aux donn√©es du SDK UsageStatsManager Android üì±
  </Card>
  <Card title="Surveillance des applications" icon="moon">
    Suivre le temps d'utilisation et la fr√©quence des applications individuelles üïê
  </Card>
  <Card title="Gestion des permissions" icon="approve-check">
    G√©rer les permissions de statistiques d'utilisation de mani√®re transparente üõ°Ô∏è
  </Card>
  <Card title="Informations sur les packages" icon="puzzle">
    Interroger les d√©tails et m√©tadonn√©es des packages install√©s üì¶
  </Card>
</CardGrid>

## Installation

```bash
npm install @capgo/capacitor-android-usagestatsmanager
npx cap sync
```

## Permissions requises

Ajoutez ces permissions √† votre `android/app/src/main/AndroidManifest.xml` :

```xml
<uses-permission android:name="android.permission.PACKAGE_USAGE_STATS" />
<uses-permission android:name="android.permission.QUERY_ALL_PACKAGES" />
```

## M√©thodes API principales

### Statistiques d'utilisation
- `queryAndAggregateUsageStats(options)` - R√©cup√©rer des statistiques d'utilisation d√©taill√©es pour les applications install√©es
- `isUsageStatsPermissionGranted()` - V√©rifier si la permission de statistiques d'utilisation est accord√©e
- `openUsageStatsSettings()` - Ouvrir les param√®tres syst√®me pour la permission de statistiques d'utilisation

### Informations sur les packages
- `queryAllPackages()` - Obtenir des informations sur tous les packages install√©s

## Exemple d'utilisation

```typescript
import { AndroidUsageStatsManager } from '@capgo/capacitor-android-usagestatsmanager';

// Check if permission is granted
const permissionResult = await AndroidUsageStatsManager.isUsageStatsPermissionGranted();
if (!permissionResult.granted) {
  // Open settings to grant permission
  await AndroidUsageStatsManager.openUsageStatsSettings();
  return;
}

// Query usage statistics
const statsOptions = {
  intervalType: 0, // INTERVAL_DAILY
  startTime: Date.now() - (7 * 24 * 60 * 60 * 1000), // 7 days ago
  endTime: Date.now()
};

const usageStats = await AndroidUsageStatsManager.queryAndAggregateUsageStats(statsOptions);
console.log('Usage statistics:', usageStats);

// Get all installed packages
const packages = await AndroidUsageStatsManager.queryAllPackages();
console.log('Installed packages:', packages);
```

## Gestion des permissions

Le plugin n√©cessite des permissions sp√©ciales qui ne peuvent pas √™tre accord√©es via des demandes de permission d'ex√©cution normales :

1. **PACKAGE_USAGE_STATS** : Permet d'acc√©der aux statistiques d'utilisation
2. **QUERY_ALL_PACKAGES** : Requis pour les informations de package (Android 11+)

Les utilisateurs doivent accorder manuellement ces permissions via les param√®tres syst√®me. Utilisez `openUsageStatsSettings()` pour diriger les utilisateurs vers la page de param√®tres appropri√©e.

## Types de donn√©es

### Statistiques d'utilisation
- Temps d'utilisation et fr√©quence de l'application
- Premi√®re et derni√®re fois utilis√©e
- Temps total au premier plan
- Nombre de lancements

### Informations sur les packages
- Nom et version du package
- Heure d'installation
- Libell√©s et ic√¥nes d'application
- Applications syst√®me vs utilisateur

## Cas d'utilisation

- **Applications de bien-√™tre num√©rique** : Surveiller le temps d'√©cran et l'utilisation des applications
- **Contr√¥les parentaux** : Suivre l'utilisation de l'appareil des enfants
- **Applications de productivit√©** : Analyser les habitudes de travail et le temps de concentration
- **Analyses** : Comprendre le comportement des utilisateurs et l'engagement dans les applications

## Compatibilit√© Android

- **Version Android minimale** : Niveau API 21 (Android 5.0)
- **Fonctionnalit√©s avanc√©es** : Niveau API 29+ (Android 10+) pour des statistiques am√©lior√©es
- **Requ√™tes de packages** : Niveau API 30+ (Android 11+) n√©cessite QUERY_ALL_PACKAGES

## Consid√©rations de s√©curit√©

- La permission de statistiques d'utilisation est sensible et n√©cessite le consentement de l'utilisateur
- Tenez compte de la vie priv√©e de l'utilisateur lors de la collecte de donn√©es d'utilisation
- Impl√©mentez des pratiques appropri√©es de gestion et de stockage des donn√©es
- Suivez les politiques de Google Play pour la collecte de donn√©es d'utilisation

## Documentation

Consultez la [documentation compl√®te](/docs/plugins/android-usagestatsmanager/getting-started/) pour des guides d'impl√©mentation d√©taill√©s et des mod√®les d'utilisation avanc√©s.
