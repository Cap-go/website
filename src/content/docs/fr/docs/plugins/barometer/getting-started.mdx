---
title: "Premiers pas avec Barometer"
locale: fr
description: "Apprenez à intégrer la détection de pression barométrique dans votre application Capacitor"
---

Ce guide vous accompagnera dans l'intégration du plugin Capacitor Barometer dans votre application.

## Installation

Installez le plugin en utilisant npm :

```bash
npm install @capgo/capacitor-barometer
npx cap sync
```

## Configuration iOS

Ajoutez ce qui suit à votre `Info.plist` :

```xml
<key>NSMotionUsageDescription</key>
<string>Cette application utilise le baromètre pour mesurer la pression atmosphérique</string>
```

## Configuration Android

Aucune configuration supplémentaire requise. Le plugin demande automatiquement les autorisations nécessaires.

## Utilisation de base

### Importer le plugin

```typescript
import { Barometer } from '@capgo/capacitor-barometer';
```

### Vérifier la disponibilité du capteur

```typescript
const checkBarometer = async () => {
  const { available } = await Barometer.isAvailable();
  console.log('Baromètre disponible:', available);
};
```

### Démarrer la surveillance de la pression

```typescript
const startMonitoring = async () => {
  await Barometer.start({
    interval: 1000 // Intervalle de mise à jour en millisecondes
  });

  console.log('Surveillance du baromètre démarrée');
};
```

### Écouter les événements de pression

```typescript
Barometer.addListener('pressureChange', (data) => {
  console.log('Pression (hPa):', data.pressure);
  console.log('Altitude relative (m):', data.relativeAltitude);
  console.log('Horodatage:', data.timestamp);
});
```

### Obtenir la lecture actuelle

```typescript
const getCurrentPressure = async () => {
  const reading = await Barometer.getCurrentReading();
  console.log('Pression actuelle:', reading.pressure, 'hPa');
  console.log('Altitude relative:', reading.relativeAltitude, 'm');
};
```

### Arrêter la surveillance

```typescript
const stopMonitoring = async () => {
  await Barometer.stop();
  console.log('Surveillance du baromètre arrêtée');
};
```

## Exemple complet

Voici un exemple complet montrant l'intégration du baromètre :

```typescript
import { Barometer } from '@capgo/capacitor-barometer';

class BarometerService {
  private listener: any;

  async initialize() {
    // Vérifier la disponibilité
    const { available } = await Barometer.isAvailable();
    if (!available) {
      console.error('Baromètre non disponible sur cet appareil');
      return;
    }

    // Démarrer la surveillance
    await Barometer.start({ interval: 1000 });

    // Ajouter un écouteur
    this.listener = Barometer.addListener('pressureChange', (data) => {
      this.handlePressureChange(data);
    });
  }

  handlePressureChange(data: any) {
    console.log('Pression:', data.pressure, 'hPa');
    console.log('Altitude:', data.relativeAltitude, 'm');

    // Mettre à jour l'UI ou traiter les données
    this.updateDisplay(data);
  }

  updateDisplay(data: any) {
    // Convertir hPa en d'autres unités
    const inHg = (data.pressure * 0.02953).toFixed(2);
    const mmHg = (data.pressure * 0.750062).toFixed(1);

    console.log(`Pression: ${data.pressure.toFixed(1)} hPa`);
    console.log(`          ${inHg} inHg`);
    console.log(`          ${mmHg} mmHg`);
    console.log(`Altitude: ${data.relativeAltitude.toFixed(1)} m`);
  }

  async cleanup() {
    // Supprimer l'écouteur
    if (this.listener) {
      this.listener.remove();
    }

    // Arrêter la surveillance
    await Barometer.stop();
  }
}

// Utilisation
const barometerService = new BarometerService();
barometerService.initialize();

// Nettoyage lorsque terminé
// barometerService.cleanup();
```

## Comprendre les lectures

### Pression atmosphérique
- Mesurée en hectopascals (hPa) ou millibars (mb)
- Pression standard au niveau de la mer : 1013.25 hPa
- Altitude plus élevée = pression plus basse
- Les systèmes météorologiques affectent les lectures de pression

### Altitude relative
- Calculée à partir des changements de pression
- Relative au point de référence de départ
- Précision : ±10-30 mètres
- Fonctionne mieux pour le suivi à court terme

## Meilleures pratiques

1. **Vérifier la disponibilité** : Vérifiez toujours la disponibilité du capteur avant utilisation
2. **Intervalles raisonnables** : Ne sondez pas trop fréquemment (1000ms est bien)
3. **Supprimer les écouteurs** : Nettoyez les écouteurs lorsqu'ils ne sont pas nécessaires
4. **Étalonnage** : Utilisez une altitude connue pour des lectures précises
5. **Impact sur la batterie** : Surveillez l'utilisation de la batterie avec la détection continue

## Problèmes courants

### Capteur non disponible
```typescript
try {
  const { available } = await Barometer.isAvailable();
  if (!available) {
    // Solution de secours vers l'altitude GPS ou saisie manuelle
    showAlternativeMethod();
  }
} catch (error) {
  console.error('Échec de la vérification du baromètre:', error);
}
```

### Données bruitées
```typescript
class PressureFilter {
  private readings: number[] = [];
  private maxReadings = 5;

  addReading(pressure: number): number {
    this.readings.push(pressure);
    if (this.readings.length > this.maxReadings) {
      this.readings.shift();
    }

    // Retourner la moyenne mobile
    const sum = this.readings.reduce((a, b) => a + b, 0);
    return sum / this.readings.length;
  }
}
```

## Prochaines étapes

- Explorez la [Référence API](https://github.com/Cap-go/capacitor-barometer#api) pour la documentation complète des méthodes
- Consultez l'[application exemple](https://github.com/Cap-go/capacitor-barometer/tree/main/example) pour une utilisation avancée
- Voir le [tutoriel](/plugins-tutorials/capacitor-barometer) pour des exemples d'implémentation complets
