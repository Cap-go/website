---
title: "Mise à jour manuelle"
locale: fr
description: "Un guide détaillé sur l'utilisation du plugin de mise à jour manuelle dans un environnement auto-hébergé, fournissant des instructions complètes sur la configuration et l'utilisation pour gérer efficacement les mises à jour sans s'appuyer sur des processus automatiques."
sidebar:
  order: 3
---

## Configuration

Ajoutez ceci à votre ``capacitor.config.json``, pour désactiver la mise à jour automatique.
```tsx
// capacitor.config.json
{
	"appId": "**.***.**",
	"appName": "Name",
	"plugins": {
		"CapacitorUpdater": {
			"autoUpdate": false,
		}
	}
}
```

## Utilisation

Vous pouvez utiliser cet exemple ou recréer la logique dans votre application.

:::caution
Nous forçons l'utilisateur à mettre à jour l'application avec une version statique déclarée dans le code. Ce n'est pas recommandé, vous devriez utiliser une version dynamique depuis votre serveur.
:::

:::danger
Nous ne faisons aucune vérification de version, déchiffrement ou validation de checksum dans cet exemple. Vous devriez le faire vous-même.
:::

```tsx
import { CapacitorUpdater } from '@capgo/capacitor-updater'
import { SplashScreen } from '@capacitor/splash-screen'
import { App } from '@capacitor/app'
let data = {version: ""}
CapacitorUpdater.notifyAppReady()
App.addListener('appStateChange', async(state) => {
     if (state.isActive) {
       // Faites le téléchargement pendant le temps d'activité de l'utilisateur pour éviter les échecs de téléchargement
       data = await CapacitorUpdater.download({
       version: '0.0.4',
       url: 'https://github.com/Cap-go/demo-app/releases/download/0.0.4/dist.zip',
       })
     }
     if (!state.isActive && data.version !== "") {
       // Faites le changement quand l'utilisateur quitte l'app
       SplashScreen.show()
       try {
         await CapacitorUpdater.set(data)
       } catch (err) {
         console.log(err)
         SplashScreen.hide() // au cas où le set échoue, sinon la nouvelle app devra le cacher
       }
     }
 })
```



:::note
Si cela vous semble beaucoup de travail, envisagez d'essayer la [version d'essai de Capgo](https://capgo.app/register/). Elle gérera tout cela pour vous.
:::
