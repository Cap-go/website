---
title: "Utilisation du capacitor updater avec capgo auto-hébergé"
locale: fr
description: "Comment utiliser le capacitor updater avec Capgo auto-hébergé, soyez totalement autonome avec votre propre instance de Capgo"
sidebar:
    order: 4
---

## Que couvrira ce tutoriel ?

Ce tutoriel montrera comment utiliser capacitor updater dans un environnement de développement avec capgo auto-hébergé

## Prérequis

 1. [Capgo cloné](https://github.com/Cap-go/capgo)

## Démarrage

Pour utiliser le capacitor updater avec capgo auto-hébergé, éditez le `capacitor.config.ts` depuis le répertoire de votre application et configurez-le comme ceci :

```ts
const config: CapacitorConfig = {
  appId: 'com.demo.app',
  appName: 'demoApp',
  webDir: 'dist',
  bundledWebRuntime: false,
  plugins: {
    CapacitorUpdater : {
      statsUrl: "https://localhost:54321/functions/v1/stats",
      channelUrl: "https://localhost:54321/functions/v1/channel_self",
      updateUrl: "https://localhost:54321/functions/v1/updates"
    },
  },
};
```

Cela vous permettra d'utiliser capgo local en développement. Cependant, par défaut, ce n'est pas suffisant.

> Par défaut, iOS et Android attendent que vous utilisiez HTTPS, vous devez utiliser un outil comme Ngrock ou localcan pour proxifier votre API en https.

Il existe un moyen sous Android d'activer [la communication en texte clair](https://developer.android.com/topic/security/risks/cleartext).
Cela peut être réalisé en modifiant [AndroidManifest.xml](https://github.com/Cap-go/capacitor-updater/blob/main/android/src/main/AndroidManifest.xml) et en ajoutant `android:usesCleartextTraffic="true"` dans la balise `application`
Un exemple complet de cette modification peut être vu [ici](https://gist.github.com/WcaleNieWolny/061a015acdebe35eaf3afd7030797701)

Il pourrait également y avoir un problème qui empêche l'application Android de se connecter. Si vous ne voyez aucune requête envoyée aux edge functions, exécutez
```bash
adb reverse tcp:54321 tcp:54321
```
