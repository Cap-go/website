---
title: Getting Started
locale: fr
description: Apprenez comment détecter les pressions des boutons de volume dans votre application Capacitor.
sidebar:
  order: 2
---

import { Steps } from '@astrojs/starlight/components';
import { PackageManagers } from 'starlight-package-managers'

<Steps>
1. **Installer le package**
   <PackageManagers pkg="@capgo/capacitor-volume-buttons" pkgManagers={['npm', 'pnpm', 'yarn', 'bun']} />

2. **Synchroniser avec les projets natifs**
   <PackageManagers type="exec" pkg="cap" args="sync" pkgManagers={['npm', 'pnpm', 'yarn', 'bun']} />
</Steps>

## Utilisation

```typescript
import { VolumeButtons } from '@capgo/capacitor-volume-buttons';

// Listen for volume button presses
VolumeButtons.addListener('volumeButtonPressed', (event) => {
  console.log('Volume button pressed:', event.direction);

  if (event.direction === 'up') {
    console.log('Volume up pressed');
    // Handle volume up
  } else if (event.direction === 'down') {
    console.log('Volume down pressed');
    // Handle volume down
  }
});

// Remove all listeners when done
await VolumeButtons.removeAllListeners();
```

## Référence de l'API

### addListener('volumeButtonPressed', callback)

Écoutez les événements de pression des boutons de volume.

```typescript
const handle = VolumeButtons.addListener('volumeButtonPressed', (event) => {
  console.log('Direction:', event.direction); // 'up' or 'down'
});

// Remove specific listener
await handle.remove();
```

**Données de l'événement :**
- `direction`: `'up' | 'down'` - Direction de la pression du bouton

### removeAllListeners()

Supprimez tous les écouteurs enregistrés.

```typescript
await VolumeButtons.removeAllListeners();
```

### getPluginVersion()

Obtenez la version du plugin.

```typescript
const { version } = await VolumeButtons.getPluginVersion();
console.log('Plugin version:', version);
```

## Exemple complet

```typescript
import { VolumeButtons } from '@capgo/capacitor-volume-buttons';

export class VolumeButtonController {
  private listener: any;

  async initialize() {
    this.listener = VolumeButtons.addListener(
      'volumeButtonPressed',
      this.handleVolumeButton.bind(this)
    );

    console.log('Volume button listener initialized');
  }

  private handleVolumeButton(event: { direction: 'up' | 'down' }) {
    switch (event.direction) {
      case 'up':
        this.handleVolumeUp();
        break;
      case 'down':
        this.handleVolumeDown();
        break;
    }
  }

  private handleVolumeUp() {
    console.log('Volume up pressed');
    // Your custom logic for volume up
    // e.g., navigate forward, increase brightness, etc.
  }

  private handleVolumeDown() {
    console.log('Volume down pressed');
    // Your custom logic for volume down
    // e.g., navigate backward, decrease brightness, etc.
  }

  async cleanup() {
    if (this.listener) {
      await this.listener.remove();
    }
    await VolumeButtons.removeAllListeners();
    console.log('Volume button listener cleaned up');
  }
}
```

## Cas d'utilisation

### Capture photo/vidéo

Utilisez les boutons de volume comme déclencheurs d'obturateur de caméra :

```typescript
VolumeButtons.addListener('volumeButtonPressed', async (event) => {
  // Any volume button triggers camera
  await capturePhoto();
});
```

### Navigation de page

Naviguez dans le contenu avec les boutons de volume :

```typescript
let currentPage = 0;

VolumeButtons.addListener('volumeButtonPressed', (event) => {
  if (event.direction === 'up') {
    currentPage++;
    showPage(currentPage);
  } else {
    currentPage = Math.max(0, currentPage - 1);
    showPage(currentPage);
  }
});
```

### Contrôle multimédia

Contrôlez la lecture multimédia :

```typescript
VolumeButtons.addListener('volumeButtonPressed', (event) => {
  if (event.direction === 'up') {
    skipForward();
  } else {
    skipBackward();
  }
});
```

### Contrôles de jeu

Utilisez les boutons de volume pour les actions de jeu :

```typescript
VolumeButtons.addListener('volumeButtonPressed', (event) => {
  if (event.direction === 'up') {
    player.jump();
  } else {
    player.crouch();
  }
});
```

## Bonnes pratiques

1. **Nettoyer les écouteurs**
   Supprimez toujours les écouteurs lorsque votre composant se démonte :
   ```typescript
   useEffect(() => {
     const listener = VolumeButtons.addListener('volumeButtonPressed', handler);

     return () => {
       listener.remove();
     };
   }, []);
   ```

2. **Fournir un retour visuel**
   Montrez aux utilisateurs que les boutons de volume sont utilisés pour des contrôles personnalisés :
   ```typescript
   VolumeButtons.addListener('volumeButtonPressed', (event) => {
     showNotification(`Volume ${event.direction} pressed`);
     performAction(event.direction);
   });
   ```

3. **Considérer l'accessibilité**
   N'oubliez pas que certains utilisateurs comptent sur les boutons de volume pour le contrôle réel du volume. Fournissez des contrôles alternatifs.

4. **Débouncer les pressions rapides**
   Empêchez les doubles pressions accidentelles :
   ```typescript
   let lastPress = 0;
   const DEBOUNCE_MS = 300;

   VolumeButtons.addListener('volumeButtonPressed', (event) => {
     const now = Date.now();
     if (now - lastPress < DEBOUNCE_MS) {
       return; // Ignore rapid presses
     }
     lastPress = now;
     handlePress(event.direction);
   });
   ```

5. **Documenter le comportement**
   Indiquez clairement aux utilisateurs que les boutons de volume ont une fonctionnalité personnalisée :
   ```typescript
   function showVolumeButtonHelp() {
     alert('Use Volume Up/Down buttons to navigate pages');
   }
   ```

## Notes de plateforme

### iOS
- Fonctionne sur iOS 10.0+
- Boutons de volume détectés de manière fiable
- L'interface utilisateur du volume système peut encore apparaître brièvement

### Android
- Fonctionne sur Android 5.0 (API 21)+
- Nécessite que l'application soit au premier plan
- Certains appareils peuvent avoir un léger délai

### Web
- Non pris en charge sur la plateforme web
- Les écouteurs ne se déclencheront pas

## Dépannage

**Les événements ne se déclenchent pas :**
- Assurez-vous que l'application a le focus
- Vérifiez que les écouteurs sont correctement enregistrés
- Vérifiez que le plugin est installé et synchronisé

**Les changements de volume système interfèrent :**
- C'est un comportement attendu - le plugin détecte les pressions mais n'empêche pas les changements de volume système
- Considérez une UX qui fonctionne parallèlement aux changements de volume

**Plusieurs événements se déclenchent :**
- Implémentez le debouncing pour gérer les pressions rapides
- Vérifiez l'absence d'enregistrement d'écouteurs en double
