---
locale: fr
title: GitHub Actions Integration
description: "Learn how to integrate Capgo Mises √† jour en direct with GitHub Actions for automated D√©ploiement of your Application Mises √† jour."
sidebar: 
  order: 3
---

import { Aside, Steps } from '@astrojs/starlight/components';

Integrate Capgo Mises √† jour en direct with GitHub Actions to automatically D√©ployer your Application Mises √† jour whenever you Pousser code changes. This Guide covers setting up automated builds, Test, and D√©ploiement workflows using GitHub's powerful CI/CD platform.

## Prerequisites

Before setting up GitHub Actions integration, ensure you have:

- A GitHub repository with your Application's source code
- A Capgo Compte with an Application configured
- Node.js and npm/yarn configured in your project
- GitHub Actions enabled for your repository

## Setting Up GitHub Secrets

### Step 1: Configure Repository Secrets

Set up the necessary secrets in your GitHub repository:

<Steps>

1. Navigate to your GitHub repository
2. Go to **Param√®tres** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. Click **Nouveau repository secret** and Ajouter the following:

</Steps>

| Secret Name | Value |
|-------------|-------|
| `CAPGO_TOKEN` | Your Capgo API token |

<Aside type="tip">

Get your Capgo API token from [console.capgo.app/apikeys](https://console.capgo.app/apikeys). Your app ID is already configured in your `capacitor.config.ts` file.

</Aside>

## Simple Production D√©ploiement

D√©marrer with this basic Configuration that deploys to Production on every Pousser to the main branch:

```yaml
# Simple GitHub Actions Workflow for Capgo Live Updates
name: Deploy to Capgo

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Setup Node.js
        uses: actions/setup-node@v6
        with:
          node-version: '24'
          cache: 'npm'

      - name: Install, test and build
        run: |
          npm ci
          npm run test
          npm run build

             - name: Deploy to Capgo
         run: |
           npm install -g @capgo/cli
           npx @capgo/cli bundle upload --apikey ${{ secrets.CAPGO_TOKEN }} --channel production
           # For encrypted uploads, add: --key-data-v2 "${{ secrets.CAPGO_PRIVATE_KEY }}"
```

## Advanced Multi-Canal Configuration

### Fonctionnalit√© Branch Deployments

D√©ployer Fonctionnalit√© branches to temporary Canaux for Test:

```yaml
# Feature branch deployment
name: Deploy Feature Branch to Capgo

on:
  push:
    branches:
      - 'feature/**'

jobs:
  deploy-feature:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
      - uses: actions/setup-node@v6
        with:
          node-version: '24'
          cache: 'npm'
      
      - run: |
          npm ci
          npm run test
          npm run build
      
      - name: Deploy to feature channel
        run: |
          CHANNEL_NAME=$(echo "${{ github.ref_name }}" | sed 's/[^a-zA-Z0-9]/-/g' | tr '[:upper:]' '[:lower:]')
          npm install -g @capgo/cli
          npx @capgo/cli channel create $CHANNEL_NAME --apikey ${{ secrets.CAPGO_TOKEN }} || true
                     npx @capgo/cli bundle upload --apikey ${{ secrets.CAPGO_TOKEN }} --channel $CHANNEL_NAME
```

### Using Chiffrement

If you're using [Capgo's Chiffrement Fonctionnalit√©](/docs/live-Mises √† jour/Chiffrement/), you'll need to store your private key securely in your CI/CD environment.

After [setting up Chiffrement keys](/docs/live-Mises √† jour/Chiffrement/#setting-up-Chiffrement) locally, Ajouter your private key to GitHub secrets:

```shell
# Display your private key content (copy this output)
cat .capgo_key_v2
```

Add this content as `CAPGO_PRIVATE_KEY` in your GitHub repository secrets, then use it in workflows:

```yaml
# Deploy with encryption
- name: Deploy to Capgo with Encryption
  run: |
    npm install -g @capgo/cli
    npx @capgo/cli bundle upload --apikey ${{ secrets.CAPGO_TOKEN }} --key-data-v2 "${{ secrets.CAPGO_PRIVATE_KEY }}" --channel production
```

<Aside type="caution">

**Security Best Practices:**
- Never commit the `.capgo_key_v2` file to version control
- Store the private key only in secure CI/CD secret management
- Use different keys for different environments

</Aside>

### Multi-Canal Configuration

For comprehensive Information √Ä propos setting up and managing multiple D√©ploiement Canaux, see the [Canaux Documentation](/docs/live-Mises √† jour/Canaux/).

Termin√© workflow with D√©veloppement, Tirer requests, and Production deployments:

```yaml
# Complete multi-environment workflow
name: Deploy to Capgo

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
      - uses: actions/setup-node@v6
        with:
          node-version: '24'
          cache: 'npm'
      
      - run: |
          npm ci
          npm run test
          npm run build
      
      - uses: actions/upload-artifact@v4
        with:
          name: dist
          path: dist/

  deploy-development:
    if: github.ref == 'refs/heads/develop'
    needs: build
    runs-on: ubuntu-latest
    environment: development
    steps:
      - uses: actions/setup-node@v6
        with:
          node-version: '24'
      
      - uses: actions/download-artifact@v4
        with:
          name: dist
          path: dist/
      
      - run: |
          npm install -g @capgo/cli
          npx @capgo/cli bundle upload --apikey ${{ secrets.CAPGO_TOKEN }} --channel development

  deploy-pr:
    if: github.event_name == 'pull_request'
    needs: build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/setup-node@v6
        with:
          node-version: '24'
      
      - uses: actions/download-artifact@v4
        with:
          name: dist
          path: dist/
      
      - name: Deploy to PR channel
        run: |
          CHANNEL_NAME="pr-${{ github.event.number }}"
          npm install -g @capgo/cli
          npx @capgo/cli channel create $CHANNEL_NAME --apikey ${{ secrets.CAPGO_TOKEN }} || true
          npx @capgo/cli bundle upload --apikey ${{ secrets.CAPGO_TOKEN }} --channel $CHANNEL_NAME

      - name: Comment PR
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `üöÄ This PR has been deployed to Capgo channel: \`pr-${{ github.event.number }}\`\n\nTo test this update in your app, configure it to use this channel. [Learn how to configure channels ‚Üí](/docs/live-updates/channels/#configuring-the-channel-in-your-app)`
            })

  deploy-production:
    if: github.ref == 'refs/heads/main'
    needs: build
    runs-on: ubuntu-latest
    environment: production
    steps:
      - uses: actions/setup-node@v6
        with:
          node-version: '24'
      
      - uses: actions/download-artifact@v4
        with:
          name: dist
          path: dist/
      
      - run: |
          npm install -g @capgo/cli
          npx @capgo/cli bundle upload --apikey ${{ secrets.CAPGO_TOKEN }} --channel production
```

<Aside type="tip">

**Testing with Channels**: After deploying to a PR or development channel, you can test the update in your app by configuring it to use that specific channel. Learn more about [configuring channels in your app](/docs/live-updates/channels/#configuring-the-channel-in-your-app).

</Aside>

### Cleanup Fonctionnalit√© Canaux

Automatically clean up Fonctionnalit√© Canaux when branches are deleted:

```yaml
name: Cleanup Feature Channels

on:
  delete:

jobs:
  cleanup:
    runs-on: ubuntu-latest
    if: github.event.ref_type == 'branch' && startsWith(github.event.ref, 'feature/')
    steps:
      - uses: actions/setup-node@v6
        with:
          node-version: '24'

      - name: Delete Capgo channel
        run: |
          CHANNEL_NAME=$(echo "${{ github.event.ref }}" | sed 's/[^a-zA-Z0-9]/-/g' | tr '[:upper:]' '[:lower:]')
          npm install -g @capgo/cli
          npx @capgo/cli channel delete $CHANNEL_NAME --apikey ${{ secrets.CAPGO_TOKEN }} || true
```

## S√©curit√© and Best Practices

### Environment Protection Rules

Set up environment protection rules in GitHub:

<Steps>

1. Go to **Param√®tres** ‚Üí **Environments** in your repository
2. Create environments: `development`, `staging`, `production`
3. For Production environment, Ajouter:
   - **Required reviewers**: Ajouter team Membres who must approve deployments
   - **Wait timer**: Ajouter a delay before D√©ploiement (optional)
   - **Deployment branches**: Restrict to `main` branch only

</Steps>

### Secure Secrets Management

Use environment-specific secrets:

```yaml
# Use different secrets per environment
deploy-production:
  environment: production
  steps:
    - name: Deploy to Production
      run: |
        npx @capgo/cli bundle upload \
          --apikey ${{ secrets.CAPGO_PROD_TOKEN }} \
          --app ${{ secrets.CAPGO_PROD_APP_ID }} \
          --channel production
```

## Monitoring and Notifications

### Slack Integration

Ajouter Slack notifications to your workflow:

```yaml
name: Deploy with Notifications

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # ... deployment steps

      - name: Notify Slack on Success
        if: success()
        uses: 8398a7/action-slack@v3
        with:
          status: success
          text: '‚úÖ Capgo deployment successful!'
          fields: repo,message,commit,author,action,eventName,ref,workflow
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Notify Slack on Failure
        if: failure()
        uses: 8398a7/action-slack@v3
        with:
          status: failure
          text: '‚ùå Capgo deployment failed!'
          fields: repo,message,commit,author,action,eventName,ref,workflow
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
```

### Discord Integration

Send notifications to Discord:

```yaml
- name: Discord notification
  if: always()
  uses: Ilshidur/action-discord@master
  with:
    args: |
      Capgo deployment ${{ job.status }}!
      App: ${{ secrets.CAPGO_APP_ID }}
      Channel: ${{ github.ref_name }}
      Commit: ${{ github.sha }}
  env:
    DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
```

### Email Notifications

Configure email notifications:

```yaml
- name: Send email notification
  if: failure()
  uses: dawidd6/action-send-mail@v3
  with:
    server_address: smtp.gmail.com
    server_port: 465
    username: ${{ secrets.EMAIL_USERNAME }}
    password: ${{ secrets.EMAIL_PASSWORD }}
    subject: 'Capgo Deployment Failed - ${{ github.repository }}'
    to: team@yourcompany.com
    from: ci-cd@yourcompany.com
    body: |
      Deployment failed for ${{ github.repository }}
      Branch: ${{ github.ref_name }}
      Commit: ${{ github.sha }}
      Workflow: ${{ github.workflow }}
```

## D√©pannage

### D√©bogage Workflow

Ajouter D√©bogage steps to troubleshoot issues:

```yaml
- name: Debug environment
  run: |
    echo "Node version: $(node --version)"
    echo "NPM version: $(npm --version)"
    echo "Working directory: $(pwd)"
    echo "Files in dist/: $(ls -la dist/ || echo 'No dist directory')"
    echo "Environment variables:"
    env | grep -E "(GITHUB_|CAPGO_)" | sort

- name: Test Capgo CLI
  run: |
    npx @capgo/cli --version
    npx @capgo/cli app debug --apikey ${{ secrets.CAPGO_TOKEN }} --app ${{ secrets.CAPGO_APP_ID }}
```

### Probl√®mes courants and Solutions

**Workflow fails with "CAPGO_TOKEN not found":**

```yaml
- name: Verify secrets
  run: |
    if [ -z "${{ secrets.CAPGO_TOKEN }}" ]; then
      echo "ERROR: CAPGO_TOKEN secret is not set"
      exit 1
    fi
    echo "CAPGO_TOKEN is set (length: ${#CAPGO_TOKEN})"
  env:
    CAPGO_TOKEN: ${{ secrets.CAPGO_TOKEN }}
```

**Build artifacts not found:**

```yaml
- name: Debug artifacts
  run: |
    echo "Checking for build artifacts..."
    ls -la dist/ || echo "No dist directory found"
    find . -name "*.js" -o -name "*.html" | head -10
```

**Network connectivity issues:**

```yaml
- name: Test connectivity
  run: |
    ping -c 3 api.capgo.io || echo "Ping failed"
    curl -I https://api.capgo.io/health || echo "Health check failed"
```

## Reusable Workflows

Cr√©er reusable workflows for consistency across projects:

```yaml
# .github/workflows/reusable-capgo-deploy.yml
name: Reusable Capgo Deploy

on:
  workflow_call:
    inputs:
      environment:
        required: true
        type: string
      channel:
        required: true
        type: string
    secrets:
      CAPGO_TOKEN:
        required: true
      CAPGO_APP_ID:
        required: true

jobs:
  deploy:
    runs-on: ubuntu-latest
    environment: ${{ inputs.environment }}
    steps:
      - uses: actions/checkout@v6
      
      - name: Setup Node.js
        uses: actions/setup-node@v6
        with:
          node-version: '24'
          cache: 'npm'
      
      - name: Install and build
        run: |
          npm ci
          npm run build
      
      - name: Deploy to Capgo
        run: |
          npm install -g @capgo/cli
          npx @capgo/cli bundle upload \
            --apikey ${{ secrets.CAPGO_TOKEN }} \
            --app ${{ secrets.CAPGO_APP_ID }} \
            --channel ${{ inputs.channel }}
```

Use the reusable workflow:

```yaml
# .github/workflows/deploy.yml
name: Deploy App

on:
  push:
    branches: [main, develop]

jobs:
  deploy-dev:
    if: github.ref == 'refs/heads/develop'
    uses: ./.github/workflows/reusable-capgo-deploy.yml
    with:
      environment: development
      channel: development
    secrets:
      CAPGO_TOKEN: ${{ secrets.CAPGO_TOKEN }}
      CAPGO_APP_ID: ${{ secrets.CAPGO_APP_ID }}

  deploy-prod:
    if: github.ref == 'refs/heads/main'
    uses: ./.github/workflows/reusable-capgo-deploy.yml
    with:
      environment: production
      channel: production
    secrets:
      CAPGO_TOKEN: ${{ secrets.CAPGO_TOKEN }}
      CAPGO_APP_ID: ${{ secrets.CAPGO_APP_ID }}
```

## Suivant Steps

- Learn √Ä propos [Canaux](/docs/live-Mises √† jour/Canaux/) to manage different D√©ploiement environments
- Explore [Custom Storage](/docs/live-Mises √† jour/custom-storage/) for advanced D√©ploiement scenarios
- Set up [Chiffrement](/docs/live-Mises √† jour/Chiffrement/) for secure deployments
- Configure [Mise √† jour Behavior](/docs/live-Mises √† jour/Mise √† jour-behavior/) to customize how Mises √† jour are applied

With GitHub Actions integration, you can leverage GitHub's powerful CI/CD platform to Cr√©er sophisticated D√©ploiement workflows with built-in S√©curit√©, monitoring, and collaboration Fonctionnalit√©s for your Capgo Mises √† jour en direct.
