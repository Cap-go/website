---
title: Guide d'Int√©gration CLI
description: "Guide complet √©tape par √©tape pour int√©grer votre application avec Capgo en utilisant la CLI interactive"
sidebar:
  order: 2
next: true
prev: true
---

import { Aside, Card, CardGrid } from '@astrojs/starlight/components';

## Aper√ßu Rapide

La CLI Capgo fournit une int√©gration interactive qui configure les mises √† jour en direct pour votre application Capacitor. Vous allez :

1. ‚úÖ Enregistrer votre application dans Capgo
2. üîå Installer et configurer le plugin de mise √† jour
3. üöÄ D√©ployer votre premi√®re mise √† jour en direct
4. üì± Tester la mise √† jour sur votre appareil

**Temps estim√© :** 10-20 minutes (varie selon votre vitesse Internet et le temps de compilation)

<Aside type="tip">
L'int√©gration est enti√®rement reprise - quittez √† tout moment et continuez plus tard l√† o√π vous vous √™tes arr√™t√©.
</Aside>

## D√©marrer l'Int√©gration

Ex√©cutez la commande d'int√©gration avec votre cl√© API :

```bash
npx @capgo/cli@latest init [APIKEY]
```

Vous verrez le message de bienvenue :

```
Capgo onboarding üõ´
```

## Ce Qui Se Passe Pendant l'Int√©gration

La CLI vous guidera √† travers 13 √©tapes interactives :

**Phase de Configuration (√âtapes 1-6) :**
- V√©rifier votre environnement de d√©veloppement (Xcode/Android Studio)
- Ajouter votre application √† Capgo et cr√©er un canal de production
- Installer le plugin `@capgo/capacitor-updater`
- Injecter le code requis dans votre application
- Optionnellement activer le chiffrement de bout en bout
- Choisir une plateforme pour les tests (iOS ou Android)

**Phase de Test (√âtapes 7-12) :**
- Compiler votre application et l'ex√©cuter sur un appareil/simulateur
- Effectuer un changement de code visible (automatique ou manuel)
- T√©l√©charger le bundle mis √† jour vers Capgo
- Voir la mise √† jour en direct appara√Ætre sur votre appareil en temps r√©el

**Finalisation (√âtape 13) :**
- Votre application est pr√™te pour les mises √† jour en direct ! üéâ

## Le Processus d'Int√©gration en 13 √âtapes

### √âtape 1 : V√©rifier les Pr√©requis

La CLI v√©rifie votre environnement de d√©veloppement pour s'assurer que vous avez les outils n√©cessaires install√©s.

**Ce qui est v√©rifi√© :**
- **Xcode** (macOS uniquement) - pour le d√©veloppement iOS
- **Android SDK** - pour le d√©veloppement Android

**R√©sultats possibles :**

‚úÖ **Les deux environnements trouv√©s :**
```
‚úÖ Xcode detected - iOS development ready
‚úÖ Android SDK detected - Android development ready
```

‚ö†Ô∏è **Aucun environnement trouv√© :**
```
‚ö†Ô∏è Xcode not found
‚ö†Ô∏è Android SDK not found
‚ùå No development environment detected

üì± To develop mobile apps with Capacitor, you need:
   ‚Ä¢ For iOS: Xcode (macOS only) - https://developer.apple.com/xcode/
   ‚Ä¢ For Android: Android Studio - https://developer.android.com/studio
```

<Aside type="caution">
Si aucun environnement de d√©veloppement n'est d√©tect√©, on vous demandera si vous souhaitez continuer. Il est recommand√© d'installer au moins une plateforme avant de continuer.
</Aside>

### √âtape 2 : Ajouter Votre Application

La CLI vous connectera √† Capgo et ajoutera votre application √† votre compte.

```
(spinner) Running: npm @capgo/cli@latest login ***
Login Done ‚úÖ

‚ùì Add {appId} in Capgo?
```

**Si votre ID d'application est d√©j√† pris :**

La CLI sugg√©rera des alternatives :
```
‚ùå App ID "com.example.app" is already taken
üí° Here are some suggestions:
   1. com.example.app2
   2. com.example.app3
   3. com.example.app.new
   4. com.example.app.app

‚ùì What would you like to do?
```

Vous pouvez choisir une suggestion ou entrer un ID d'application personnalis√©.

<Aside type="note">
Les IDs d'application doivent suivre la notation de domaine invers√© (ex., `com.example.myapp`)
</Aside>

### √âtape 3 : Cr√©er un Canal de Production

Les canaux vous permettent de g√©rer diff√©rents flux de mise √† jour pour votre application.

```
‚ùì Create default channel production for {appId} in Capgo?
```

<Aside type="tip">
**Ne vous inqui√©tez pas !** Ceci est uniquement pour les tests locaux pendant l'int√©gration. Cr√©er un canal de "production" ne signifie pas que vos mises √† jour seront envoy√©es imm√©diatement aux clients. Vous avez un contr√¥le total sur le moment o√π les mises √† jour sont d√©ploy√©es. S√©lectionnez **Oui** sauf si vous avez des exigences sp√©cifiques de canal.
</Aside>

**Si vous s√©lectionnez Oui :**
```
(spinner) Running: npm @capgo/cli@latest channel add production {appId} --default
Channel add Done ‚úÖ  (or "Channel already added ‚úÖ")
```

Un canal de production sera cr√©√© et d√©fini par d√©faut. C'est l'option recommand√©e pour la plupart des utilisateurs.

**Si vous s√©lectionnez Non :**
```
If you change your mind, run it for yourself with: "npm @capgo/cli@latest channel add production {appId} --default"
```

Vous devrez cr√©er et configurer les canaux manuellement plus tard. Alternativement, vous pouvez :
- D√©finir le canal dans votre fichier `capacitor.config.ts`
- Utiliser la m√©thode JavaScript `setChannel()` pour d√©finir le canal dynamiquement
- Configurer les canaux plus tard depuis la console web Capgo

### √âtape 4 : Installer le Plugin de Mise √† Jour

La CLI installera le plugin `@capgo/capacitor-updater` compatible avec votre version de Capacitor.

```
‚ùì Automatic Install "@capgo/capacitor-updater" dependency in {appId}?
```

**Compatibilit√© des versions :**

- **Capacitor 5** : Installe `@capgo/capacitor-updater` v5
- **Capacitor 6** : Installe `@capgo/capacitor-updater` v6
- **Capacitor 7** : Installe `@capgo/capacitor-updater` v7
- **Capacitor 8+** : Installe la derni√®re version

<Aside type="caution">
Capgo ne prend en charge que Capacitor v5 et sup√©rieur. Si vous utilisez une version ant√©rieure, vous devrez d'abord mettre √† jour.
</Aside>

**Option de mises √† jour instantan√©es :**

Apr√®s l'installation, on vous demandera :
```
‚ùì Do you want to set instant updates in {appId}?
   Read more: https://capgo.app/docs/live-updates/update-behavior/#applying-updates-immediately
```

<Aside type="tip">
**Que sont les mises √† jour instantan√©es ?** Avec les mises √† jour instantan√©es activ√©es, votre application applique les mises √† jour imm√©diatement lorsqu'elle est mise en arri√®re-plan et rouverte. Cela fonctionne de mani√®re transparente car Capgo peut distribuer des mises √† jour dans le monde entier en moins de 300ms. Sans cela (mode standard), les mises √† jour se t√©l√©chargent en arri√®re-plan et s'appliquent au prochain red√©marrage de l'application. Les mises √† jour instantan√©es sont id√©ales pour une it√©ration plus rapide pendant le d√©veloppement et les corrections de bugs critiques en production.
</Aside>

**Si vous s√©lectionnez Oui :**
- Les mises √† jour seront configur√©es pour s'appliquer imm√©diatement lorsque l'application est mise en arri√®re-plan et rouverte
- `directUpdate: 'always'` et `autoSplashscreen: true` seront ajout√©s √† votre configuration
- Votre `capacitor.config.ts` sera mis √† jour automatiquement
- **Les mises √† jour Delta** seront automatiquement activ√©es - cela envoie uniquement les fichiers qui ont chang√© entre les mises √† jour au lieu du bundle complet, rendant les mises √† jour beaucoup plus rapides

**Si vous s√©lectionnez Non :**
- Les mises √† jour utiliseront le comportement standard (t√©l√©chargement en arri√®re-plan, application au prochain red√©marrage)
- Vous pouvez toujours activer les mises √† jour instantan√©es plus tard en modifiant votre `capacitor.config.ts`

### √âtape 5 : Ajouter le Code d'Int√©gration

La CLI injectera automatiquement le code requis dans votre fichier d'application principal.

```
‚ùì Automatic Add "CapacitorUpdater.notifyAppReady()" code and import in {appId}?
```

**Ce qui est ajout√© :**
```typescript
import { CapacitorUpdater } from '@capgo/capacitor-updater'

CapacitorUpdater.notifyAppReady()
```

**D√©tection du type de projet :**

- **Nuxt.js** : Cr√©e `plugins/capacitorUpdater.client.ts`
- **Autres frameworks** : Ajoute √† votre fichier d'entr√©e principal

<Aside type="tip">
**Si l'injection automatique √©choue**, vous pouvez ajouter le code manuellement √† votre fichier d'application principal :

**Pour Nuxt.js :**
Cr√©ez `plugins/capacitorUpdater.client.ts` :
```typescript
import { CapacitorUpdater } from '@capgo/capacitor-updater'

export default defineNuxtPlugin(() => {
  CapacitorUpdater.notifyAppReady()
})
```

**Pour les autres frameworks :**
Ajoutez √† votre fichier d'entr√©e principal (ex., `main.ts`, `index.js`, `App.tsx`) :
```typescript
import { CapacitorUpdater } from '@capgo/capacitor-updater'

CapacitorUpdater.notifyAppReady()
```

Placez ce code apr√®s vos imports et avant l'initialisation de votre application. Pour plus de d√©tails, consultez le [guide Ajouter une Application](/docs/getting-started/add-an-app/).
</Aside>

### √âtape 6 : Configurer le Chiffrement (Optionnel)

Le chiffrement de bout en bout ajoute une couche de s√©curit√© suppl√©mentaire pour vos mises √† jour.

```
üîê End-to-end encryption
   ‚úÖ Use this for: Banking, healthcare, or apps with legal encryption requirements
   ‚ö†Ô∏è  Note: Makes debugging harder - skip if you don't need it

‚ùì Enable end-to-end encryption for {appId} updates?
```

<Aside type="note">
Le chiffrement n'est disponible que pour Capacitor v6 et sup√©rieur.
</Aside>

Si vous activez le chiffrement, la CLI :
1. G√©n√©rera des cl√©s de chiffrement
2. Proposera de synchroniser votre configuration Capacitor

### √âtape 7 : S√©lectionner la Plateforme

Choisissez avec quelle plateforme tester pendant l'int√©gration.

```
üì± Platform selection for onboarding
   This is just for testing during onboarding - your app will work on all platforms

‚ùì Which platform do you want to test with during this onboarding?
   Options:
   - iOS
   - Android
```

<Aside type="tip">
Cela n'affecte que le processus d'int√©gration. Votre application finale prendra en charge toutes les plateformes.
</Aside>

### √âtape 8 : Compiler Votre Projet

La CLI compilera votre application et la synchronisera avec Capacitor.

```
‚ùì Automatic build {appId} with "npm run build"?
```

**Ce qui se passe :**
1. D√©tecte votre type de projet
2. Ex√©cute votre script de compilation
3. Ex√©cute `npx cap sync {platform}`

**Si le script de compilation manque :**

On vous demandera si vous souhaitez ignorer la compilation ou ajouter un script de compilation √† votre `package.json`.

### √âtape 9 : Ex√©cuter sur l'Appareil

Testez la version initiale de votre application sur un appareil ou un simulateur.

```
‚ùì Run {appId} on {PLATFORM} device now to test the initial version?
```

Si vous s√©lectionnez **Oui** :
```
(spinner) Running: npx cap run {platform}
(device picker appears)
App started ‚úÖ
üì± Your app should now be running on your {platform} device with Capgo integrated
üîÑ This is your baseline version - we'll create an update next
```

### √âtape 10 : Effectuer un Changement de Test

Il est maintenant temps de tester le syst√®me de mise √† jour de Capgo en effectuant un changement visible.

```
üéØ Now let's test Capgo by making a visible change and deploying an update!

‚ùì How would you like to test the update?
   Options:
   - Auto: Let Capgo CLI make a visible change for you
   - Manual: I'll make changes myself
```

**Mode automatique :**
La CLI modifiera automatiquement vos fichiers pour ajouter une banni√®re de test visible ou un changement.

**Mode manuel :**
Vous effectuez vos propres changements (ex., changer du texte, des couleurs ou ajouter des √©l√©ments).

**Gestion des versions :**
```
‚ùì How do you want to handle the version for this update?
   Options:
   - Auto: Bump patch version ({currentVersion} ‚Üí {nextVersion})
   - Manual: I'll provide the version number
```

**Compiler avec les changements :**
```
‚ùì Build {appId} with changes before uploading?
```

<Aside type="tip">
Si vous devez compiler manuellement dans un autre terminal, s√©lectionnez "Non" et compilez vous-m√™me, puis continuez.
</Aside>

### √âtape 11 : T√©l√©charger le Bundle

T√©l√©chargez votre bundle d'application mis √† jour vers Capgo.

```
‚ùì Upload the updated {appId} bundle (v{version}) to Capgo?
```

La CLI ex√©cute :
```bash
npx @capgo/cli@latest bundle upload
```

<Aside type="tip">
**Mises √† jour Delta avec Direct Update :** Si vous avez activ√© les mises √† jour instantan√©es (Direct Update) √† l'√©tape 4, la CLI demandera automatiquement si vous souhaitez activer les mises √† jour delta. Les mises √† jour delta envoient uniquement les fichiers qui ont chang√© entre les versions au lieu du bundle complet. Comme g√©n√©ralement seuls quelques fichiers changent entre les mises √† jour, cela rend les t√©l√©chargements beaucoup plus rapides. S√©lectionnez **Oui** pour la meilleure exp√©rience avec les mises √† jour instantan√©es.
</Aside>

**Invite de mises √† jour delta (si Direct Update est activ√©) :**
```
üí° Direct Update (instant updates) is enabled in your config
   Delta updates send only changed files instead of the full bundle

‚ùì Enable delta updates for this upload? (Recommended with Direct Update)
```

<Aside type="caution">
Pour les monorepos, vous devrez peut-√™tre fournir des chemins suppl√©mentaires vers votre `package.json` et `node_modules`.
</Aside>

**Succ√®s :**
```
‚úÖ Update v{version} uploaded successfully!
üéâ Your updated bundle is now available on Capgo
```

### √âtape 12 : Tester la Mise √† Jour sur l'Appareil

Il est temps de voir la mise √† jour en action !

```
üß™ Time to test the Capgo update system!
üì± Go to your device where the app is running
```

**Pour les mises √† jour instantan√©es :**
```
üîÑ IMPORTANT: Background your app (swipe up/press home button) and then reopen it
‚è±Ô∏è  The update should be downloaded and applied automatically
```

**Pour les mises √† jour standard :**
```
üì± With standard updates, you will need to:
   1. Background the app (swipe up/press home button) to start download
   2. Wait a few seconds for download to complete
   3. Background and foreground again to see the update
```

**Surveiller les journaux :**
```
‚ùì Monitor Capgo logs to verify the update worked?
```

Si vous s√©lectionnez **Oui**, vous verrez les journaux en direct de votre appareil montrant le processus de mise √† jour.

### √âtape 13 : Finalisation

```
Welcome onboard ‚úàÔ∏è!
```

F√©licitations ! Vous avez configur√© avec succ√®s les mises √† jour en direct Capgo pour votre application.

## Ce Que Vous Avez Accompli

Apr√®s avoir termin√© l'int√©gration, vous avez :

<CardGrid>
  <Card title="‚úÖ Application Enregistr√©e" icon="rocket">
    Votre application est enregistr√©e dans Capgo avec un canal de production
  </Card>
  <Card title="‚úÖ Plugin Install√©" icon="puzzle">
    Le plugin Capacitor Updater est install√© et configur√©
  </Card>
  <Card title="‚úÖ Code Int√©gr√©" icon="seti:config">
    Le code d'int√©gration est ajout√© √† votre application
  </Card>
  <Card title="‚úÖ Mise √† Jour Test√©e" icon="approve-check">
    Vous avez d√©ploy√© et re√ßu avec succ√®s une mise √† jour en direct
  </Card>
</CardGrid>

## Flux de Travail Quotidien

Pour les mises √† jour suivantes, utilisez :

```bash
npm run build
npx @capgo/cli@latest bundle upload --channel=production
```

Pour plus d'options de d√©ploiement, consultez [D√©ployer une Mise √† Jour en Direct](/docs/getting-started/deploy/).

## Reprendre l'Int√©gration

Si vous quittez le processus d'int√©gration, vous pouvez reprendre √† tout moment :

```bash
npx @capgo/cli@latest init [APIKEY]
```

Vous verrez :
```
You have already got to the step {stepNumber}/13 in the previous session
‚ùì Would you like to continue from where you left off?
```

<Aside type="tip">
La progression est enregistr√©e localement, vous pouvez donc quitter et reprendre le processus d'int√©gration en toute s√©curit√©.
</Aside>

## D√©pannage

### Aucun Environnement de D√©veloppement

**Probl√®me :** Ni Xcode ni Android SDK n'est d√©tect√©.

**Solution :**
- **Pour iOS** : Installez [Xcode](https://developer.apple.com/xcode/) (macOS uniquement)
- **Pour Android** : Installez [Android Studio](https://developer.android.com/studio)

### ID d'Application D√©j√† Pris

**Probl√®me :** Votre ID d'application est d√©j√† enregistr√©.

**Solution :** Choisissez l'une des alternatives sugg√©r√©es ou entrez un ID d'application personnalis√© en notation de domaine invers√©.

### Script de Compilation Manquant

**Probl√®me :** Aucun script de compilation trouv√© dans `package.json`.

**Solution :** Ajoutez un script de compilation √† votre `package.json` :
```json
{
  "scripts": {
    "build": "your-build-command"
  }
}
```

### Injection Automatique √âchou√©e

**Probl√®me :** La CLI ne peut pas injecter automatiquement le code d'int√©gration.

**Solution :** Ajoutez le code manuellement √† votre fichier principal :
```typescript
import { CapacitorUpdater } from '@capgo/capacitor-updater'

CapacitorUpdater.notifyAppReady()
```

### Version de Capacitor Trop Ancienne

**Probl√®me :** Votre version de Capacitor est inf√©rieure √† v5.

**Solution :** Mettez √† jour Capacitor vers v5 ou sup√©rieur :
- [Mise √† jour vers Capacitor 5](https://capacitorjs.com/docs/updating/5-0)
- [Mise √† jour vers Capacitor 6](https://capacitorjs.com/docs/updating/6-0)
- [Mise √† jour vers Capacitor 7](https://capacitorjs.com/docs/updating/7-0)

## Prochaines √âtapes

Maintenant que vous avez termin√© l'int√©gration, explorez ces sujets :

<CardGrid>
  <a href="/docs/getting-started/deploy/"><Card title="D√©ployer des Mises √† Jour" icon="rocket">
    Apprenez √† d√©ployer des mises √† jour depuis le tableau de bord Capgo
  </Card></a>
  <a href="/docs/getting-started/cicd-integration/"><Card title="Int√©gration CI/CD" icon="setting">
    Automatisez vos d√©ploiements de mise √† jour avec CI/CD
  </Card></a>
  <a href="/docs/live-updates/channels/"><Card title="Canaux" icon="list-format">
    G√©rez plusieurs flux de mise √† jour avec les canaux
  </Card></a>
  <a href="/docs/live-updates/encryption/"><Card title="Chiffrement" icon="approve-check-circle">
    S√©curisez vos mises √† jour avec le chiffrement de bout en bout
  </Card></a>
  <a href="/docs/live-updates/update-behavior/"><Card title="Comportement des Mises √† Jour" icon="setting">
    Personnalisez quand et comment les mises √† jour sont appliqu√©es (direct, delta, etc.)
  </Card></a>
</CardGrid>

## Obtenir de l'Aide

Si vous rencontrez des probl√®mes pendant l'int√©gration :

- Consultez le [Guide de D√©pannage](/docs/getting-started/troubleshooting/)
- Rejoignez la [Communaut√© Discord](https://discord.capgo.app)
- Consultez la [FAQ](/docs/faq/)
- Contactez le [Support](/docs/getting-help/)
