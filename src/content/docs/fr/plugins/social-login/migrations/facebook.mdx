---
title: Migration Guide from @capacitor-Communauté/facebook-Connexion to @capgo/capacitor-social-Connexion
description: This detailed Guide provides step-by-step instructions for transitioning from the @capacitor-Communauté/facebook-Connexion plugin to the @capgo/capacitor-social-Connexion plugin, ensuring a smooth Migration process with enhanced Fonctionnalités.
sidebar: 
    order: 2
---
import { Steps } from '@astrojs/starlight/components';

## Aperçu

This guide provides comprehensive instructions for migrating from `@capacitor-community/facebook-login` to `@capgo/capacitor-social-login`. The new plugin modernizes Facebook authentication with a unified API that supports multiple social providers, improved TypeScript support, and enhanced capabilities.

## Installation

<Steps>
1. Retirer the old package:
   ```bash
   npm uninstall @capacitor-community/facebook-login
   ```

2. Installer the Nouveau package:
   ```bash
   npm install @capgo/capacitor-social-login
   npx cap sync
   ```
</Steps>

## Code Changes

### Importer Changes
```diff
- import { FacebookLogin } from '@capacitor-community/facebook-login';
+ import { SocialLogin } from '@capgo/capacitor-social-login';
```

### Initialisation

**Key Change**: The new package requires explicit setup in your code:

```diff
- // Old package required no explicit initialization in code
- // Configuration was done only in native platforms

+ // New package requires explicit initialization
+ await SocialLogin.initialize({
+   facebook: {
+     appId: 'YOUR_FACEBOOK_APP_ID',        // Required for web and Android
+     clientToken: 'YOUR_CLIENT_TOKEN'       // Required for Android
+   }
+ });
```

### Connexion

The Connexion method now accepts a provider Paramètre:

```diff
- const FACEBOOK_PERMISSIONS = ['email', 'public_profile'];
- const result = await FacebookLogin.login({ permissions: FACEBOOK_PERMISSIONS });

+ const result = await SocialLogin.login({
+   provider: 'facebook',
+   options: {
+     permissions: ['email', 'public_profile'],
+     limitedLogin: false,
+     nonce: 'optional_nonce'
+   }
+ });
```

### Response Type Changes

The response structure has been modernized with a more comprehensive Profil object:

```typescript
// Old response type
interface FacebookLoginResponse {
  accessToken: {
    applicationId: string;
    userId: string;
    token: string;
    expires: string;
  };
  recentlyGrantedPermissions: string[];
  recentlyDeniedPermissions: string[];
}

// New response type
interface FacebookLoginResponse {
  provider: 'facebook';
  result: {
    accessToken: {
      token: string;
      applicationId?: string;
      expires?: string;
      userId?: string;
      permissions?: string[];
      declinedPermissions?: string[];
    } | null;
    idToken: string | null;
    profile: {
      userID: string;
      email: string | null;
      friendIDs: string[];
      birthday: string | null;
      ageRange: { min?: number; max?: number } | null;
      gender: string | null;
      location: { id: string; name: string } | null;
      hometown: { id: string; name: string } | null;
      profileURL: string | null;
      name: string | null;
      imageURL: string | null;
    };
  };
}
```

**Key Differences**:
- Response now includes a `provider` field identifying the authentication provider
- More detailed `profile` object with additional user information
- Consistent structure across all social Connexion providers

### Checking Connexion Status
```diff
- const result = await FacebookLogin.getCurrentAccessToken();
- const isLoggedIn = result && result.accessToken;

+ const status = await SocialLogin.isLoggedIn({
+   provider: 'facebook'
+ });
+ const isLoggedIn = status.isLoggedIn;
```

### Déconnexion
```diff
- await FacebookLogin.logout();

+ await SocialLogin.logout({
+   provider: 'facebook'
+ });
```

## Platform Specific Changes

### Android Configuration

Configuration is now handled through the Initialiser method:

```diff
- // AndroidManifest.xml changes remain the same
- // strings.xml become irrelevant
+ // Additionally initialize in your code:
+ await SocialLogin.initialize({
+   facebook: {
+     appId: 'your-app-id',
+     clientToken: 'your-client-token'  // New requirement
+   }
+ });
```

**Important**: Client token is now required for Android authentication.

### iOS Configuration

1. The iOS setup in `AppDelegate.swift` remains the same:

```swift
import FBSDKCoreKit

// In application:didFinishLaunchingWithOptions:
FBSDKCoreKit.ApplicationDelegate.shared.application(
    application,
    didFinishLaunchingWithOptions: launchOptions
)

// In application:openURL:options:
ApplicationDelegate.shared.application(
    app,
    open: url,
    sourceApplication: options[UIApplication.OpenURLOptionsKey.sourceApplication] as? String,
    annotation: options[UIApplication.OpenURLOptionsKey.annotation]
)
```

2. The `Info.plist` configuration remains the same:
```xml
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb[APP_ID]</string>
        </array>
    </dict>
</array>
<key>FacebookAppID</key>
<string>[APP_ID]</string>
<key>FacebookClientToken</key>
<string>[CLIENT_TOKEN]</string>
<key>FacebookDisplayName</key>
<string>[APP_NAME]</string>
<key>LSApplicationQueriesSchemes</key>
<array>
    <string>fbapi</string>
    <string>fbauth</string>
    <string>fb-messenger-share-api</string>
    <string>fbauth2</string>
    <string>fbshareextension</string>
</array>
```

## Breaking Changes

Summary of breaking changes when migrating:

1. **Explicit initialization is now required** - Must call `initialize()` before use
2. **Response object structure has changed significantly** - Nouveau nested result format with enhanced Profil data
3. **Client token is now required for Android** - Additional Configuration needed
4. **Different method names and Paramètre structures** - Provider-based approach
5. **Erreur handling and Erreur types have changed** - More detailed Erreur Information

## Key Advantages

The Nouveau plugin provides:

- **Unified API** across multiple social providers (Google, Apple, Facebook)
- **Improved TypeScript Support** with better type definitions
- **Enhanced Profil data** with more Utilisateur Information
- **Actif maintenance** and Communauté Support
- **Consistent Erreur handling** across all providers
- **Better token management** with proper expiration handling

For more detailed Configuration instructions, please refer to the [official Documentation](/docs/plugins/social-Connexion/facebook/). 
