---
locale: fr
title: Commencer
description: Learn how to Installer and use the Mute plugin to detect silent mode state in your Capacitor Application.
sidebar: 
  order: 2
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Code, Steps } from '@astrojs/starlight/components';
import { PackageManagers } from 'starlight-package-managers'

<Steps>
1. **Installer the package**
   <PackageManagers pkg="@capgo/capacitor-mute" pkgManagers={['npm', 'pnpm', 'yarn', 'bun']} />

2. **Synchroniser with Natif projects**
   <PackageManagers type="exec" pkg="cap" args="sync" pkgManagers={['npm', 'pnpm', 'yarn', 'bun']} />
</Steps>

## Utilisation

Importer the plugin and use its methods to Vérifier mute state:

```typescript
import { CapacitorMute } from '@capgo/capacitor-mute';

// Check if device is muted
const checkMuteState = async () => {
  const { value } = await CapacitorMute.isMuted();

  if (value) {
    console.log('Device is muted/silent');
    // Adjust app behavior for silent mode
  } else {
    console.log('Device sound is on');
  }
};
```

## API Référence

### isMuted()

Checks if the Appareil is currently muted/in silent mode.

```typescript
const result = await CapacitorMute.isMuted();
// Returns: { value: boolean }
```

## Terminé Exemple

```typescript
import { CapacitorMute } from '@capgo/capacitor-mute';

export class SoundManager {
  private isMuted = false;

  async initialize() {
    // Get initial mute state
    await this.checkMuteState();
  }

  async checkMuteState() {
    try {
      const { value } = await CapacitorMute.isMuted();
      this.isMuted = value;
      this.updateAppBehavior();
    } catch (error) {
      console.error('Failed to check mute state:', error);
    }
  }

  private updateAppBehavior() {
    if (this.isMuted) {
      // Device is muted - adjust app behavior
      this.disableSoundEffects();
      this.showVisualNotifications();
    } else {
      // Device sound is on
      this.enableSoundEffects();
      this.useAudioNotifications();
    }
  }

  private disableSoundEffects() {
    // Disable in-app sounds
    console.log('Disabling sound effects');
  }

  private enableSoundEffects() {
    // Enable in-app sounds
    console.log('Enabling sound effects');
  }

  private showVisualNotifications() {
    // Use visual feedback instead of audio
    console.log('Using visual notifications');
  }

  private useAudioNotifications() {
    // Use audio notifications
    console.log('Using audio notifications');
  }
}

// Usage
const soundManager = new SoundManager();
await soundManager.initialize();

// Poll periodically to check for changes
setInterval(() => {
  soundManager.checkMuteState();
}, 5000); // Check every 5 seconds
```

## Platform Behavior

### iOS
- Detects the physical mute switch state
- No real-time change events (polling required)
- Works on iPhone and iPad with mute switch

### Android
- Checks if ringer mode is set to silent or vibrate
- No change events (polling required)
- Based on AudioManager ringer mode

## Best Practices

1. **Poll for changes**
   Since the plugin doesn't provide real-time events, poll periodically if you need to track changes:
   ```typescript
   // Check mute state periodically
   setInterval(async () => {
     const { value } = await CapacitorMute.isMuted();
     if (value !== previousMuteState) {
       handleMuteStateChange(value);
     }
   }, 5000);
   ```

2. **Respect Utilisateur preferences**
   Always honor the mute state and adjust your Application's audio behavior accordingly.

3. **Provide visual alternatives**
   ```typescript
   const { value: isMuted } = await CapacitorMute.isMuted();
   if (isMuted) {
     // Show visual notifications
     showToast('New message received');
   } else {
     // Play sound notification
     playNotificationSound();
   }
   ```

## Use Cases

1. **Game Sound Management**
   ```typescript
   const shouldPlaySound = async () => {
     const { value: isMuted } = await CapacitorMute.isMuted();
     return !isMuted && userPreferences.soundEnabled;
   };
   ```

2. **Notification Handling**
   ```typescript
   const sendNotification = async (message: string) => {
     const { value: isMuted } = await CapacitorMute.isMuted();
     
     if (isMuted) {
       // Use vibration or visual notification
       await Haptics.vibrate();
       showBanner(message);
     } else {
       // Play notification sound
       await playSound('notification.mp3');
     }
   };
   ```

3. **Video Player**
   ```typescript
   const initVideoPlayer = async () => {
     const { value: isMuted } = await CapacitorMute.isMuted();
     
     videoPlayer.setMuted(isMuted);
     if (isMuted) {
       showSubtitles(true);
       showMuteIndicator();
     }
   };
   ```

## Dépannage

1. **Always Retourne false on Android**
   - Vérifier if Appareil ringer mode is actually set to silent
   - Some Android Appareils may have different behavior

2. **No change events Disponible**
   - The plugin does not provide real-time change events
   - Implement polling if you need to detect changes

3. **Not working on simulator**
   - iOS Simulator doesn't have a mute switch
   - Test on real Appareils for accurate results
