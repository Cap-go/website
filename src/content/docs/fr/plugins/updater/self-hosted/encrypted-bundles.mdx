---
locale: fr
title: "Chiffré Bundles"
description: "A comprehensive Guide on utilizing the manual Mise à jour plugin in a self-hosted environment, detailing the steps and processes involved in managing Chiffré Bundles for secure and efficient Mises à jour."
sidebar: 
  order: 5
---
import { LinkCard, CardGrid } from '@astrojs/starlight/components';

## End-to-end Chiffrement

Starting with Version 4.15.0 the plugin allows you to send Chiffré Mises à jour.

### Step 1: Créer a private key
```bash title='Create a private key'
npx @capgo/cli key create
```

### Step 2: Créer and zip your Bundle
```bash title="Create bundle zip with checksum"
npx @capgo/cli bundle zip [appId] --key-v2 --json
```

The `--key-v2` flag uses the new encryption system with better checksums, and the `--json` flag will output the bundle information including the checksum that you'll need for encryption.

### Step 3: Encrypt your Bundle
```bash title="Encrypt bundled zip with checksum"
npx @capgo/cli encrypt [path/to/zip] [checksum]
```

The `checksum` parameter is the SHA256 checksum generated by the zip command in step 2. The encrypt command will return an `ivSessionKey` and generate an encrypted checksum.Remember to rename `ivSessionKey` key as `session_key` in the update payload.

### Step 4: Use in your Mise à jour payload
```json
{
"version": "1.2.3",
"url": "https://myserver.com/app/updates/my-new-app-2.0.0.zip",
"session_key": "encrypted_session_key",
"checksum": "encrypted_checksum_from_encrypt_command"
}
```

The `session_key` is the `ivSessionKey` returned by the encrypt command, and the `checksum` is the encrypted checksum generated during encryption (not the original checksum from the zip command).

Then your app will be able to use the private key to decrypt the `session_key` and use the decrypted `session_key` to decrypt the update. The encrypted checksum ensures bundle integrity verification.

## Learn More

<CardGrid>
<LinkCard
	title="End-to-End Chiffrement Guide"
	href="https://capgo.app/blog/introducing-end-to-end-security-to-capacitor-updater-with-code-signing/"
	description="Deep dive into how Capgo's Chiffrement system works with RSA + AES cryptography"
/>
<LinkCard
	title="Self-hosted Mises à jour en direct"
	href="https://capgo.app/blog/self-hosted-live-updates/"
	description="Terminé workflow for setting up self-hosted Mises à jour"
/>
</CardGrid>
