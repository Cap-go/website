---
title: "Débogage"
description: "How to Débogage your Mises à jour of Capgo and understand the Problème you can have with your Configuration"
sidebar: 
  order: 6
---

import { LinkCard, CardGrid } from '@astrojs/starlight/components';

## Understanding cloud Journaux:

### Sent from the backend

| code                          | Description                                                                                                                                                                 |
| ------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **InvalidIp**                                    | The Utilisateur is located in a Google data center and the Mise à jour is less than 4 hours old. This is done to prevent Google bots' Appareils from counting as Appareils in your Compte. |
| **needPlanUpgrade** (previously **needUpgrade**) | Indicates that you have reached the limit of your plan, and the Appareil will not receive Mises à jour until you Mise à niveau or until the Suivant month.                                  |
| **noNew**                                        | The Appareil has the latest Disponible Version.                                                                                                                                |
| **disablePlatformIos**                           | The Appareil is on the iOS platform, but that is disabled in the Canal Paramètres.                                                                                            |
| **disablePlatformAndroid**                       | The Appareil is on the Android platform, but that is disabled in the Canal Paramètres.                                                                                        |
| **disableAutoUpdate**                            | "major" | "minor" | "version_number" | "none"                                       |
| **disableAutoUpdateUnderNative**                 | The device has version (`1.2.3`), and the channel has an update (`1.2.2`) under the device version to send, but that is disabled in the channel settings.                   |
| **disableDevBuild**                              | The Appareil has a dev Construction, but that is disabled in the Canal Paramètres.                                                                                                   |
| **disableEmulator**                              | The Appareil is an emulator, but that is disabled in the Canal Paramètres.                                                                                                    |
| **cannotGetBundle**                          | Échoué to generate a valid signed URL for the Bundle Télécharger. This occurs when the Bundle URL generation fails or Retourne an invalid URL (not starting with http/https) and there's no manifest Disponible as a fallback.                                                                                          |
| **cannotUpdateViaPrivateChannel**              | The device tried to self-associate with a private channel, but the channel settings don't allow device self-association (`allow_device_self_set` is false) and the channel is not public.                                                                                    |
| **channelMisconfigured**                       | The channel is configured to disable auto-update by version number (`disable_auto_update: 'version_number'`), but the bundle's `min_update_version` field is null, making it impossible to determine which devices should receive the update.                                                                                                                 |
| **disableAutoUpdateMetadata**                  | Auto-update is disabled by version number metadata. The channel requires the device's version to be at least `min_update_version`, but the device's current version is lower than this threshold.                                                                                                         |
| **disableAutoUpdateToMajor**                   | Channel setting `disable_auto_update: 'major'` prevents updates that would increase the major version number (e.g., blocking 1.x.x from updating to 2.x.x).                                                                                             |
| **disableAutoUpdateToMinor**                   | Channel setting `disable_auto_update: 'minor'` prevents updates that would increase the minor version number (e.g., blocking 1.2.x from updating to 1.3.x).                                                                                             |
| **disableAutoUpdateToPatch**                   | Channel setting `disable_auto_update: 'patch'` prevents updates that would increase the patch version number, or allows only patch-level updates within the same major.minor version (e.g., 1.2.3 can update to 1.2.4 but not 1.2.2 or 1.3.0).                                                                                             |
| **missingBundle**                              | The bundle assigned to this channel has no downloadable content. This means the bundle has no `external_url`, no `r2_path`, it's not a built-in version, and there are no manifest entries available for download.                                                                                                                   |
| **NoChannelOrOverride**                        | No default Canal is configured for this Application and the Appareil has no specific Canal override assigned. At least one must be present for Mises à jour to work.                                                                                                     |
| **rateLimited**                                | The Appareil has been rate limited due to excessive requests.                                                                                                        |


### Sent from the Appareil

| code  | Description                                                                       |
| --------------------- | --------------------------------------------------------------------------------- |
| **ping**              | Internal Test action used to verify the stats system is working correctly.        |
| **get**               | Info for downloading the Nouveau Version has been sent to the Appareil.                 |
| **Supprimer**            | One Bundle has been deleted on the Appareil.                                        |
| **set**               | A Bundle has been set on the Appareil.                                              |
| **set_fail**          | The Bundle Échoué to set.                                                         |
| **reset**             | The device reset to the `builtin` bundle.                                         |
| **download_XX**       | A Nouveau Bundle has been downloaded - progress indicated by XX% (increments of 10%). |
| **download_complete** | The Nouveau Bundle has finished downloading.                                          |
| **download_manifest_start** | The Appareil started downloading the Mise à jour manifest.                             |
| **download_manifest_complete** | The Appareil finished downloading the Mise à jour manifest.                          |
| **download_zip_start** | The Appareil started downloading the Bundle archive.                                   |
| **download_zip_complete** | The Appareil finished downloading the Bundle archive.                                 |
| **download_manifest_file_fail** | One manifest entry failed to download; the stats payload puts `version_name` in the form `version:fileName` to pinpoint the asset. |
| **download_manifest_checksum_fail** | The manifest file Échoué checksum validation.                           |
| **download_manifest_brotli_fail** | The manifest file Échoué to decompress using Brotli.                       |
| **download_fail**     | The Nouveau Bundle Échoué to Télécharger.                                                |
| **update_fail**       | The new bundle has been installed but failed to call `notifyAppReady`.            |
| **checksum_fail**     | The Nouveau Bundle Échoué to Valider the checksum. If you're using Capgo Cloud and encounter this Erreur, it typically means your Application Version is expecting a different checksum type. The latest Version of the CLI and plugins (Version 5.10.0+, 6.25.0+ or 7+) use SHA256 checksums, while older plugins used CRC32. If you see a checksum fail, Vérifier if the checksum is CRC32 (a shorter hash) rather than SHA256. This usually indicates the Bundle was uploaded with an old Version of the CLI. Verify your Bundle Version in the Capgo Tableau de bord - Bundles created since Version 5.10.0/6.25.0/7 should use SHA256. If you're seeing CRC32 checksums, ensure you have the latest plugin Version installed locally (the CLI checks your local plugin Version to determine which checksum type to Télécharger), then Mise à niveau your CLI and re-Télécharger the Bundle.                                   |
| **windows_path_fail** | The zip has files who contain windows path who are illegal                        |
| **canonical_path_fail** | The path of files is not canonical                                              |
| **directory_path_fail** | There is an Erreur in the path of zip files                                         |
| **unzip_fail**          | unzip Échoué                                                                   |
| **low_mem_fail** | Télécharger Échoué because of low memory in the Appareil                                    |
| **app_moved_to_background** | The Application entered the background state.                                   |
| **app_moved_to_foreground** | The Application entered the foreground state.                                   |
| **decrypt_fail**        | Échoué to decrypt the downloaded Bundle.                                          |
| **getChannel**          | The current Canal for the Appareil was queried.                                   |
| **setChannel**          | A Canal was successfully set for the Appareil.                                    |
| **uninstall**           | The Application was uninstalled or Capgo data cleared.                            |
| **blocked_by_server_url** | Server.url is present in your capacitor config, this make Capacitor serve remote url and ignore local files, while our updater is made to function with local file, Server.url Is consider by Capacitor Makers as bad practice in Production and will lead to many Problème and plugin not working correctly.                         |

### Bundle status

* `SUCCESS`: install bundle done
* `ERROR`: install or download failed
* `PENDING`: Download done, pending release
* `DELETED`: Bundle deleted, still presented for stats
* `DOWNLOADING`: Currently downloading a bundle

## Understanding Appareil Journaux:

### Débogage Commande:

There is a Débogage Commande for Capgo cloud Utilisateurs.

```bash
npx @capgo/cli@latest app debug
```

This will allow you to Vérifier all events happening in the Application and find a Solution if Mises à jour don't happen.

### iOS

to find your Journaux on Xcode

<LinkCard
    title="Getting the Appareil Journal in Xcode"
    href="https://intercom.help/deploygate/en/articles/4682692-getting-the-device-log-in-xcode"
/>

### Android:

to find your Journaux on Android studio

<LinkCard
    title="View Journaux with Logcat"
    href="https://developer.android.com/studio/debug/am-logcat"
/>

### Explanations Journaux

* `Failed to download from` **=>** same as **download\_fail**
* `notifyAppReady was not called, roll back current bundle` => same as as **update\_fail**

## Finding the downloaded Bundle in your Appareil

### iOS

To Débogage on iOS, you need to dump the Application on your computer, you can do it like this:

Xcode has a built-in Fonctionnalité for inspecting the file system of developer-installed apps on an iOS Appareil.
![Xcode Window menu showing Appareils and Simulators Option](/ios_debug_update_1.webp)

To achieve this:

* Connect your device to your Mac and select Window > Devices in the Xcode menubar.
* Select your device in the left pane under the Devices section.
* This will show a list of developer-installed apps for that device.
* Select the app you want to inspect and then select the 3 dots icon near the bottom of the screen.
* Here you can view the current file system by selecting download a snapshot of it.

![Xcode Appareils panel showing Application container Télécharger Option](/ios_debug_update_2.webp)

Selecting Télécharger Container... will Télécharger and Exporter a snapshot of the file system as a .xcappdata file that you can browse through.

![Downloaded xcappdata file with Show Package Contents context menu](/ios_debug_update_3.webp)

Right-click on this file and select Show Package Contents to open the folder.

Open the Application Data folder, and you should now see a few folders like Documents, Library, tmp, etc.

![iOS Application container folder structure showing Documents and Library folders](/ios_debug_update_4.webp)

Then you will find a Version in 2 folders:

`library/NoCloud/ionic_built_snapshots` is necessary after the app reboot

and `documents/versions` for hot reload

### Android

To Débogage on Android, you need to access the Appareil from Android Studio:

* Click View > Tool Windows > Device File Explorer or click the Device File Explorer button in the tool window bar to open the Device File Explorer.
* Select a device from the dropdown list.
* Open the path **data/data/APP\_NAME/** where **APP\_NAME is your app ID.**

![Android Studio Appareil File Explorer showing Application data directory](/android_debug_update.webp)

Then Find the `versions` folder to see all the versions

:::Conseil[Did you know?]
On Android, all versions are stored in one folder, unlike iOS where it has to be duplicated in two locations.
:::

## Understanding iOS Production crash Journaux

<LinkCard
    title="How to review your Application's crash Journaux"
    href="https://developer.apple.com/news/?id=nra79npr"
/>
