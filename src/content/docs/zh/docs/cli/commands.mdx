---
title: "å‘½ä»¤"
description: "Capgo CLI æ–‡æ¡£,å¦‚ä½•ä½¿ç”¨å®ƒä»¥åŠå®ƒçš„ç”¨é€”"
locale: zh
sidebar:
  order: 2
---
import { LinkCard } from '@astrojs/starlight/components';
import { YouTube } from 'astro-embed';

### ç”¨æ³•

æ‰€æœ‰å‘½ä»¤éƒ½åº”è¯¥åœ¨æ‚¨çš„åº”ç”¨æ–‡ä»¶å¤¹ä¸­è¿è¡Œ,å¹¶ä¸”å·²æ­£ç¡®åˆå§‹åŒ– Capacitor é¡¹ç›®ã€‚

<LinkCard
	title="Capacitor è·¨å¹³å° Web åº”ç”¨åŸç”Ÿè¿è¡Œæ—¶"
	href="https://capacitorjs.com/docs/getting-started/"
/>

### **Init**

`npx @capgo/cli@latest init [apikey]`

æ­¤æ–¹æ³•ç”¨äºé€æ­¥å¼•å¯¼æ‚¨ã€‚

å®ƒå°†æŠŠæ‚¨çš„åº”ç”¨æ·»åŠ åˆ° Capgoã€‚å®ƒå°†æ·»åŠ ä»£ç åˆ°æ‚¨çš„åº”ç”¨ä»¥éªŒè¯æ›´æ–°ã€‚åŒæ ·,å®ƒå°†æ„å»ºæ‚¨çš„åº”ç”¨ã€‚æ­¤å¤–,å®ƒå°†ä¸Šä¼ æ‚¨çš„åº”ç”¨åˆ° Capgoã€‚å¹¶ä¸”å®ƒå°†å¸®åŠ©æ‚¨æ£€æŸ¥æ›´æ–°æ˜¯å¦æœ‰æ•ˆã€‚

### **Login**

`npx @capgo/cli login [apikey]`

æ­¤æ–¹æ³•ç”¨äºä¸ºæ‚¨è®°ä½ `apikey`ã€‚

:::note
åœ¨ä»»ä½•å‘½ä»¤ä¸­ä½¿ç”¨ `--apikey=********` æ¥è¦†ç›–å®ƒ
:::

**å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:**

`--local` è¿™å°†åœ¨æœ¬åœ°ä»“åº“ä¸­å­˜å‚¨æ‚¨çš„ **apikey** å¹¶å°†å…¶æ·»åŠ åˆ° git ignoreã€‚

## **Doctor**

`npx @capgo/cli doctor`

ç”¨äºæ£€æŸ¥æ‚¨çš„ Capgo åŒ…æ˜¯å¦æ˜¯æœ€æ–°ç‰ˆæœ¬çš„å‘½ä»¤ã€‚

æ­¤å‘½ä»¤å¯¹äºé”™è¯¯æŠ¥å‘Šä¹Ÿå¾ˆæœ‰ç”¨ã€‚

## App

### **Add**

`npx @capgo/cli app add [appId]`

`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

> ğŸ’¡ å¦‚æœæœªæä¾›,æ‰€æœ‰é€‰é¡¹å°†ä»æ‚¨çš„é…ç½®ä¸­æ¨æ–­ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--icon [/path/to/my/icon]` åœ¨ Capgo Web åº”ç”¨ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰å›¾æ ‡ã€‚
* `--name [test]` åœ¨åˆ—è¡¨ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰åç§°ã€‚
* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚
* `--retention [retention]` åº”ç”¨ bundle çš„ä¿ç•™æœŸ(å¤©),é»˜è®¤ä¸º 0 = æ— é™ã€‚

`capacitor.config.json` çš„ç¤ºä¾‹,ç”¨äº appId å’Œ AppName,å›¾æ ‡åœ¨ resources æ–‡ä»¶å¤¹ä¸­æ¨æ–­

```json
{
  "appId": "ee.forgr.capacitor_go",
  "appName": "Capgo",
  "webDir": "dist"
}
```

### **Set**

`npx @capgo/cli app set [appId]`

`[appId]` æ˜¯æ‚¨çš„åº”ç”¨ ID,æ ¼å¼åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--icon [/path/to/my/icon]` åœ¨ Capgo Web åº”ç”¨ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰å›¾æ ‡ã€‚
* `--name [test]` åœ¨åˆ—è¡¨ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰åç§°ã€‚
* `--retention [retention]` åº”ç”¨ bundle çš„ä¿ç•™æœŸ(å¤©),é»˜è®¤ä¸º 0 = æ— é™ã€‚
* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚

### **List**

`npx @capgo/cli app list [appId]`

`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚

### **Delete**

`npx @capgo/cli app delete [appId]`

`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚
* `--bundle` å¸¦ç‰ˆæœ¬å·å°†ä»…åˆ é™¤æ­¤ç‰ˆæœ¬ã€‚

### Debug

`npx @capgo/cli app debug [appId]`

`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚
* `--device` å¸¦æ‚¨æƒ³è¦è°ƒè¯•çš„ç‰¹å®šè®¾å¤‡

### Setting

`npx @capgo/cli app setting [path]`

ç¼–è¾‘ Capacitor é…ç½®ã€‚

`[path]` - æ‚¨æƒ³è¦æ›´æ”¹çš„è®¾ç½®è·¯å¾„ã€‚ä¾‹å¦‚,è¦æ›´æ”¹ `appId`,æä¾› `appId`ã€‚
å¦‚æœæ‚¨å¸Œæœ›åœ¨ `capacitor-updater` ä¸­ç¦ç”¨è‡ªåŠ¨æ›´æ–°,æä¾› `plugins.CapacitorUpdater.autoUpdate`

æ‚¨å¿…é¡»æä¾› `--string` æˆ– `--bool` ä¹‹ä¸€!

é€‰é¡¹:
 - `--string <string>` - å°†è®¾ç½®è®¾ä¸ºå­—ç¬¦ä¸²
 - `--bool <true | false>` - å°†è®¾ç½®è®¾ä¸ºå¸ƒå°”å€¼

## Bundle

### Upload

`npx @capgo/cli bundle upload [appId]`

`[appId]` æ˜¯æ‚¨çš„åº”ç”¨ ID,æ ¼å¼åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--apikey <apikey>` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚
* `--path <path>` è¦ä¸Šä¼ çš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
* `--channel <channel>` è¦é“¾æ¥åˆ°çš„é¢‘é“ã€‚
* `--external <url>` é“¾æ¥åˆ°å¤–éƒ¨ URL è€Œä¸æ˜¯ä¸Šä¼ åˆ° Capgo Cloudã€‚
* `--iv-session-key <key>` ä¸ºå¤–éƒ¨ bundle URL è®¾ç½® IV å’Œä¼šè¯å¯†é’¥ã€‚
* `--s3-endpoint <s3Endpoint>` S3 ç«¯ç‚¹çš„ URLã€‚ä¸é€‚ç”¨äºéƒ¨åˆ†ä¸Šä¼ æˆ–å¤–éƒ¨é€‰é¡¹ã€‚
* `--s3-region <region>` æ‚¨çš„ S3 å­˜å‚¨æ¡¶çš„åŒºåŸŸã€‚
* `--s3-apikey <apikey>` æ‚¨çš„ S3 ç«¯ç‚¹çš„ API å¯†é’¥ã€‚
* `--s3-apisecret <apisecret>` æ‚¨çš„ S3 ç«¯ç‚¹çš„ API å¯†é’¥ã€‚
* `--s3-bucket-name <bucketName>` æ‚¨çš„ AWS S3 å­˜å‚¨æ¡¶çš„åç§°ã€‚
* `--s3-port <port>` æ‚¨çš„ S3 ç«¯ç‚¹çš„ç«¯å£ã€‚
* `--no-s3-ssl` ç¦ç”¨ S3 ä¸Šä¼ çš„ SSLã€‚
* `--key <key>` å…¬å…±ç­¾åå¯†é’¥çš„è‡ªå®šä¹‰è·¯å¾„(v1 ç³»ç»Ÿ)ã€‚
* `--key-data <keyData>` å…¬å…±ç­¾åå¯†é’¥(v1 ç³»ç»Ÿ)ã€‚
* `--key-v2 <key>` ç§æœ‰ç­¾åå¯†é’¥çš„è‡ªå®šä¹‰è·¯å¾„(v2 ç³»ç»Ÿ)ã€‚
* `--key-data-v2 <keyData>` ç§æœ‰ç­¾åå¯†é’¥(v2 ç³»ç»Ÿ)ã€‚
* `--bundle-url` å°† bundle URL æ‰“å°åˆ° stdoutã€‚
* `--no-key` å¿½ç•¥ç­¾åå¯†é’¥å¹¶å‘é€æ˜æ–‡æ›´æ–°ã€‚
* `--no-code-check` å¿½ç•¥æ£€æŸ¥æºä»£ç ä¸­æ˜¯å¦è°ƒç”¨äº† notifyAppReady() ä»¥åŠæ ¹æ–‡ä»¶å¤¹ä¸­æ˜¯å¦å­˜åœ¨ç´¢å¼•ã€‚
* `--display-iv-session` åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºç”¨äºåŠ å¯†æ›´æ–°çš„ IV å’Œä¼šè¯å¯†é’¥ã€‚
* `--bundle <bundle>` è¦ä¸Šä¼ çš„ bundle çš„ç‰ˆæœ¬å·ã€‚
* `--min-update-version <minUpdateVersion>` æ›´æ–°åˆ°æ­¤ç‰ˆæœ¬æ‰€éœ€çš„æœ€ä½ç‰ˆæœ¬ã€‚ä»…åœ¨é¢‘é“ä¸­ç¦ç”¨è‡ªåŠ¨æ›´æ–°è®¾ç½®ä¸º metadata æ—¶ä½¿ç”¨ã€‚
* `--auto-min-update-version` æ ¹æ®åŸç”ŸåŒ…è®¾ç½®æœ€å°æ›´æ–°ç‰ˆæœ¬ã€‚
* `--ignore-metadata-check` ä¸Šä¼ æ—¶å¿½ç•¥å…ƒæ•°æ®(node_modules)æ£€æŸ¥ã€‚
* `--ignore-checksum-check` ä¸Šä¼ æ—¶å¿½ç•¥æ ¡éªŒå’Œæ£€æŸ¥ã€‚
* `--timeout <timeout>` ä¸Šä¼ è¿‡ç¨‹çš„è¶…æ—¶æ—¶é—´(ç§’)ã€‚
* `--delta` ä¸å®Œæ•´ bundle ä¸€èµ·ä¸Šä¼ å·®å¼‚æ–‡ä»¶(æ—§æ ‡å¿— - ä¸ `--partial` ç›¸åŒ)ã€‚
* `--tus` ä½¿ç”¨ tus åè®®ä¸Šä¼  bundleã€‚
* `--multipart` ä½¿ç”¨ multipart åè®®å°†æ•°æ®ä¸Šä¼ åˆ° S3,å·²å¼ƒç”¨,è¯·æ”¹ç”¨ TUSã€‚
* `--encrypted-checksum <encryptedChecksum>` åŠ å¯†çš„æ ¡éªŒå’Œ(ç­¾å)ã€‚ä»…åœ¨ä¸Šä¼ å¤–éƒ¨ bundle æ—¶ä½¿ç”¨ã€‚
* `--package-json <packageJson>` package.json çš„è·¯å¾„ã€‚å¯¹å•ä½“ä»“åº“æœ‰ç”¨ã€‚
* `--auto-set-bundle` åœ¨ capacitor.config.json ä¸­è®¾ç½® bundleã€‚
* `--node-modules <nodeModules>` node_modules çš„è·¯å¾„åˆ—è¡¨ã€‚å¯¹å•ä½“ä»“åº“æœ‰ç”¨(é€—å·åˆ†éš”,ä¾‹å¦‚:../../node_modules,./node_modules)

> â­ï¸ å¤–éƒ¨é€‰é¡¹æœ‰åŠ©äºè§£é” 2 ç§æƒ…å†µ:æ³¨é‡éšç§çš„ä¼ä¸š,ä¸å‘ç¬¬ä¸‰æ–¹å‘é€ä»£ç ,ä»¥åŠå¤§äº 200 MB çš„åº”ç”¨ã€‚é€šè¿‡æ­¤è®¾ç½®,Capgo ä»…å­˜å‚¨ zip çš„é“¾æ¥å¹¶å°†é“¾æ¥å‘é€åˆ°æ‰€æœ‰åº”ç”¨ã€‚

> ğŸ‘€ Capgo Cloud ä»ä¸æŸ¥çœ‹é“¾æ¥ä¸­çš„å†…å®¹(ç”¨äºå¤–éƒ¨é€‰é¡¹),æˆ–å­˜å‚¨æ—¶çš„ä»£ç ã€‚

> ğŸ”‘ æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨åŠ å¯†æ·»åŠ ç¬¬äºŒå±‚å®‰å…¨æ€§,ç„¶å Capgo å°†æ— æ³•æŸ¥çœ‹æˆ–ä¿®æ”¹ä»»ä½•å†…å®¹,å®ƒå˜æˆ"æ— éœ€ä¿¡ä»»"ã€‚

`package.json` çš„ç‰ˆæœ¬ç¤ºä¾‹

```json
{
  "version": "1.0.2"
}
```

> â›” ç‰ˆæœ¬åº”è¯¥å¤§äº "0.0.0"ã€‚

> ğŸ’¡ æ¯æ¬¡å‘é€æ—¶ä¸è¦å¿˜è®°æ›´æ–°ç‰ˆæœ¬å·,å‡ºäºå®‰å…¨åŸå› ,ç‰ˆæœ¬å·ä¸èƒ½è¢«è¦†ç›–æˆ–åœ¨åˆ é™¤åé‡å¤ä½¿ç”¨ã€‚

### **List**

`npx @capgo/cli bundle list [appId]`

`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚

### **Delete**

`npx @capgo/cli bundle delete [appId]`

`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚
* `--bundle` å¸¦ç‰ˆæœ¬å·å°†ä»…åˆ é™¤æ­¤ç‰ˆæœ¬ã€‚

### Cleanup

åœ¨ä¸»ç‰ˆæœ¬çš„ SemVer èŒƒå›´å†…åˆ° Cloud

`npx @capgo/cli bundle cleanup [appId] --bundle=[majorVersion] --keep=[numberToKeep]`

`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚
* `--bundle [majorVersion]` æ‚¨å¸Œæœ›åˆ é™¤ä¹‹å‰åŒ…çš„ç‰ˆæœ¬,å®ƒå°†ä¿ç•™æœ€åä¸€ä¸ª + `numberToKeep`ã€‚
* `--keep [numberToKeep]` æ‚¨å¸Œæœ›ä¿ç•™çš„åŒ…æ•°é‡(é»˜è®¤ 4)ã€‚

ä¾‹å¦‚:å¦‚æœæ‚¨æœ‰ä» 10.0.1 åˆ° 10.0.11 çš„ 10 ä¸ªç‰ˆæœ¬,å¹¶ä¸”æ‚¨ä½¿ç”¨ `npx @capgo/cli cleanup [appId] --bundle=10.0.0`,å®ƒå°†åˆ é™¤ 10.0.1 åˆ° 10.0.6ã€‚å°†ä¿ç•™ 10.0.7 åˆ° 10.0.11ã€‚

å¦‚æœæ‚¨æ€»å…±æœ‰ 20 ä¸ªç‰ˆæœ¬,å¹¶ä¸”æ‚¨ä¸æä¾› bundle å·,åƒè¿™æ ·:`npx @capgo/cli cleanup [appId] --keep=2`,å®ƒå°†åˆ é™¤ 18 ä¸ªç‰ˆæœ¬,å¹¶ä¿ç•™æœ€å 2 ä¸ªã€‚

> æ­¤å‘½ä»¤å°†è¦æ±‚ç¡®è®¤,å®ƒæ˜¾ç¤ºä¸€ä¸ªè¡¨æ ¼,è¯´æ˜å®ƒå°†ä¿ç•™ä»€ä¹ˆå’Œåˆ é™¤ä»€ä¹ˆã€‚

:::note
æ­¤å‘½ä»¤å°†å¿½ç•¥å½“å‰åœ¨ä»»ä½•é¢‘é“ä¸­ä½¿ç”¨çš„ bundleã€‚
:::

### **Encrypt**

> **è­¦å‘Š**: æ­¤å‘½ä»¤å·²å¼ƒç”¨,å°†åœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­åˆ é™¤ã€‚è¯·ä½¿ç”¨æ–°çš„åŠ å¯†ç³»ç»Ÿã€‚
`npx @capgo/cli bundle encrypt [path/to/zip]`

æ­¤å‘½ä»¤åœ¨æ‚¨ä½¿ç”¨å¤–éƒ¨æºå­˜å‚¨ä»£ç æˆ–ç”¨äºæµ‹è¯•ç›®çš„æ—¶ä½¿ç”¨ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

`--key [/path/to/my/private_key]` æ‚¨çš„ç§é’¥çš„è·¯å¾„ã€‚
`--key-data [privateKey]` ç§é’¥æ•°æ®,å¦‚æœæ‚¨æƒ³è¦å†…è”ä½¿ç”¨ã€‚
è¯¥å‘½ä»¤å°†æ‰“å°æ‚¨çš„ `ivSessionKey` å¹¶ç”Ÿæˆä¸€ä¸ªåŠ å¯†çš„ zip,ä»¥ä¸ upload å‘½ä»¤æˆ– decrypt å‘½ä»¤ä¸€èµ·ä½¿ç”¨ã€‚

### **Encrypt V2**

`npx @capgo/cli bundle encrypt [path/to/zip] [checksum]`

æ­¤å‘½ä»¤åœ¨æ‚¨ä½¿ç”¨å¤–éƒ¨æºå­˜å‚¨ä»£ç æˆ–ç”¨äºæµ‹è¯•ç›®çš„æ—¶ä½¿ç”¨ã€‚
æ ¡éªŒå’Œæ˜¯ bundle çš„ sha256(ç”± --key-v2 ç”Ÿæˆ),ç”¨äºåœ¨è§£å¯†åéªŒè¯æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚
å®ƒå°†ä½¿ç”¨ç§é’¥åŠ å¯†å¹¶ä¸ bundle ä¸€èµ·å‘é€ã€‚
åœ¨åŠ å¯† v2 ä¸­,æ ¡éªŒå’Œå‡çº§ä¸º bundle çš„"ç­¾å"ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

`--key [/path/to/my/private_key]` æ‚¨çš„ç§é’¥çš„è·¯å¾„ã€‚
`--key-data [privateKey]` ç§é’¥æ•°æ®,å¦‚æœæ‚¨æƒ³è¦å†…è”ä½¿ç”¨ã€‚
`--json` ä»¥ json æ ¼å¼è¾“å‡ºä¿¡æ¯ã€‚
è¯¥å‘½ä»¤å°†æ‰“å°æ‚¨çš„ `ivSessionKey` å¹¶ç”Ÿæˆä¸€ä¸ªåŠ å¯†çš„ zip,ä»¥ä¸ upload å‘½ä»¤æˆ– decrypt å‘½ä»¤ä¸€èµ·ä½¿ç”¨ã€‚

### **Decrypt**

`npx @capgo/cli bundle decrypt [path/to/zip] [ivSessionKey]`

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

`--key [/path/to/my/private_key]` æ‚¨çš„ç§é’¥çš„è·¯å¾„ã€‚

`--key-data [privateKey]` ç§é’¥æ•°æ®,å¦‚æœæ‚¨æƒ³è¦å†…è”ä½¿ç”¨ã€‚æ­¤å‘½ä»¤ä¸»è¦ç”¨äºæµ‹è¯•ç›®çš„,å®ƒå°†è§£å¯† zip å¹¶åœ¨æ§åˆ¶å°ä¸­æ‰“å° base64 è§£å¯†çš„ä¼šè¯å¯†é’¥ã€‚

### **Decrypt V2**

`npx @capgo/cli bundle decryptV2 [path/to/zip]  [ivSessionKey]`

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

`--key [/path/to/my/private_key]` æ‚¨çš„ç§é’¥çš„è·¯å¾„ã€‚
`--key-data [privateKey]` ç§é’¥æ•°æ®,å¦‚æœæ‚¨æƒ³è¦å†…è”ä½¿ç”¨ã€‚æ­¤å‘½ä»¤ä¸»è¦ç”¨äºæµ‹è¯•ç›®çš„,å®ƒå°†è§£å¯† zip å¹¶åœ¨æ§åˆ¶å°ä¸­æ‰“å° base64 è§£å¯†çš„ä¼šè¯å¯†é’¥ã€‚
`--checksum [checksum]` æ–‡ä»¶çš„æ ¡éªŒå’Œ,å®ƒå°†åœ¨è§£å¯†åéªŒè¯æ ¡éªŒå’Œã€‚

### **Zip**

`npx @capgo/cli bundle zip [appId]`

`[appId]` æ˜¯æ‚¨çš„åº”ç”¨ ID,æ ¼å¼åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--path [/path/to/my/bundle]` ä¸Šä¼ ç‰¹å®šæ–‡ä»¶å¤¹ã€‚
* `--bundle [1.0.0]` è®¾ç½®æ–‡ä»¶åçš„ bundle ç‰ˆæœ¬å·ã€‚
* `--name [myapp]` è¦†ç›–æ–‡ä»¶åã€‚
* `--json` ä»¥ json æ ¼å¼è¾“å‡ºä¿¡æ¯ã€‚
* `--no-code-check` å¿½ç•¥ä»£ç æ£€æŸ¥å¹¶æ— è®ºå¦‚ä½•å‘é€ bundleã€‚
* `--key-v2` ä½¿ç”¨æ–°çš„åŠ å¯†ç³»ç»Ÿã€‚è¿™æ˜¯å¿…éœ€çš„,å› ä¸ºæ–°çš„åŠ å¯†ç³»ç»Ÿä½¿ç”¨æ›´å¥½çš„æ ¡éªŒå’Œæ¥éªŒè¯æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚

### **Compatibility**

`npx @capgo/cli bundle compatibility [appId] -c [channelId]`

`[appId]` æ˜¯æ‚¨çš„åº”ç”¨ ID,æ ¼å¼åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚
`[channelId]` æ‚¨çš„æ–°é¢‘é“çš„åç§°ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚
* `--text` åœ¨è¡¨æ ¼ä¸­ä½¿ç”¨æ–‡æœ¬è€Œä¸æ˜¯è¡¨æƒ…ç¬¦å·
* `--channel [channel]` è¦æ£€æŸ¥å…¼å®¹æ€§çš„é¢‘é“ã€‚
* `--package-json <packageJson>` package.json çš„è·¯å¾„ã€‚å¯¹å•ä½“ä»“åº“æœ‰ç”¨
* `--node-modules <nodeModules>` node_modules çš„è·¯å¾„åˆ—è¡¨ã€‚å¯¹å•ä½“ä»“åº“æœ‰ç”¨(é€—å·åˆ†éš”,ä¾‹å¦‚:../../node_modules,./node_modules)

## Channel

### **Add**

`npx @capgo/cli channel add [channelId] [appId]`

`[channelId]` æ‚¨çš„æ–°é¢‘é“çš„åç§°ã€‚`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

### **Delete**

`npx @capgo/cli channel delete [channelId] [appId]`

`[channelId]` æ‚¨æƒ³è¦åˆ é™¤çš„é¢‘é“çš„åç§°ã€‚`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

### **List**

`npx @capgo/cli channel list [appId]`

`[appId]` æ‚¨çš„åº”ç”¨ ID,æ ¼å¼ `com.test.app` åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚

### **Set**

`npx @capgo/cli channel set [channelId] [appId]`

`[appId]` æ˜¯æ‚¨çš„åº”ç”¨ ID,æ ¼å¼åœ¨[è¿™é‡Œ](https://capacitorjs.com/docs/cli/commands/init/)æœ‰è¯´æ˜ã€‚

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

* `--bundle [1.2.3]` æ‚¨å·²å‘é€åˆ°äº‘çš„åº”ç”¨ bundle,å°†å…¶é“¾æ¥åˆ°é¢‘é“ã€‚
* `--latest` ä» `package.json:version` è·å– bundle ç‰ˆæœ¬,ä¸èƒ½ä¸ `--bundle` ä¸€èµ·ä½¿ç”¨ã€‚
* `--state [ normal | default ]` è®¾ç½®é¢‘é“çŠ¶æ€,å¯ä»¥æ˜¯ `normal` æˆ– `default`ã€‚ä¸€ä¸ªé¢‘é“éœ€è¦æ˜¯ `default`ã€‚
* `--downgrade` å…è®¸é¢‘é“å‘è®¾å¤‡å‘é€é™çº§ç‰ˆæœ¬ã€‚
* `--no-downgrade` ä¸å…è®¸é¢‘é“å‘è®¾å¤‡å‘é€é™çº§ç‰ˆæœ¬ã€‚
* `--upgrade` å…è®¸é¢‘é“å‘è®¾å¤‡å‘é€å‡çº§(ä¸»è¦)ç‰ˆæœ¬ã€‚
* `--no-upgrade` ä¸å…è®¸é¢‘é“å‘è®¾å¤‡å‘é€å‡çº§(ä¸»è¦)ç‰ˆæœ¬ã€‚
* `--ios` å…è®¸é¢‘é“å‘ iOS è®¾å¤‡å‘é€ç‰ˆæœ¬ã€‚
* `--no-ios` ä¸å…è®¸é¢‘é“å‘ iOS è®¾å¤‡å‘é€ç‰ˆæœ¬ã€‚
* `--android` å…è®¸é¢‘é“å‘ Android è®¾å¤‡å‘é€ç‰ˆæœ¬ã€‚
* `--no-android` ä¸å…è®¸é¢‘é“å‘ Android è®¾å¤‡å‘é€ç‰ˆæœ¬ã€‚
* `--self-assign` å…è®¸è®¾å¤‡è‡ªè¡Œåˆ†é…åˆ°æ­¤é¢‘é“ã€‚
* `--no-self-assign` ä¸å…è®¸è®¾å¤‡è‡ªè¡Œåˆ†é…åˆ°æ­¤é¢‘é“ã€‚
* `--disable-auto-update STRATEGY` ä¸ºæ­¤é¢‘é“ç¦ç”¨è‡ªåŠ¨æ›´æ–°ç­–ç•¥ã€‚å¯èƒ½çš„é€‰é¡¹æœ‰:majorã€minorã€metadataã€noneã€‚
* `--apikey [key]` ç”¨äºé“¾æ¥åˆ°æ‚¨è´¦æˆ·çš„ API å¯†é’¥ã€‚

## ç¦ç”¨æ›´æ–°ç­–ç•¥

æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å¤„ç†ç¦ç”¨è¿‡æ—§ç‰ˆæœ¬çš„æ›´æ–°ã€‚\
Capgo æ— æ³•æ›´æ–°åŸç”Ÿä»£ç ,å› æ­¤ä»å…·æœ‰æ—§åŸç”Ÿä»£ç çš„ç‰ˆæœ¬æ›´æ–°åˆ°å…·æœ‰æ›´æ–°åŸç”Ÿä»£ç çš„ç‰ˆæœ¬åº”è¯¥æ˜¯ä¸å¯èƒ½çš„ã€‚
æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å®ç°è¿™ä¸€ç‚¹ã€‚

é¦–å…ˆæ˜¯ `major` ç­–ç•¥ã€‚å®ƒé˜²æ­¢ä» `0.0.0` -> `1.0.0` çš„æ›´æ–°ã€‚ä¸»ç‰ˆæœ¬æ˜¯çªå‡ºæ˜¾ç¤ºçš„æ•°å­—(**1**.0.0 å’Œ **0**.0.0)ã€‚\
å…¶æ¬¡æ˜¯ `minor` ç­–ç•¥ã€‚å®ƒé˜²æ­¢ä» `0.0.0` -> `1.1.0` æˆ–ä» `1.1.0` åˆ° `1.2.0` çš„æ›´æ–°ã€‚
**æ³¨æ„** æ­¤ç­–ç•¥ä¸ä¼šé˜²æ­¢ä» `0.1.0` -> `1.1.0` çš„æ›´æ–°

ç¬¬ä¸‰æ˜¯ `patch` ç­–ç•¥ã€‚å®ƒä½œä¸ºä¸€ç§éå¸¸ä¸¥æ ¼çš„æ¨¡å¼æ·»åŠ åˆ° capgo ä¸­ã€‚é™¤éæ‚¨å®Œå…¨ç†è§£å…¶å·¥ä½œåŸç†,å¦åˆ™ä¸å»ºè®®ä½¿ç”¨ã€‚
ä¸ºäº†æ¥å—æ›´æ–°,å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:
 - æ–°ç‰ˆæœ¬å’Œæ—§ç‰ˆæœ¬ä¹‹é—´çš„ä¸»ç‰ˆæœ¬ç›¸åŒ
 - æ–°ç‰ˆæœ¬å’Œæ—§ç‰ˆæœ¬ä¹‹é—´çš„æ¬¡ç‰ˆæœ¬ç›¸åŒ
 - æ–°ç‰ˆæœ¬çš„è¡¥ä¸å¤§äºæ—§ç‰ˆæœ¬çš„è¡¥ä¸

ä»¥ä¸‹æ˜¯å…è®¸æˆ–æ‹’ç»æ›´æ–°çš„åœºæ™¯ç¤ºä¾‹

 - 0.0.311 -> 0.0.314 âœ…
 - 0.0.0 -> 0.0.314 âœ…
 - 0.0.316 -> 0.0.314 âŒ
 - 0.1.312 -> 0.0.314 âŒ
 - 1.0.312 -> 0.0.314 âŒ


æœ€åæ˜¯æœ€å¤æ‚çš„ç­–ç•¥ã€‚`metadata` ç­–ç•¥ã€‚\
é¦–å…ˆæ‚¨éœ€è¦çŸ¥é“,åœ¨æ‚¨å¯ç”¨å®ƒå,æ›´æ–°æœ€åˆ**å°†ä¼š**å¤±è´¥,å› ä¸ºé¢‘é“ç¼ºå°‘æ‰€éœ€çš„å…ƒæ•°æ®ã€‚\
å¦‚æœé¢‘é“ç¼ºå°‘å…ƒæ•°æ®,æ‚¨å°†çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ¶ˆæ¯:
<img src="/fail-metadata.webp" alt="æ‰¾ä¸åˆ°å…ƒæ•°æ®"/>

å¦‚æœæ‚¨çœ‹åˆ°ç±»ä¼¼çš„å†…å®¹,æ‚¨å°±çŸ¥é“å¿…é¡»è½¬åˆ°å¤±è´¥é¢‘é“çš„å½“å‰ bundle å¹¶è®¾ç½®å…ƒæ•°æ®ã€‚\
é¦–å…ˆ,æ‰¾å‡ºå“ªä¸ªé¢‘é“å¤±è´¥äº†ã€‚æ‚¨å¯ä»¥é€šè¿‡æŸ¥çœ‹ `misconfigured` åˆ—æ¥åšåˆ°è¿™ä¸€ç‚¹
<img src="/misconfigured-table.webp" alt="é…ç½®é”™è¯¯çš„è¡¨æ ¼"/>

ç„¶åè½¬åˆ°å¤±è´¥çš„é¢‘é“å¹¶ç‚¹å‡» `Bundle number`ã€‚è¿™åº”è¯¥ä¼šå¸¦æ‚¨åˆ° bundle é¡µé¢ã€‚
<img src="/fail-channel-show.webp" alt="å®šä½å¤±è´¥çš„é¢‘é“"/>

åˆ°è¾¾é‚£é‡Œå,å¡«å†™ `Minimal update version` å­—æ®µã€‚è¿™åº”è¯¥æ˜¯ä¸€ä¸ª [semver](https://devhints.io/semver/)ã€‚\
å¦‚æœæ‚¨ä¼ é€’çš„å€¼ä¸æ˜¯ semver,æ‚¨å°†æ”¶åˆ°é”™è¯¯,ä½†å¦‚æœä¸€åˆ‡é¡ºåˆ©,æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹:
<img src="/set-min-update-version.webp" alt="è®¾ç½®æœ€å°ç‰ˆæœ¬"/>

ç°åœ¨,æ‚¨å¯èƒ½ä¸å¸Œæœ›æ¯æ¬¡æ›´æ–°æ—¶éƒ½æ‰‹åŠ¨è®¾ç½®æ­¤æ•°æ®ã€‚å¹¸è¿çš„æ˜¯,CLI å°†é˜»æ­¢æ‚¨åœ¨æ²¡æœ‰æ­¤å…ƒæ•°æ®çš„æƒ…å†µä¸‹å‘é€æ›´æ–°
<img src="/cli-fail-no-metadata.webp" alt="CLI å¤±è´¥æ— å…ƒæ•°æ®"/>

è¦åœ¨ä½¿ç”¨ `metadata` é€‰é¡¹æ—¶æ­£ç¡®ä¸Šä¼  bundle,æ‚¨éœ€è¦ä¼ é€’å¸¦æœ‰æœ‰æ•ˆ semver çš„ `--min-update-version`ã€‚ç±»ä¼¼è¿™æ ·:
<img src="/cli-upload-with-metadata.webp" alt="CLI ä¸Šä¼ å¸¦å…ƒæ•°æ®"/>

`--min-update-version` ä¸æ˜¯è¿›è¡Œå…¼å®¹æ€§æ£€æŸ¥çš„å”¯ä¸€æ–¹æ³•ã€‚
è¿˜å­˜åœ¨ `--auto-min-update-version`ã€‚å®ƒçš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ã€‚

é¦–å…ˆ,å®ƒæŸ¥çœ‹å½“å‰ä¸Šä¼ åˆ°é¢‘é“çš„ç‰ˆæœ¬ã€‚å®ƒåƒ `bundle compatibility` å‘½ä»¤ä¸€æ ·æ£€æŸ¥å…¼å®¹æ€§ã€‚
å…¶æ¬¡,å¦‚æœæ–°ç‰ˆæœ¬ 100% å…¼å®¹,å®ƒä¼šé‡ç”¨é¢‘é“ä¸­æœ€æ–°ç‰ˆæœ¬çš„ `min_update_version`ã€‚
å¦‚æœä¸å…¼å®¹,åˆ™å°† `min_update_version` è®¾ç½®ä¸ºæ–°ä¸Šä¼ ç‰ˆæœ¬çš„ bundle å·ã€‚

ä½¿ç”¨æ­¤é€‰é¡¹æ—¶,æ‚¨å°†å§‹ç»ˆè·å¾—æœ‰å…³ `min_update_version` çš„ä¿¡æ¯ã€‚å®ƒçœ‹èµ·æ¥åƒè¿™æ ·:
<img src="/min_update_version_info.webp" alt="æœ€å°æ›´æ–°ç‰ˆæœ¬"/>

å¦‚æœæ–°ç‰ˆæœ¬ä¸å…¼å®¹,å®ƒåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·
<img src="/min_update_version_not_compatible.webp" alt="æœ€å°æ›´æ–°ç‰ˆæœ¬ä¸å…¼å®¹"/>

## ç«¯åˆ°ç«¯åŠ å¯†(æ— éœ€ä¿¡ä»»)

Capgo æ”¯æŒç«¯åˆ°ç«¯åŠ å¯†,è¿™æ„å‘³ç€æ‚¨çš„ bundle(ä»£ç )åœ¨å‘é€åˆ°äº‘ä¹‹å‰è¢«åŠ å¯†,å¹¶åœ¨è®¾å¤‡ä¸Šè§£å¯†ã€‚ä¸ºæ­¤,æ‚¨éœ€è¦ç”Ÿæˆä¸€ä¸ª RSA å¯†é’¥å¯¹,æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆå®ƒã€‚

åŠ å¯†ç³»ç»Ÿæ˜¯ RSA å’Œ AES çš„ç»„åˆ,RSA å¯†é’¥ç”¨äºåŠ å¯† AES å¯†é’¥,AES å¯†é’¥ç”¨äºåŠ å¯†æ–‡ä»¶ã€‚

æœ‰å…³åŠ å¯†ç³»ç»Ÿçš„æ›´å¤šä¿¡æ¯,è¯·å‚è§ä¸‹æ–‡ã€‚

<img src="/crypto_explained.webp" alt="åŠ å¯†å·¥ä½œåŸç†"/>

åŠ å¯†æ¶æ„

### ä¸ºæ‚¨çš„åº”ç”¨åˆ›å»ºå¯†é’¥

`npx @capgo/cli key create`

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:`--force` æ¥è¦†ç›–ç°æœ‰å¯†é’¥ã€‚æ­¤å‘½ä»¤å°†ä¸ºæ‚¨åœ¨åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ªå¯†é’¥å¯¹,å¹¶è¦æ±‚æ‚¨å°†ç§é’¥ä¿å­˜åœ¨å®‰å…¨çš„åœ°æ–¹ã€‚å»ºè®®ä¸è¦å°†ç§é’¥æäº¤åˆ° git,ä¹Ÿä¸è¦ä¸ä»»ä½•äººåˆ†äº«ã€‚

> åœ¨æœ¬åœ°æµ‹è¯•å,ä»é…ç½®æ–‡ä»¶ä¸­åˆ é™¤å¯†é’¥,å¹¶ä½¿ç”¨ `key save` åœ¨ CI æ­¥éª¤ä¸­æ·»åŠ å®ƒ

### åœ¨åº”ç”¨é…ç½®ä¸­ä¿å­˜å¯†é’¥

`npx @capgo/cli key save`

å¯é€‰åœ°,æ‚¨å¯ä»¥æä¾›:

`--key [/path/to/my/public_key]` æ‚¨çš„å…¬é’¥æ–‡ä»¶çš„è·¯å¾„ã€‚

`--key-data [publicKey]` å…¬é’¥æ•°æ®,å¦‚æœæ‚¨æƒ³è¦å†…è”ä½¿ç”¨ã€‚å¦‚æœæ‚¨éµå¾ªäº†å»ºè®®å¹¶æ²¡æœ‰åœ¨åº”ç”¨é…ç½®ä¸­æäº¤å¯†é’¥,åˆ™æ­¤å‘½ä»¤å¾ˆæœ‰ç”¨ã€‚

## CI é›†æˆ

ä¸ºäº†è‡ªåŠ¨åŒ–æ‚¨çš„å·¥ä½œ,æˆ‘å»ºè®®æ‚¨è®© GitHub action å®Œæˆæ¨é€åˆ°æˆ‘ä»¬æœåŠ¡å™¨çš„å·¥ä½œ

[GitHub action æ•™ç¨‹](https://capgo.app/blog/automatic-build-and-release-with-github-actions/)

## æˆ‘ä»¬çš„æ¼”ç¤ºåº”ç”¨

[GitHub - Cap-go/demo-app](https://github.com/Cap-go/demo-app/)

ä¸è¦å¿˜è®°ä½¿ç”¨æ‚¨çš„ API å¯†é’¥é…ç½® CI ç¯å¢ƒå˜é‡
