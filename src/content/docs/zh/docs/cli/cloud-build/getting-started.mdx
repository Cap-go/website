---
title: å…¥é—¨æŒ‡å—
description: ä½¿ç”¨ Capgo Cloud Build åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªåŸç”Ÿæ„å»º
locale: zh
sidebar:
  order: 1
---

import { Steps, Card, CardGrid } from '@astrojs/starlight/components';

å¼€å§‹ä½¿ç”¨ Capgo Cloud Build,å¹¶åœ¨å‡ åˆ†é’Ÿå†…åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ª iOS æˆ– Android åŸç”Ÿæ„å»ºã€‚

## æ‚¨éœ€è¦å‡†å¤‡çš„å†…å®¹

åœ¨å¼€å§‹ä¹‹å‰,è¯·ç¡®ä¿æ‚¨å…·å¤‡:

- ä¸€ä¸ªèƒ½å¤Ÿåœ¨æœ¬åœ°æˆåŠŸæ„å»ºçš„ Capacitor åº”ç”¨
- å·²å®‰è£… Node.js 20 æˆ–æ›´é«˜ç‰ˆæœ¬
- æ‹¥æœ‰æ´»è·ƒè®¢é˜…çš„ Capgo è´¦æˆ·
- æ‚¨çš„åº”ç”¨å·²åœ¨ Capgo ä¸­æ³¨å†Œ(å¦‚æœè¿˜æ²¡æœ‰,è¯·è¿è¡Œ `npx @capgo/cli@latest app add`)
- **å·²é…ç½®æ„å»ºå‡­è¯**(è¯ä¹¦ã€å¯†é’¥åº“)- è§ä¸‹æ–‡

## ç¬¬ä¸€æ¬¡æ„å»ºä¹‹å‰

<CardGrid>
  <Card title="âš ï¸ é¦–å…ˆè®¾ç½®å‡­è¯" icon="warning">
    **æ„å»ºå‰å¿…éœ€:** æ‚¨å¿…é¡»é…ç½®æ„å»ºå‡­è¯(iOS è¯ä¹¦ã€Android å¯†é’¥åº“)ã€‚

    [è®¾ç½®å‡­è¯ â†’](/docs/cli/cloud-build/credentials/)
  </Card>
</CardGrid>

## å¿«é€Ÿå¼€å§‹

<Steps>

1. **è®¾ç½®æ„å»ºå‡­è¯**

   åœ¨æ„å»ºä¹‹å‰,æ‚¨éœ€è¦åœ¨æœ¬åœ°ä¿å­˜å‡­è¯:

   **iOS:**
   ```bash
   npx @capgo/cli build credentials save \
     --platform ios \
     --certificate ./cert.p12 \
     --p12-password "password" \
     --provisioning-profile ./profile.mobileprovision \
     --apple-key ./AuthKey.p8 \
     --apple-key-id "KEY123" \
     --apple-issuer-id "issuer-uuid" \
     --apple-team-id "team-id"
   ```

   **Android:**
   ```bash
   npx @capgo/cli build credentials save \
     --platform android \
     --keystore ./release.keystore \
     --keystore-alias "my-key" \
     --keystore-key-password "key-pass" \
     --keystore-store-password "store-pass"
   ```

   æŸ¥çœ‹ [å®Œæ•´å‡­è¯æŒ‡å—](/docs/cli/cloud-build/credentials/) äº†è§£è¯¦æƒ…ã€‚

2. **éªŒè¯æœ¬åœ°æ„å»º**

   é¦–å…ˆ,ç¡®ä¿æ‚¨çš„åº”ç”¨èƒ½å¤Ÿåœ¨æœ¬åœ°æ— é”™è¯¯åœ°æ„å»º:

   ```bash
   # æ„å»ºæ‚¨çš„ Web èµ„æº
   npm run build

   # ä¸ Capacitor åŒæ­¥
   npx cap sync

   # æµ‹è¯•æœ¬åœ°æ„å»º(å¯é€‰ä½†æ¨è)
   npx cap open ios    # iOS
   npx cap open android # Android
   ```

3. **ä½¿ç”¨ Capgo è¿›è¡Œèº«ä»½éªŒè¯**

   è®¾ç½®æ‚¨çš„ Capgo API å¯†é’¥(å¦‚æœå°šæœªé…ç½®):

   ```bash
   npx @capgo/cli@latest login
   ```

   æˆ–è®¾ç½®ç¯å¢ƒå˜é‡:
   ```bash
   export CAPGO_TOKEN=your_api_key_here
   ```

4. **è¿è¡Œæ‚¨çš„ç¬¬ä¸€ä¸ªæ„å»º**

   ä» Android debug æ„å»ºå¼€å§‹(æœ€å¿«çš„æµ‹è¯•æ–¹å¼):

   ```bash
   npx @capgo/cli@latest build com.example.app \
     --platform android \
     --build-mode debug
   ```

   æ‚¨å°†çœ‹åˆ°æ„å»ºè¿›åº¦çš„å®æ—¶æ—¥å¿—:
   ```
   âœ” Creating build job...
   âœ” Uploading project (15.2 MB)...
   âœ” Build started

   ğŸ“ Build logs:
   â†’ Installing dependencies...
   â†’ Running Gradle build...
   â†’ Signing APK...
   âœ” Build succeeded in 3m 42s
   ```

5. **æ£€æŸ¥æ„å»ºçŠ¶æ€**

   CLI å°†è‡ªåŠ¨è½®è¯¢å¹¶æ˜¾ç¤ºæ„å»ºçŠ¶æ€ã€‚å®Œæˆå,æ‚¨å°†çœ‹åˆ°:

   - æ„å»ºæ—¶é—´
   - æˆåŠŸ/å¤±è´¥çŠ¶æ€
   - åº”ç”¨å·²æäº¤åˆ° App Store/Play Store(å¦‚æœé…ç½®äº†å‡­è¯)

</Steps>

## ç†è§£æ„å»ºè¿‡ç¨‹

å½“æ‚¨è¿è¡Œæ„å»ºå‘½ä»¤æ—¶,ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µ:

```mermaid
graph LR
    A[æ‚¨çš„æœºå™¨] -->|1. å‹ç¼©é¡¹ç›®| B[æœ¬åœ°ä¸´æ—¶]
    B -->|2. ä¸Šä¼ | C[Capgo Cloud]
    C -->|3. æ„å»º| D[æ„å»ºæœåŠ¡å™¨]
    D -->|4. æ—¥å¿—æµ| A
    D -->|5. æ¸…ç†| E[è‡ªåŠ¨åˆ é™¤]
```

1. **æœ¬åœ°å‡†å¤‡** - æ‚¨çš„é¡¹ç›®è¢«å‹ç¼©(æ’é™¤ `node_modules` å’Œç‚¹æ–‡ä»¶)
2. **ä¸Šä¼ ** - zip æ–‡ä»¶ä¸Šä¼ åˆ°å®‰å…¨çš„äº‘å­˜å‚¨(Cloudflare R2)
3. **æ„å»ºæ‰§è¡Œ** - æ‚¨çš„åº”ç”¨åœ¨ä¸“ç”¨åŸºç¡€è®¾æ–½ä¸Šæ„å»º
4. **æ—¥å¿—æµ** - å®æ—¶æ—¥å¿—é€šè¿‡æœåŠ¡å™¨å‘é€äº‹ä»¶æµå¼ä¼ è¾“åˆ°æ‚¨çš„ç»ˆç«¯
5. **è‡ªåŠ¨æ¸…ç†** - æ„å»ºäº§ç‰©è¢«åˆ é™¤(Android: ç«‹å³,iOS: 24å°æ—¶)

## æ‚¨çš„ç¬¬ä¸€ä¸ªç”Ÿäº§æ„å»º

ä¸€æ—¦éªŒè¯äº†æµç¨‹å¯ä»¥å·¥ä½œ,åˆ›å»ºä¸€ä¸ªç”Ÿäº§æ„å»º:

### Android

```bash
npx @capgo/cli@latest build com.example.app \
  --platform android \
  --build-mode release
```

æ‚¨éœ€è¦å…ˆé…ç½®ç­¾åå‡­è¯ã€‚è¯·å‚é˜… [Android æ„å»ºé…ç½®](/docs/cli/cloud-build/android/)ã€‚

### iOS

```bash
npx @capgo/cli@latest build com.example.app \
  --platform ios \
  --build-mode release
```

iOS æ„å»ºéœ€è¦ç­¾åè¯ä¹¦å’Œé…ç½®æ–‡ä»¶ã€‚è¯·å‚é˜… [iOS æ„å»ºé…ç½®](/docs/cli/cloud-build/ios/)ã€‚

## æ„å»ºå†…å®¹

**é‡è¦:** Capgo Cloud Build ä»…æ„å»ºåº”ç”¨çš„**åŸç”Ÿéƒ¨åˆ†**(iOS å’Œ Android åŸç”Ÿä»£ç )ã€‚

æ‚¨éœ€è¦è´Ÿè´£:
- æ„å»º Web èµ„æº (`npm run build`)
- åœ¨æ„å»ºå‰è¿è¡Œ `npx cap sync`
- ç¡®ä¿æ‰€æœ‰ä¾èµ–é¡¹éƒ½åœ¨ `package.json` ä¸­

æˆ‘ä»¬å¤„ç†:
- åŸç”Ÿ iOS ç¼–è¯‘(Xcodeã€Fastlane)
- åŸç”Ÿ Android ç¼–è¯‘(Gradle)
- ä»£ç ç­¾å
- åº”ç”¨å•†åº—æäº¤(å¦‚æœé…ç½®)

## æ„å»ºæ—¶é—´å’Œè´¹ç”¨

æ„å»ºæ—¶é—´ä»å¼€å§‹åˆ°å®Œæˆè¿›è¡Œæµ‹é‡:

- **Android**: é€šå¸¸ 3-5 åˆ†é’Ÿ(1Ã— è®¡è´¹å€æ•°)
- **iOS**: é€šå¸¸ 5-10 åˆ†é’Ÿ(2Ã— è®¡è´¹å€æ•°,å› ä¸º Mac ç¡¬ä»¶æˆæœ¬)

æ‚¨åªéœ€ä¸ºå®é™…ä½¿ç”¨çš„æ„å»ºæ—¶é—´ä»˜è´¹ã€‚æ²¡æœ‰éšè—è´¹ç”¨ã€‚

## å¸¸è§ç”¨ä¾‹

### CI/CD é›†æˆ

æ·»åŠ åˆ°æ‚¨çš„ GitHub Actions å·¥ä½œæµç¨‹:

```yaml
- name: Build native app
  env:
    CAPGO_TOKEN: ${{ secrets.CAPGO_TOKEN }}
  run: |
    npm run build
    npx cap sync
    npx @capgo/cli@latest build ${{ secrets.APP_ID }} \
      --platform both \
      --build-mode release
```

### æœ¬åœ°å¼€å‘

åœ¨æäº¤å‰æœ¬åœ°æµ‹è¯•æ„å»º:

```bash
# å¿«é€Ÿ debug æ„å»ºè¿›è¡Œæµ‹è¯•
npm run build && npx cap sync
npx @capgo/cli@latest build com.example.app \
  --platform android \
  --build-mode debug
```

### å¤šå¹³å°æ„å»º

åŒæ—¶ä¸ºä¸¤ä¸ªå¹³å°æ„å»º:

```bash
npx @capgo/cli@latest build com.example.app \
  --platform both \
  --build-mode release
```

## ä¸‹ä¸€æ­¥

ç°åœ¨æ‚¨å·²ç»åˆ›å»ºäº†ç¬¬ä¸€ä¸ªæ„å»º:

- [é…ç½® iOS æ„å»º](/docs/cli/cloud-build/ios/) - è®¾ç½®è¯ä¹¦å’Œé…ç½®æ–‡ä»¶
- [é…ç½® Android æ„å»º](/docs/cli/cloud-build/android/) - è®¾ç½®å¯†é’¥åº“å’Œ Play å•†åº—
- [æ•…éšœæ’é™¤](/docs/cli/cloud-build/troubleshooting/) - å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- [CLI å‚è€ƒ](/docs/cli/reference/build/) - å®Œæ•´å‘½ä»¤æ–‡æ¡£

## éœ€è¦å¸®åŠ©?

- æŸ¥çœ‹ [æ•…éšœæ’é™¤æŒ‡å—](/docs/cli/cloud-build/troubleshooting/)
- åŠ å…¥æˆ‘ä»¬çš„ [Discord ç¤¾åŒº](https://discord.com/invite/VnYRvBfgA6)
- å‘é€ç”µå­é‚®ä»¶è‡³ support@capgo.app
