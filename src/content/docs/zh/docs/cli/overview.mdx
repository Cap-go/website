---
title: "概述"
description: "本文档提供 Capgo CLI 的全面概述,以及如何利用它通过启用无缝实时更新来增强应用开发过程"
sidebar:
  order: 1
prev: false
next: false
locale: zh
---

import { Steps, CardGrid, Card, Aside } from '@astrojs/starlight/components';

使用 Capgo 的实时更新功能远程实时更新应用的 JavaScript bundle。直接向用户推送 JS 更新,无需通过应用商店审核流程即可立即修复错误和发布新功能。

<Aside>

实时更新仅限于 JavaScript bundle 更改。如果您需要更新原生代码,例如添加或删除插件或更改原生项目配置,则需要向应用商店提交新的原生二进制构建。

</Aside>

## 实时更新的工作原理

Capgo 的实时更新系统有两个关键组件:

1. Capgo SDK,您将其安装在应用中。SDK 检查可用更新并在后台下载它们。

2. 频道,让您将更新定向到特定的用户组。您可以使用频道来管理不同的发布轨道,例如 `Production`、`Staging` 和 `Dev`。

当您上传新的 JS bundle 到 Capgo 并将其分配给频道时,为该频道配置的应用中的 Capgo SDK 将检测到更新并下载它。下次应用重新启动时,将加载新的 bundle。

## 入门

要开始使用实时更新,请按照以下步骤操作:

<Steps>

1. 完成 [Capgo 快速入门](/docs/getting-started/quickstart)以在 Capgo 中设置您的应用并安装 Capgo SDK。

2. 在您的应用代码中,在应用完成初始化后调用 `CapacitorUpdater.notifyAppReady()`。这告诉 Capgo SDK 您的应用已准备好接收更新。

3. 构建您的 JS bundle 并将其上传到 Capgo:
   ```shell
   npm run build
   npx @capgo/cli@latest bundle upload --channel=production
   ```

4. 打开您的应用并等待更新下载。您可以使用以下命令检查状态:
   ```shell
   npx @capgo/cli@latest app debug
   ```

5. 下载更新后,关闭并重新打开您的应用以加载新的 bundle。

</Steps>

有关更多详细信息,请参阅 [部署实时更新](/docs/getting-started/deploy) 指南。

## Capgo CLI

Capgo CLI 是一个强大的工具,允许开发者从自己的 CI/CD 管道中与 Capgo 服务交互。使用 CLI,您可以对何时生成和部署构建进行细粒度控制,使您能够将 Capgo 集成到现有的企业工作流中。

### Capgo CLI 有什么用?

Capgo CLI 为需要在实时更新工作流中获得更多控制和灵活性的开发者和团队而设计。通过在 CI/CD 管道中使用 CLI,您可以:

- 准确决定何时构建和部署更新,而不是依赖 Capgo 的内置自动化
- 插入您自己的流程,例如代码签名、QA 测试或管理员批准,在构建和部署步骤之间
- 将 Capgo 集成到现有的 DevOps 工具和工作流中

### 身份验证

要使用 Capgo CLI,您需要使用 API 密钥进行身份验证。您可以在 Capgo 帐户设置中生成 API 密钥。

要登录并安全地存储您的 API 密钥,请运行:

```shell
npx @capgo/cli@latest login [API_KEY]
```

此命令将保存供今后使用。登录后,您无需为每个命令都提供 API 密钥。

### 与其他 CLI 工具的主要区别

如果您熟悉其他实时更新 CLI 工具,有一些关于 Capgo CLI 的关键点需要注意:

- Capgo 将单个 CLI 用于开发和 CI/CD 用例,因为 Capgo 仅专注于实时更新功能集。

- Capgo CLI 不需要单独的安装步骤。它与 `@capgo/cli` 包捆绑在一起,可以直接使用 `npx` 运行。

- Capgo CLI 专门为实时更新工作流而设计,因此它可能不包括在通用 CLI 工具中找到的某些功能或命令。

## 后续步骤

<CardGrid stagger>
  <a href="/docs/live-updates/channels/">
    <Card title="频道" icon="bars">
      了解如何使用频道来管理不同的发布轨道并针对特定用户定位更新。
    </Card>
  </a>

  <a href="/docs/live-updates/rollbacks/">
    <Card title="回滚" icon="left-arrow">
      发现如果更新导致问题,如何回滚到以前的 JS bundle 版本。
    </Card>
  </a>

  <a href="/docs/live-updates/update-behavior/">
    <Card title="更新行为" icon="setting">
      自定义应用中如何以及何时下载和应用更新。
    </Card>
  </a>
  <a href="/docs/live-updates/differentials/">
    <Card title="快速更新" icon="starlight">
      了解如何使用快速更新来加快更新过程。
    </Card>
  </a>
</CardGrid>
