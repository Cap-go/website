---
title: Supabase Apple Login - General Setup
description: Learn how to integrate Apple Sign-In with Supabase Authentication using the Capacitor Social Login plugin.
locale: zh
sidebar:
    order: 1
---
import { Steps } from '@astrojs/starlight/components';

## æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨é›†æˆ Apple ç™»å½•ä¸ Supabase èº«ä»½éªŒè¯ã€‚Apple ç™»å½•æä¾›äº†ä¸€ç§å®‰å…¨ã€æ³¨é‡éšç§çš„èº«ä»½éªŒè¯æ–¹æ³•ï¼Œå¯åœ¨ iOSã€Android å’Œ Web å¹³å°ä¸Šä½¿ç”¨ã€‚

## å‰ç½®æ¡ä»¶

å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨æ‹¥æœ‰ï¼š

1. [åˆ›å»ºä¸€ä¸ª Supabase é¡¹ç›®](https://database.new/)
2. é˜…è¯» [Apple Login é€šç”¨è®¾ç½®](/docs/plugins/social-login/apple/general/) æŒ‡å—ä»¥è®¾ç½® Apple OAuth å‡­è¯
3. éµå¾ªç›¸åº”çš„ç‰¹å®šäºå¹³å°çš„æŒ‡å—ä¸ºæ‚¨çš„ç›®æ ‡å¹³å°è®¾ç½® Apple OAuth å‡­è¯ï¼š
    - [Android è®¾ç½®](/docs/plugins/social-login/apple/android/)
    - [iOS è®¾ç½®](/docs/plugins/social-login/apple/ios/)
    - [Web è®¾ç½®](/docs/plugins/social-login/apple/web/)

    :::note
        åœ¨å¼€å§‹ Supabase æ•™ç¨‹ä¹‹å‰ï¼Œæ‚¨éœ€è¦ä¸ºè®¡åˆ’ä½¿ç”¨çš„å¹³å°ç”Ÿæˆå®¢æˆ·ç«¯ IDã€‚

        å¯¹äº iOSï¼Œå®¢æˆ·ç«¯ ID ä¸æ‚¨çš„åº”ç”¨ ID ç›¸åŒã€‚
        å¯¹äº Android å’Œ Webï¼Œå®¢æˆ·ç«¯ ID ä¸æ‚¨çš„æœåŠ¡ ID ç›¸åŒã€‚
        æ‚¨å°†åœ¨æœ¬æŒ‡å—çš„æ­¥éª¤ 7 ä¸­ä½¿ç”¨å®ƒä»¬ã€‚
    :::

## åœ¨ Supabase ä¸­å¯ç”¨ Apple OAuth æä¾›å•†

<Steps>
1. è½¬åˆ°æ‚¨çš„ [Supabase Dashboard](https://app.supabase.com/)
2. ç‚¹å‡»æ‚¨çš„é¡¹ç›®
    <img src="/social-login-assets/supabase_project_select.webp" alt="Supabase Project Selector" />
3. è½¬åˆ° `Authentication` èœå•
    <img src="/social-login-assets/supabase_authentication_menu.webp" alt="Supabase Authentication Menu" />
4. ç‚¹å‡» `Providers` é€‰é¡¹å¡
    <img src="/social-login-assets/supabase_providers_tab.webp" alt="Supabase Providers Tab" />
5. æŸ¥æ‰¾ `Apple` æä¾›å•†
    <img src="/social-login-assets/supabase_apple_provider.webp" alt="Supabase Apple Provider" />
6. å¯ç”¨ `Apple` æä¾›å•†
    <img src="/social-login-assets/supabase_apple_provider_enable.webp" alt="Supabase Apple Provider Enable" />
7. å¡«å……å®¢æˆ·ç«¯ ID é…ç½®ï¼š

    :::note
      å¦‚æœæ‚¨ä½¿ç”¨ Apple ç™»å½•è¿›è¡Œ iOSï¼Œå®¢æˆ·ç«¯ ID ä¸æ‚¨çš„åº”ç”¨ ID ç›¸åŒã€‚
      å¦‚æœæ‚¨ä½¿ç”¨ Apple ç™»å½•è¿›è¡Œ Android æˆ– Webï¼Œå®¢æˆ·ç«¯ ID ä¸æ‚¨çš„æœåŠ¡ ID ç›¸åŒã€‚
      å¦‚æœæ‚¨åŒæ—¶ä½¿ç”¨ä¸¤è€…ï¼Œæ‚¨éœ€è¦åŒæ—¶æä¾›åº”ç”¨ ID å’ŒæœåŠ¡ IDã€‚
    :::

    <img src="/social-login-assets/supabase_apple_provider_client_id.webp" alt="Supabase Apple Provider Client ID" />
8. ç‚¹å‡» `Save` æŒ‰é’®
    <img src="/social-login-assets/supabase_apple_provider_save.webp" alt="Supabase Apple Provider Save" />

    :::note
      æ‚¨**ä¸å¿…**è®¾ç½® `Secret key (for OAuth)`ã€‚æˆ‘ä»¬å°†è¿›è¡Œè‡ªå®šä¹‰åç«¯å®ç°æ¥å¤„ç† Apple ç™»å½•ã€‚
    :::
</Steps>

å¥½çš„ï¼Œæ‚¨ç°åœ¨å·²å¯ç”¨ Supabase èº«ä»½éªŒè¯çš„ Apple ç™»å½• ğŸ‰

## ä½¿ç”¨èº«ä»½éªŒè¯åŠ©æ‰‹

å®Œæ•´çš„å®ç°åŒ…æ‹¬ä¸€ä¸ª `authenticateWithAppleSupabase()` åŠ©æ‰‹å‡½æ•°ï¼Œè¯¥å‡½æ•°å¤„ç†æ•´ä¸ª Apple ç™»å½•æµç¨‹ä¸ Supabaseã€‚æ­¤å‡½æ•°ï¼š

- ä½¿ç”¨ç‰¹å®šäºå¹³å°çš„é…ç½®åˆå§‹åŒ– Apple ç™»å½•
- å¤„ç†èº«ä»½éªŒè¯æµç¨‹ï¼ˆiOS ä¸Šä¸ºåŸç”Ÿï¼ŒAndroid/Web ä¸Šä¸º OAuth é‡å®šå‘ï¼‰
- ä» Apple æå–èº«ä»½ä»¤ç‰Œ
- ä½¿ç”¨èº«ä»½ä»¤ç‰Œç™»å½•åˆ° Supabase

:::tip[å®Œæ•´å®ç°]
å®Œæ•´å®ç°å¯åœ¨ [example app çš„ `supabaseAuthUtils.ts`](https://github.com/Cap-go/capacitor-social-login/blob/main/example-app/src/supabaseAuthUtils.ts) æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚
:::

### åŸºæœ¬ç”¨æ³•

```typescript
import { authenticateWithAppleSupabase } from './supabaseAuthUtils';

const result = await authenticateWithAppleSupabase();
if (result.success) {
  console.log('Signed in:', result.user);
  // Navigate to your authenticated area
} else {
  console.error('Error:', result.error);
}
```

### å·¥ä½œåŸç†

åŠ©æ‰‹å‡½æ•°è‡ªåŠ¨å¤„ç†ç‰¹å®šäºå¹³å°çš„å·®å¼‚ï¼š

- **iOS**: ä½¿ç”¨åŸç”Ÿ Apple ç™»å½•ï¼ˆä¸éœ€è¦é‡å®šå‘ URLï¼Œè‡ªåŠ¨ä½¿ç”¨åŒ… IDï¼‰
- **Android**: ä½¿ç”¨å¸¦æœ‰åç«¯ edge function çš„ OAuth é‡å®šå‘æµç¨‹ï¼ˆéœ€è¦æœåŠ¡ IDï¼‰
- **Web**: ä½¿ç”¨ OAuth å¼¹å‡ºçª—å£æµç¨‹ï¼ˆéœ€è¦æœåŠ¡ ID å’Œå½“å‰é¡µé¢ URL ä½œä¸ºé‡å®šå‘ï¼‰

è¯¥å‡½æ•°è¿”å›æ¥è‡ª Apple çš„èº«ä»½ä»¤ç‰Œï¼Œç„¶åå°†å…¶ç”¨äºä½¿ç”¨ `supabase.auth.signInWithIdToken()` é€šè¿‡ Supabase è¿›è¡Œèº«ä»½éªŒè¯ã€‚
