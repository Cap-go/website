---
title: "V7 迁移指南"
locale: zh
description: 从早期版本迁移到 @capgo/capacitor-social-login V7 的指南
sidebar:
    order: 4
---
import { Steps } from '@astrojs/starlight/components';

## 简介

:::caution
本指南适用于仍在使用 `0.x.x` 版本的插件用户升级到 `V1`/`V7` 版本。
:::

本指南将涵盖以下内容：

- 从 `main` 版本迁移到 V1 版本
- 从 `development` 版本迁移到 V1 版本

## V1 中的重要更改

V1 只是将开发版本移植到主版本。但是，它包含许多在 `main` V0 版本中不可用的重要更改。这些更改包括：

- Google 登录的访问范围
- Google 登录的离线模式
- 统一不同的实现
  - 进行了广泛的测试，以确保 Google Provider 的所有实现在平台之间的行为方式相同

## 从 V0 主版本迁移

- Android 的 `MainActivity.java` 中的更改
  - 请遵循 [Google 设置指南](/docs/plugins/social-login/google/android/)。具体来说，请搜索 `MainActivity.java`

- 请在 Google Console 中添加重定向 URL。如果不添加重定向 URL，Google 登录将无法工作。
  - 同样，请遵循 [Google 设置指南](/docs/plugins/social-login/google/android/)。具体来说，请搜索 `Authorized redirect URIs`

- 请确保您没有在配置中使用 `grantOfflineAccess`。此功能在 V1 中不受支持。

- 请确保身份验证在所有平台上都能正常工作。

## 从 V0 开发版本迁移

- Android 的 `MainActivity.java` 中的更改
  - 请遵循 [Google 设置指南](/docs/plugins/social-login/google/android/)。具体来说，请搜索 `MainActivity.java`。在 V1 中，您**必须**在主 activity 中实现 `ModifiedMainActivityForSocialLoginPlugin`。此更改对于插件正常工作至关重要

- 请在 Google Console 中添加重定向 URL。如果不添加重定向 URL，Google 登录将无法工作。
  - 同样，请遵循 [Google 设置指南](/docs/plugins/social-login/google/android/)。具体来说，请搜索 `Authorized redirect URIs`

- 请确保类型和变量名称正确。请注意，开发版本和 V1 之间的类型和变量可能不匹配。

- 请确保身份验证在所有平台上都能正常工作。
