---
title: "@capgo/capacitor-persistent-account"
locale: zh
description: ç”¨äº Capacitor åº”ç”¨çš„æŒä¹…åŒ–è´¦æˆ·ç®¡ç†æ’ä»¶ï¼Œå…·æœ‰å®‰å…¨å­˜å‚¨ã€ä¼šè¯å¤„ç†å’Œç”¨æˆ·æ•°æ®æŒä¹…åŒ–åŠŸèƒ½ã€‚
tableOfContents: false
next: false
prev: false
sidebar:
  order: 1
  label: "ç®€ä»‹"
hero:
  tagline: é€šè¿‡æŒä¹…åŒ–å­˜å‚¨ã€å®‰å…¨ä¼šè¯å¤„ç†å’Œè·¨åº”ç”¨ä¼šè¯çš„æ— ç¼èº«ä»½éªŒè¯ç®¡ç†ç”¨æˆ·è´¦æˆ·ã€‚
  image:
    file: ~public/icons/plugins/persistent-account.svg
  actions:
    - text: å¿«é€Ÿå…¥é—¨
      link: /docs/plugins/persistent-account/getting-started/
      icon: right-arrow
      variant: primary
    - text: Github
      link: https://github.com/Cap-go/capacitor-persistent-account/
      icon: external
      variant: minimal
---

import { Card, CardGrid } from '@astrojs/starlight/components';

## æ¦‚è§ˆ

Capacitor Persistent Account æ’ä»¶èƒ½å¤Ÿåœ¨åº”ç”¨å®‰è£…ä¹‹é—´å®‰å…¨å­˜å‚¨å’ŒæŒä¹…åŒ–ç”¨æˆ·è´¦æˆ·æ•°æ®ã€‚æ­¤æ’ä»¶ç¡®ä¿å³ä½¿åœ¨åº”ç”¨é‡æ–°å®‰è£…åï¼Œç”¨æˆ·è´¦æˆ·ä¿¡æ¯ä»ç„¶å¯ç”¨ï¼Œæä¾›æ— ç¼çš„ç”¨æˆ·ä½“éªŒå’Œè´¦æˆ·è¿ç»­æ€§ã€‚

<CardGrid stagger>
  <Card title="è·¨å®‰è£…æŒä¹…åŒ–" icon="rocket">
    æ•°æ®åœ¨åº”ç”¨å¸è½½/é‡æ–°å®‰è£…å¾ªç¯ä¸­ä¿æŒä¸å˜ ğŸ’¾
  </Card>
  <Card title="å®‰å…¨å­˜å‚¨" icon="setting">
    é€šè¿‡ç³»ç»Ÿé›†æˆå®ç°å®‰å…¨çš„è´¦æˆ·æ•°æ®å­˜å‚¨ ğŸ”
  </Card>
  <Card title="ç®€å•çš„ API" icon="puzzle">
    ç”¨äºè´¦æˆ·ç®¡ç†çš„æ¸…æ™°è¯»å†™æ¥å£ ğŸ“Š
  </Card>
  <Card title="è·¨å¹³å°" icon="laptop">
    åŸç”Ÿ iOS å’Œ Android å®ç° ğŸ“±
  </Card>
</CardGrid>

## å®‰è£…

```bash
npm install @capgo/capacitor-persistent-account
npx cap sync
```

## æ ¸å¿ƒ API æ–¹æ³•

### æ•°æ®ç®¡ç†
- `saveAccount(options: { data: unknown })` - å®‰å…¨åœ°ä¿å­˜è´¦æˆ·æ•°æ®åˆ°æŒä¹…åŒ–å­˜å‚¨
- `readAccount()` - æ£€ç´¢å·²å­˜å‚¨çš„è´¦æˆ·æ•°æ®ï¼Œè¿”å› `Promise<{ data: unknown | null }>`

## ä¸»è¦åŠŸèƒ½

- **è·¨å®‰è£…æŒä¹…åŒ–**: è´¦æˆ·æ•°æ®åœ¨åº”ç”¨å¸è½½å’Œé‡æ–°å®‰è£…åä»ç„¶å­˜åœ¨
- **å®‰å…¨å­˜å‚¨**: ä½¿ç”¨ç‰¹å®šäºå¹³å°çš„å®‰å…¨å­˜å‚¨æœºåˆ¶
- **ç±»å‹çµæ´»æ€§**: å­˜å‚¨ä»»ä½•å¯åºåˆ—åŒ–çš„è´¦æˆ·æ•°æ®ç»“æ„
- **è·¨å¹³å°æ”¯æŒ**: iOS å’Œ Android çš„åŸç”Ÿå®ç°

## ä½¿ç”¨ç¤ºä¾‹

```typescript
import { PersistentAccount } from '@capgo/capacitor-persistent-account';

// å®šä¹‰æ‚¨çš„è´¦æˆ·æ•°æ®ç»“æ„
interface UserAccount {
  userId: string;
  username: string;
  email: string;
  preferences: {
    theme: string;
    notifications: boolean;
  };
}

// ä¿å­˜è´¦æˆ·æ•°æ®
const accountData: UserAccount = {
  userId: '12345',
  username: 'john_doe',
  email: 'john@example.com',
  preferences: {
    theme: 'dark',
    notifications: true
  }
};

await PersistentAccount.saveAccount({ data: accountData });

// è¯»å–è´¦æˆ·æ•°æ®
const result = await PersistentAccount.readAccount();
if (result.data) {
  const account = result.data as UserAccount;
  console.log('å·²æ¢å¤è´¦æˆ·:', account.username);
} else {
  console.log('æœªæ‰¾åˆ°è´¦æˆ·æ•°æ®');
}
```

## ä½¿ç”¨åœºæ™¯

- **ç”¨æˆ·å¼•å¯¼**: åœ¨åº”ç”¨é‡æ–°å®‰è£…æœŸé—´ä¿ç•™ç”¨æˆ·è¿›åº¦
- **è´¦æˆ·æ¢å¤**: åœ¨åº”ç”¨æ›´æ–°åæ¢å¤ç”¨æˆ·ä¼šè¯
- **åå¥½è®¾ç½®å­˜å‚¨**: ç»´æŠ¤ç”¨æˆ·è®¾ç½®å’Œé…ç½®
- **ç¦»çº¿ä¼˜å…ˆåº”ç”¨**: åœ¨æœ¬åœ°å­˜å‚¨å¿…è¦çš„ç”¨æˆ·æ•°æ®

## å¹³å°å®ç°

### iOS
- åˆ©ç”¨ iOS Keychain Services è¿›è¡Œå®‰å…¨çš„æŒä¹…åŒ–å­˜å‚¨
- æ•°æ®åœ¨åº”ç”¨åˆ é™¤å’Œè®¾å¤‡æ¢å¤åä»ç„¶å­˜åœ¨

### Android
- ä½¿ç”¨ Android Account Manager æˆ–å¸¦å¤‡ä»½çš„å…±äº«é¦–é€‰é¡¹
- åœ¨åº”ç”¨é‡æ–°å®‰è£…å’Œè®¾å¤‡è¿ç§»æœŸé—´ä¿æŒæ•°æ®

## å®‰å…¨æ³¨æ„äº‹é¡¹

- è´¦æˆ·æ•°æ®ä½¿ç”¨ç‰¹å®šäºå¹³å°çš„å®‰å…¨å­˜å‚¨å­˜å‚¨
- è€ƒè™‘å¯¹æ•æ„Ÿä¿¡æ¯è¿›è¡Œæ•°æ®åŠ å¯†
- è¯»å–å­˜å‚¨çš„è´¦æˆ·æ—¶å®æ–½é€‚å½“çš„æ•°æ®éªŒè¯
- éµå¾ªå¹³å°å…³äºç”¨æˆ·æ•°æ®å¤„ç†çš„æŒ‡å—

## æ–‡æ¡£

æŸ¥çœ‹[å®Œæ•´æ–‡æ¡£](/docs/plugins/persistent-account/getting-started/)ä»¥è·å–è¯¦ç»†çš„å®ç°æŒ‡å—å’Œæœ€ä½³å®è·µã€‚
