---
title: 函数
description: Capgo Live Update 所有功能的完整参考资料。在集中式更新系统中，涵盖高级部署控制、分析和团队协作功能。
sidebar:
  order: 2
locale: zh
---

import { Card, CardGrid, Aside } from '@astrojs/starlight/components';

本页提供 Capgo 实时更新（Capgo Live Updates）中所有功能的全面概览。每个功能都包含简要描述和指向详细文档的链接。

## Core Update System

### 空中下载（OTA）更新
直接向用户部署 JavaScript、HTML、CSS 和资产更新，无需应用商店审批。更新在后台下载，并在下次应用重启时应用。

**关键能力：**
1. 背景下载
2. 自动安装
3. 不会打断用户
4. 跨平台支持（iOS、Android、Electron）

[了解更新行为 →](/docs/live-updates/update-behavior/)

---

### 差分更新（Differential Updates）
仅下载在版本之间已更改的文件，带宽使用量最高可降低 95%，并加快更新交付。

**关键能力：**
1. 自动文件级差异对比
2. 基于校验和的验证
3. 清单比较
4. 在需要时智能回退到完整更新

[了解差分更新 →](/docs/live-updates/differentials/)

---

### 自动回滚
如果更新加载失败或导致崩溃，系统会自动回滚到最后一个已知可工作的版本。

**关键能力：**
1. 崩溃检测
2. 超时检测
3. 自动回滚
4. 无需用户干预

[了解回滚 →](/docs/live-updates/rollbacks/)

---

### 校验和验证与回退
通过校验和验证包的完整性，在检测到损坏时自动回退到最后一个已知可工作的版本。

**关键能力：**
1. 下载时的校验和验证
2. 损坏检测
3. 自动回退到最后可用的捆绑包
4. 提供手动恢复工具

---

### 破坏性更新检测
防止不兼容的更新被应用到运行较旧原生代码版本的设备上。

**关键能力：**
1. 原生版本兼容性检查
2. 插件依赖性验证
3. 自动阻止不兼容的更新
4. 清晰的错误信息

[了解版本目标 →](/docs/live-updates/version-targeting/)

---

## 部署控制

### 通道系统
在不同环境和用户群体之间组织和管理更新，使用灵活的通道配置。

**关键能力：**
1. 无限自定义通道（生产、预发布、Beta 等）
2. 每个通道的捆绑包分配
3. 通道特定的定位规则
4. 设备自选分配
5. 按设备的通道覆盖

[了解通道 →](/docs/live-updates/channels/)

---

### 设备目标定位
针对特定设备、版本或用户群体进行分阶段发布和受控部署。

**关键能力：**
1. 基于版本的目标定位
2. 设备特定的覆盖
3. 平台筛选（iOS、Android）
4. 自定义元数据筛选
5. 模拟器/开发构建阻止

---

### 通道策略
为各通道配置更新的发送规则和限制。

**关键能力：**
1. 禁用自动更新
2. 阻止重大版本更新
3. 在模拟器上禁用更新
4. 在开发构建中禁用更新
5. 针对平台的策略（仅 iOS、仅 Android）

[了解通道策略 →](/docs/live-updates/channels/#channel-policies)

---

## 开发者工具

### 捆绑包预览
在部署到设备之前，在实时的网页环境中预览捆绑包，Web 仪表板可访问。

**位置：** Web Dashboard → App → Bundle → Preview 标签

---

### 实时调试
通过 CLI 实时监控特定设备的更新事件，显示检查、下载、安装和错误事件。

**用法：**
```bash
npx @capgo/cli app debug [appId]
```

**显示：**
1. 更新检查
2. 下载进度
3. 安装状态
4. 错误信息
5. 策略阻止

---

### 捆绑清单查看器
检查任意捆绑包的完整清单，包括文件列表、校验和和元数据。

**位置：** Web Dashboard → App → Bundle → Manifest 标签

**显示：**
1. 带有校验和的文件列表
2. 捆绑包元数据
3. 原生版本兼容性
4. 插件依赖

---

### 原生 Capacitor 插件依赖
查看每个捆绑包中包含的原生 Capacitor 插件，以跟踪跨版本的依赖关系变更。

**位置：** Web Dashboard → App → Bundle → Dependencies 标签

**显示：**
1. 插件名称和版本
2. 依赖项的新增/移除
3. 兼容性警告

---

### CLI 集成
用于自动化部署和 CI/CD 集成的全面命令行界面。

**关键命令：**
1. `bundle upload` - 上传新捆绑包
2. `bundle list` - 列出所有捆绑包
3. `bundle delete` - 删除捆绑包
4. `bundle cleanup` - 清理旧捆绑包
5. `channel set` - 配置通道
6. `app debug` - 实时调试

[查看完整的 CLI 参考 →](/docs/cli/reference/)

---

### 捆绑包加密
对捆绑包进行端到端加密，使用 AES-256 加密保护传输中的数据和静态数据。

**关键能力：**
1. 生成 RSA 密钥对
2. 使用 AES-256 对捆绑包进行加密
3. 代码签名验证
4. 加密密钥管理

[了解加密 →](/docs/live-updates/encryption/)

---

### 捆绑清理与保留策略
基于保留策略自动清理旧捆绑包，以管理存储使用。

**关键能力：**
1. 可配置的保留数量
2. 通过 CLI 的自动清理
3. 计划清理任务
4. 存储使用跟踪

**用法：**
```bash
npx @capgo/cli bundle cleanup --keep=10
```

---

## 分析与监控

### 更新统计
跟踪更新采用率、成功率和在用户群体中的部署进度。

**可用指标：**
1. 下载成功率
2. 安装成功率
3. 按类型的错误率
4. 更新采用率随时间变化
5. 版本分布

**位置：** Web Dashboard → App → Statistics

---

### 设备日志
按设备的事件日志，显示从检查到安装的完整更新生命周期。

**事件类型：**
1. 更新检查
2. 下载开始/结束/失败
3. 安装开始/结束/失败
4. 回滚事件
5. 策略阻止

**位置：** 
- Web Dashboard → App → Device → Logs
- Web Dashboard → App → Logs（所有设备）

[了解日志 →](/docs/webapp/logs/)

---

### 捆绑使用分析
详细分析哪些捆绑包处于活动状态、下载次数和存储使用情况。

**指标：**
1. 每个捆绑包的活跃安装
2. 下载计数
3. 每个捆绑包的存储使用
4. 带宽使用

---

### 通道统计
跟踪每个通道的性能和采用情况。

**指标：**
1. 每个通道的设备数
2. 每个通道的更新成功率
3. 部署历史
4. 按通道的错误率

**位置：** Web Dashboard → App → Channel → Statistics

---

### 部署历史
所有捆绑包部署、通道分配和配置变更的完整审计跟踪。

**跟踪事件：**
1. 捆绑包上传
2. 通道分配
3. 策略变更
4. 设备覆盖

**位置：** Web Dashboard → App → Channel → History

---

## 安全与合规

### 端到端加密
以行业标准 AES-256 加密在静态和传输中对捆绑包进行加密。

[了解加密 →](/docs/live-updates/encryption/)

---

### 代码签名
使用加密签名验证捆绑包的完整性，防止篡改。

---

### SOC 2 Type II 合规
符合 SOC 2 Type II 标准的基础设施和流程，提升企业安全性。

---

### App Store 合规
完全符合 Apple App Store 和 Google Play 商店关于 OTA 更新的政策。

[了解合规性 →](/docs/live-updates/compliance/)

---

### 2FA 强制执行（组织级）
要求所有组织成员在访问仪表板和 API 时使用双因素认证。

**位置：** Web Dashboard → Organization → Security

[了解 2FA →](/docs/webapp/2fa-enforcement/)

---

### 加密捆绑包强制执行
在组织层面要求所有捆绑包进行加密。**位置：** 网页仪表板 → 组织 → 安全

---

## 团队协作

### 基于角色的访问控制 (RBAC)
用于组织级和应用级访问控制的粒度权限

**组织角色：**
- `super_admin` - 完全访问权限
- `admin` - 管理员访问权限
- `read` - 只读访问
- `upload` - 仅上传访问

**应用角色：**
- `app_developer` - 全部应用访问权限
- `app_uploader` - 仅上传包
- `app_reader` - 只读访问权限

**位置：** 
- 网页仪表板 → 组织 → 成员
- 网页仪表板 → 应用 → 访问

[了解有关 RBAC 的更多信息 →](/docs/webapp/organization-system/#roles-and-permissions)

---

### 审计日志
用于合规与安全的组织与应用活动的完整审计轨迹。

**记录事件：**
- 用户操作（登录、登出、权限变更）
- 包操作（上传、删除、分配）
- 通道操作（创建、更新、删除）
- 组织变更（设置、成员）

**位置：** 网页仪表板 → 组织 → 审计日志

---

### Webhook
通过 HTTP Webhook 实时接收应用事件通知。

**支持的事件：**
- `apps` - 应用创建/更新/删除
- `app_versions` - 包上传/删除
- `channels` - 通道创建/更新/删除
- `org_users` - 成员添加/移除
- `orgs` - 组织更新

**功能：**
- 自定义 Webhook URL
- 事件筛选
- 投递日志
- 重试机制
- 测试功能

**位置：** 网页仪表板 → 组织 → Webhooks

---

### 多用户协作
邀请团队成员加入您的组织并分配特定角色与权限。

**功能：**
- 通过电子邮件邀请
- 角色分配
- 成员管理
- 访问撤销

**位置：** 网页仪表板 → 组织 → 成员

---

### API 密钥管理
创建、管理和撤销 API 密钥，带可选的到期日期和散列存储。

**密钥能力：**
- 按应用或按组织的密钥
- 可选到期日期
- 散列存储（不可逆）
- 支持密钥轮换

**位置：** 网页仪表板 → API 密钥

[了解关于 API 密钥的更多信息 →](/docs/public-api/#authentication)

---

### 密码策略
用于执行安全标准的组织级密码要求。

**可配置的策略：**
- 最小长度
- 需要大写字母
- 需要数字
- 需要特殊字符

**位置：** 网页仪表板 → 组织 → 安全

---

## 平台支持

### 跨平台支持
通过单一 SDK 支持 iOS、Android 和 Electron 应用。

**支持的平台：**
- iOS（Capacitor 5、6、7、8）
- Android（Capacitor 5、6、7、8）
- Electron（2025 年新增）

---

### 长期支持
继续支持较旧的 Capacitor 版本，以保持与遗留应用的兼容性。

**当前支持：**
- Capacitor 8（最新版）
- Capacitor 7
- Capacitor 6
- Capacitor 5

---

### 自定义存储后端
使用您自己的存储基础设施（如 S3、R2 等）替代 Capgo 的默认存储。

[了解关于自定义存储的更多信息 →](/docs/live-updates/custom-storage/)

---

### 中国配置
在中国大陆分发的应用的特殊配置，以符合当地法规。

[了解关于中国配置的更多信息 →](/docs/live-updates/china-configuration/)

---

## 高级功能

### 自定义更新行为
通过 SDK 配置何时以及如何检查并应用更新。

**可配置选项：**
- 检查间隔（`periodCheckDelay` - 最小 600 秒）
- 直接更新时机（`directUpdate` - 安装时、启动时、始终）
- 自动更新开启/关闭（`autoUpdate`）
- 网络要求（Android 专用 - 通过 WorkManager）

[了解关于更新行为的更多信息 →](/docs/live-updates/update-behavior/)

---

### 更新类型
针对不同用例的不同更新类型，从即时更新到用户控制的安装。

**可用类型：**
- 后台更新（默认）
- 立即更新
- 用户提示的更新
- 有条件的更新

[了解关于更新类型的更多信息 →](/docs/live-updates/update-types/)

---

### 积分系统
基于用量的计费，按带宽、存储和其他资源计积分。

**特性：**
- 积分使用跟踪
- 使用警报
- 通过 Stripe 充值
- 积分账本

**位置：** 网页仪表板 → 组织 → 积分

---

## 入门

准备开始使用这些功能吗？请按照我们的 [快速入门指南](/docs/getting-started/quickstart/) 设置您的第一个应用与 Capgo Live Updates。

## 需要帮助？

- [加入我们的 Discord](https://discord.capgo.app) 以获取社区支持
- [查看常见问题解答](/docs/faq/) 以获取常见问题
- [浏览 API 文档](/docs/public-api/) 以进行 API 集成
- [联系支持](https://capgo.app/consulting/) 以获取企业帮助
.