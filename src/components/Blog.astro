---
import { formatTime } from '@/config/app'
import * as m from '@/paraglide/messages'
import { getRelativeLocaleUrl } from 'astro:i18n'

const props = Astro.props as {
  tag: string
  link: string
  date: string
  title: string
  image?: string
}

const cannLink = getRelativeLocaleUrl(Astro.locals.locale, `blog/${props.link}`)
---

<div class="overflow-hidden rounded-xl bg-gray-700">
  <div>
    <div class="relative p-2">
      <a href={cannLink} title={props.title} class="aspect-w-4 aspect-h-3 block">
        <img
          width="997"
          height="350"
          loading="lazy"
          src={props.image}
          alt={`blog illustration ${props.title}`}
          title={`blog illustration ${props.title}`}
          class="h-full w-full rounded-lg object-cover"
        />
      </a>
      <div class="absolute top-4 left-4">
        <span class="rounded-full bg-white px-4 py-2 text-xs font-semibold tracking-widest text-gray-900 uppercase shadow-lg">
          {props.tag}
        </span>
      </div>
    </div>
    <span class="mt-3 block px-5 text-sm font-semibold tracking-widest text-gray-300 uppercase">
      {formatTime(props.date)}
    </span>
    <p class="mt-3 px-5 text-2xl font-semibold">
      <a href={cannLink} title={props.title} class="text-gray-100">
        {props.title}
      </a>
    </p>
    <a
      href={cannLink}
      title={props.title}
      class="m-5 mt-5 inline-flex items-center justify-center border-b-2 border-blue-300 pb-0.5 text-base font-semibold text-gray-200 transition-all duration-200 hover:border-blue-600 focus:border-blue-600"
    >
      {m.read_more({}, { locale: Astro.locals.locale })}
      <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
      </svg>
    </a>
  </div>
</div>
