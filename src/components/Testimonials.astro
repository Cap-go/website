---
import * as m from '@/paraglide/messages'

const locale = Astro.locals.locale

// Define featured testimonial
const featuredTestimonial = {
  author: {
    name: 'Andrew Peacock',
    handle: '_andypeacock',
    imageUrl: '/andrew.webp',
  },
  body: "Here's my view:\nReact-native: Too many moving parts that eventually broke.\nFlutterflow: new language, stumbled on first attempt to add a plugin.\nNow: @Capacitor + @vue or @react + @VoltBuilder + @Capgo ðŸ¤˜",
}

// Define other testimonials
const testimonials = [
  [
    [
      {
        author: {
          name: 'Lincoln Baxter',
          handle: 'lincolnthree',
          imageUrl: '/lincoln.webp',
        },
        body: 'The community needed this and @Capgo is doing something really important!',
      },
      {
        author: {
          name: "NASA's OSIRIS-REx",
          handle: 'osirisrex',
          imageUrl: '/osirisrex.webp',
        },
        body: '@Capgo is a smart way to make hot code pushes (and not for all the money in the world like with @AppFlow) ðŸ™‚',
      },
      {
        author: {
          name: 'Bessie Cooper',
          handle: 'bessiecooper',
          imageUrl: '/avatar-female-1.webp',
        },
        body: '@Capgo is a must have tools for developers, who want to be more productive. Avoiding review for bugfix is golden.',
      },
      {
        author: {
          name: 'Simon Flack',
          handle: 'simonflack',
          imageUrl: '/simon.webp',
        },
        body: 'We are currently giving a try to @Capgo since Appcenter stopped live updates support on hybrid apps and @AppFlow is way too expensive.',
      },
    ],
    [
      {
        author: {
          name: 'LeVar Berry',
          handle: 'levarberry',
          imageUrl: '/LevarBerry.webp',
        },
        body: 'Cancelled my @Appflow subscription after 4 years. Code-Push never seemed to work well, hopefully @CapGO has it figured out',
      },
      {
        author: {
          name: 'Mallats',
          handle: 'mallats',
          imageUrl: '/mallats.webp',
        },
        body: 'We really appreciate @Capgo, will be supporting this project from the Mallats team.\nAwaiting approval from the App Stores.',
      },
    ],
  ],
  [
    [
      {
        author: {
          name: 'Rodrigo Mantica',
          handle: 'manticarodrigo',
          imageUrl: '/mantica.webp',
        },
        body: 'We practice agile development and @Capgo is mission-critical in delivering continuously to our users!\n\nThanks @martindonadieu for your hard work and I will definitely be supporting this community as well.',
      },
      {
        author: {
          name: 'jaythegeek',
          handle: 'jaythegeek',
          imageUrl: '/jaythegeek.webp',
        },
        body: 'Did setup @Capgo and testing out this awesome replacement for @AppFlow!\n\nThank you for the hard work, it has been easy so far. About to release to the app stores ðŸ¤ž',
      },
    ],
    [
      {
        author: {
          name: 'colenso',
          handle: 'colenso',
          imageUrl: '/colenso.webp',
        },
        body: "We rolled out Capgo OTA updates in production for our user base of +5000.\nWe're seeing very smooth operation almost all our users are upto date within minutes of the OTA being deployed to @Capgo.",
      },
      {
        author: {
          name: 'SP-CMingay',
          handle: 'SP-CMingay',
          imageUrl: '/avatar-male-3.webp',
        },
        body: "I've got self hosted updates working with very little work on my part! \n\nI've proposed with my bosses that we consider @Capgo app for automated updates as well so I will begin giving that a go now too.",
      },
      {
        author: {
          name: 'jermaine',
          handle: 'jermaine',
          imageUrl: '/avatar-male-2.webp',
        },
        body: "Jumped over to @Capgo after @AppFlow hit us with a $5000 bill for the year to continue.\n\nLoving CapoGo so far. Thanks for @Capgo, it's a great product.",
      },
    ],
  ],
]

// Format message to highlight Twitter handles
const messageFormatter = (message: string) => message.replace(/(@\w+)/g, '<span class="text-indigo-400">$1</span>').replace(/\n/g, '<br/>')
---

<section class="relative pt-24 pb-32 sm:pt-32 isolate bg-[#1a1a1a]">
  <!-- Background effects -->
  <div class="absolute inset-x-0 overflow-hidden -translate-y-1/2 top-1/2 opacity-30 transform-gpu -z-10 blur-3xl" aria-hidden="true">
    <div
      class="ml-[max(50%,38rem)] aspect-1313/771 w-328.25 bg-linear-to-tr from-indigo-500 to-blue-500"
      style="
        clip-path: polygon(
          74.1% 44.1%,
          100% 61.6%,
          97.5% 26.9%,
          85.5% 0.1%,
          80.7% 2%,
          72.5% 32.5%,
          60.2% 62.4%,
          52.4% 68.1%,
          47.5% 58.3%,
          45.2% 34.5%,
          27.5% 76.7%,
          0.1% 64.9%,
          17.9% 100%,
          27.6% 76.8%,
          76.1% 97.7%,
          74.1% 44.1%
        );
      "
    >
    </div>
  </div>
  <div class="absolute inset-x-0 top-0 flex pt-32 overflow-hidden opacity-25 transform-gpu sm:pt-40 xl:justify-end -z-10 blur-3xl" aria-hidden="true">
    <div
      class="-ml-88 aspect-1313/771 w-328.25 flex-none origin-top-right rotate-30 bg-linear-to-tr from-indigo-500 to-blue-500 xl:mr-[calc(50%-12rem)] xl:ml-0"
      style="
        clip-path: polygon(
          74.1% 44.1%,
          100% 61.6%,
          97.5% 26.9%,
          85.5% 0.1%,
          80.7% 2%,
          72.5% 32.5%,
          60.2% 62.4%,
          52.4% 68.1%,
          47.5% 58.3%,
          45.2% 34.5%,
          27.5% 76.7%,
          0.1% 64.9%,
          17.9% 100%,
          27.6% 76.8%,
          76.1% 97.7%,
          74.1% 44.1%
        );
      "
    >
    </div>
  </div>

  <div class="px-6 mx-auto max-w-7xl lg:px-8">
    <div class="max-w-2xl mx-auto text-center">
      <h2 class="mt-2 text-4xl font-semibold tracking-tight text-white sm:text-5xl text-balance">
        {m.they_love_capgo({}, { locale: Astro.locals.locale })}
      </h2>
      <p class="mt-6 mb-2 text-lg text-center whitespace-pre-line text-white/70">
        {m.From_indie_devs_to({}, { locale: Astro.locals.locale })}
      </p>
    </div>

    <iframe
      id="wall-of-love-eEqRvoc"
      src="https://senja.io/p/capgo/love-embed?hideNavigation=true&embed=true"
      title="Customer testimonials and reviews for Capgo"
      aria-label="Wall of Love - Customer testimonials"
      scrolling="no"
      width="100%"
    ></iframe>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function () {
        iFrameResize({ log: false, checkOrigin: false }, '#wall-of-love-eEqRvoc')
      })
    </script>
  </div>
</section>
