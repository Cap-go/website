---
const { head } = Astro.locals.starlightRoute
const xDefault = head.find(({ tag: Tag, attrs }) => Tag === 'link' && attrs?.rel === 'alternate' && attrs?.hreflang === 'en')
if (xDefault && !head.find(({ tag: Tag, attrs }) => Tag === 'link' && attrs?.rel === 'alternate' && attrs?.hreflang === 'x-default')) {
  head.push({
    tag: 'link',
    attrs: {
      rel: 'alternate',
      hreflang: 'x-default',
      href: xDefault?.attrs?.href,
    },
  })
}

// Add og:image if not present
const hasOgImage = head.some(({ tag, attrs }) => tag === 'meta' && attrs?.property === 'og:image')
if (!hasOgImage) {
  head.push({
    tag: 'meta',
    attrs: {
      property: 'og:image',
      content: 'https://capgo.app/capgo_social.png',
    },
  })
  head.push({
    tag: 'meta',
    attrs: {
      property: 'og:image:width',
      content: '1200',
    },
  })
  head.push({
    tag: 'meta',
    attrs: {
      property: 'og:image:height',
      content: '630',
    },
  })
  head.push({
    tag: 'meta',
    attrs: {
      property: 'og:image:type',
      content: 'image/png',
    },
  })
  head.push({
    tag: 'meta',
    attrs: {
      name: 'twitter:image',
      content: 'https://capgo.app/capgo_social.png',
    },
  })
}
---

{head.map(({ tag: Tag, attrs, content }) => <Tag {...attrs} set:html={content} />)}
