---
import Layout from '@/layouts/Layout.astro'
import { getRelativeLocaleUrl } from 'astro:i18n'
import * as m from '@/paraglide/messages'

const locale = Astro.locals.locale
const title = m.capwesome_title({}, { locale })
const description = m.capwesome_meta_description({}, { locale })

const content = {
  title,
  description,
  image: `${Astro.locals.runtimeConfig.public.baseUrl}/capgo_social.png`,
}

const migrationGuideUrl = getRelativeLocaleUrl(locale, 'docs/upgrade/from-capawesome-to-capgo/')

const statusLink = {
  href: 'https://status.capgo.app/history',
  label: 'status.capgo.app/history',
}

const trustLink = {
  href: 'https://capgo.app/trust',
  label: 'capgo.app/trust',
}

const highlightCards = [
  {
    eyebrow: m.capwesome_highlight_maturity_title,
    value: m.capwesome_highlight_maturity_value,
    description: m.capwesome_highlight_maturity_desc,
  },
  {
    eyebrow: m.capwesome_highlight_community_title,
    value: m.capwesome_highlight_community_value,
    description: m.capwesome_highlight_community_desc,
  },
  {
    eyebrow: m.capwesome_highlight_scale_title,
    value: m.capwesome_highlight_scale_value,
    description: m.capwesome_highlight_scale_desc,
  },
  {
    eyebrow: m.capwesome_highlight_performance_title,
    value: m.capwesome_highlight_performance_value,
    description: m.capwesome_highlight_performance_desc,
  },
  {
    eyebrow: m.capwesome_highlight_usage_title,
    value: m.capwesome_highlight_usage_value,
    description: m.capwesome_highlight_usage_desc,
  },
  {
    eyebrow: m.capwesome_highlight_team_title,
    value: m.capwesome_highlight_team_value,
    description: m.capwesome_highlight_team_desc,
  },
]

const comparisonRows = [
  {
    capability: m.capwesome_row_launch,
    capgo: m.capwesome_row_launch_capgo,
    capawesome: m.capwesome_row_launch_cawesome,
  },
  {
    capability: m.capwesome_row_customers,
    capgo: m.capwesome_row_customers_capgo,
    capawesome: m.capwesome_row_customers_cawesome,
  },
  {
    capability: m.capwesome_row_geography,
    capgo: m.capwesome_row_geography_capgo,
    capawesome: m.capwesome_row_geography_cawesome,
  },
  {
    capability: m.capwesome_row_npm_downloads,
    capgo: m.capwesome_row_npm_downloads_capgo,
    capawesome: m.capwesome_row_npm_downloads_cawesome,
  },
  {
    capability: m.capwesome_row_devices,
    capgo: m.capwesome_row_devices_capgo,
    capawesome: m.capwesome_row_devices_cawesome,
  },
  {
    capability: m.capwesome_row_scale,
    capgo: m.capwesome_row_scale_capgo,
    capawesome: m.capwesome_row_scale_cawesome,
  },
  {
    capability: m.capwesome_row_latency,
    capgo: m.capwesome_row_latency_capgo,
    capawesome: m.capwesome_row_latency_cawesome,
    capgoLinks: [statusLink],
  },
  {
    capability: m.capwesome_row_uptime,
    capgo: m.capwesome_row_uptime_capgo,
    capawesome: m.capwesome_row_uptime_cawesome,
  },
  {
    capability: m.capwesome_row_pricing,
    capgo: m.capwesome_row_pricing_capgo,
    capawesome: m.capwesome_row_pricing_cawesome,
    capgoClass: 'text-gray-200',
    capawesomeClass: 'text-gray-300',
  },
  {
    capability: m.capwesome_row_maintenance,
    capgo: m.capwesome_row_maintenance_capgo,
    capawesome: m.capwesome_row_maintenance_cawesome,
  },
  {
    capability: m.capwesome_row_marketing,
    capgo: m.capwesome_row_marketing_capgo,
    capawesome: m.capwesome_row_marketing_cawesome,
  },
  {
    capability: m.capwesome_row_update_type,
    capgo: m.capwesome_row_update_type_capgo,
    capawesome: m.capwesome_row_update_type_cawesome,
  },
  {
    capability: m.capwesome_row_open_source,
    capgo: m.capwesome_row_open_source_capgo,
    capawesome: m.capwesome_row_open_source_cawesome,
  },
  {
    capability: m.capwesome_row_features,
    capgo: m.capwesome_row_features_capgo,
    capawesome: m.capwesome_row_features_cawesome,
  },
  {
    capability: m.capwesome_row_plugin_strategy,
    capgo: m.capwesome_row_plugin_strategy_capgo,
    capawesome: m.capwesome_row_plugin_strategy_cawesome,
  },
  {
    capability: m.capwesome_row_business_model,
    capgo: m.capwesome_row_business_model_capgo,
    capawesome: m.capwesome_row_business_model_cawesome,
  },
  {
    capability: m.capwesome_row_analytics,
    capgo: m.capwesome_row_analytics_capgo,
    capawesome: m.capwesome_row_analytics_cawesome,
  },
  {
    capability: m.capwesome_row_audit_logs,
    capgo: m.capwesome_row_audit_logs_capgo,
    capawesome: m.capwesome_row_audit_logs_cawesome,
  },
  {
    capability: m.capwesome_row_retention,
    capgo: m.capwesome_row_retention_capgo,
    capawesome: m.capwesome_row_retention_cawesome,
  },
  {
    capability: m.capwesome_row_env,
    capgo: m.capwesome_row_env_capgo,
    capawesome: m.capwesome_row_env_cawesome,
  },
  {
    capability: m.capwesome_row_legal,
    capgo: m.capwesome_row_legal_capgo,
    capawesome: m.capwesome_row_legal_cawesome,
    capawesomeClass: 'text-gray-300',
  },
  {
    capability: m.capwesome_row_whitelabel,
    capgo: m.capwesome_row_whitelabel_capgo,
    capawesome: m.capwesome_row_whitelabel_cawesome,
  },
  {
    capability: m.capwesome_row_cli,
    capgo: m.capwesome_row_cli_capgo,
    capawesome: m.capwesome_row_cli_cawesome,
  },
  {
    capability: m.capwesome_row_git_integration,
    capgo: m.capwesome_row_git_integration_capgo,
    capawesome: m.capwesome_row_git_integration_cawesome,
    capgoClass: 'text-gray-300',
    capawesomeClass: 'text-emerald-400',
  },
  {
    capability: m.capwesome_row_github_action,
    capgo: m.capwesome_row_github_action_capgo,
    capawesome: m.capwesome_row_github_action_cawesome,
    capgoClass: 'text-gray-300',
    capawesomeClass: 'text-emerald-400',
  },
  {
    capability: m.capwesome_row_api_versioning,
    capgo: m.capwesome_row_api_versioning_capgo,
    capawesome: m.capwesome_row_api_versioning_cawesome,
    capgoClass: 'text-gray-300',
    capawesomeClass: 'text-emerald-400',
  },
  {
    capability: m.capwesome_row_unlimited_updates,
    capgo: m.capwesome_row_unlimited_updates_capgo,
    capawesome: m.capwesome_row_unlimited_updates_cawesome,
    capgoClass: 'text-rose-400',
    capawesomeClass: 'text-emerald-400',
  },
  {
    capability: m.capwesome_row_transparency,
    capgo: m.capwesome_row_transparency_capgo,
    capawesome: m.capwesome_row_transparency_cawesome,
  },
  {
    capability: m.capwesome_row_community,
    capgo: m.capwesome_row_community_capgo,
    capawesome: m.capwesome_row_community_cawesome,
    capawesomeClass: 'text-gray-300',
  },
  {
    capability: m.capwesome_row_team,
    capgo: m.capwesome_row_team_capgo,
    capawesome: m.capwesome_row_team_cawesome,
  },
  {
    capability: m.capwesome_row_fit,
    capgo: m.capwesome_row_fit_capgo,
    capawesome: m.capwesome_row_fit_cawesome,
  },
]

const getStatusMeta = (customClass, defaultClass) => {
  const statusClass = customClass ?? defaultClass
  let type = 'neutral'
  let iconClass = 'text-slate-300'

  if (statusClass.includes('emerald')) {
    type = 'positive'
    iconClass = 'text-emerald-400'
  } else if (statusClass.includes('rose')) {
    type = 'negative'
    iconClass = 'text-rose-400'
  }

  return { type, iconClass }
}

const differentiators = [
  m.capwesome_differentiator_native_updates,
  m.capwesome_differentiator_innovation,
  m.capwesome_differentiator_cli,
  m.capwesome_differentiator_white_label,
  m.capwesome_differentiator_analytics,
  m.capwesome_differentiator_ecology,
]

const implementationInsights = [
  m.capwesome_implementation_point_account,
  m.capwesome_implementation_point_config,
  m.capwesome_implementation_point_js_native,
  m.capwesome_implementation_point_business,
]

const sources = [
  {
    label: m.capwesome_source_status,
    href: 'https://status.capgo.app/history',
    linkLabel: 'status.capgo.app/history',
  },
  {
    label: m.capwesome_source_github,
    href: 'https://github.com/Cap-go/capacitor-updater',
    linkLabel: 'github.com/Cap-go/capacitor-updater',
  },
  {
    label: m.capwesome_source_api,
    href: 'https://docs.capgo.app/docs/api/',
    linkLabel: 'docs.capgo.app/docs/api/',
  },
  {
    label: m.capwesome_source_cli,
    href: 'https://docs.capgo.app/docs/cli/',
    linkLabel: 'docs.capgo.app/docs/cli/',
  },
  {
    label: m.capwesome_source_climate,
    href: 'https://climate.stripe.com/',
    linkLabel: 'climate.stripe.com',
  },
  {
    label: m.capwesome_source_trust,
    href: 'https://capgo.app/trust',
    linkLabel: 'capgo.app/trust',
  },
  {
    label: m.capwesome_source_migration,
    href: migrationGuideUrl,
    linkLabel: 'capgo.app/docs/upgrade/from-capawesome-to-capgo',
  },
  {
    label: m.capwesome_source_team,
    href: getRelativeLocaleUrl(locale, 'about'),
    linkLabel: 'capgo.app/about',
  },
]
---

<Layout content={content}>
  <section class="py-16 bg-gray-900 sm:py-20">
    <div class="px-6 mx-auto max-w-7xl lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl font-bold tracking-tight text-white sm:text-5xl">
          {m.capwesome_title({}, { locale })}
        </h1>
        <p class="mx-auto mt-6 max-w-3xl text-lg text-gray-300">
          {m.capwesome_intro({}, { locale })}
        </p>
        <p class="mx-auto mt-4 max-w-2xl text-sm text-gray-400">
          {m.capwesome_affection_note({}, { locale })}
        </p>
      </div>

      <!-- Highlights -->
      <div class="grid grid-cols-1 gap-6 mt-12 sm:grid-cols-2 lg:grid-cols-3">
        {
          highlightCards.map((card) => (
            <div class="p-6 bg-gray-800 rounded-2xl ring-1 ring-white/10">
              <p class="text-sm text-blue-300">{card.eyebrow({}, { locale })}</p>
              <h3 class="mt-2 text-xl font-semibold text-gray-100" set:html={card.value({}, { locale })} />
              <p class="mt-2 text-gray-300" set:html={card.description({}, { locale })} />
            </div>
          ))
        }
      </div>

      <!-- Comparison Table (concise) -->
      <div class="overflow-hidden mt-12 rounded-2xl ring-1 shadow-xl bg-gray-800/80 ring-white/20">
        <table class="min-w-full divide-y divide-white/20">
          <thead class="bg-gray-900/90">
            <tr>
              <th class="py-4 px-6 text-sm font-semibold text-left text-white">{m.capwesome_table_capability({}, { locale })}</th>
              <th class="py-4 px-6 text-sm font-semibold text-left text-white">{m.capwesome_table_capgo({}, { locale })}</th>
              <th class="py-4 px-6 text-sm font-semibold text-left text-white">{m.capwesome_table_capawesome({}, { locale })}</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-white/20 bg-gray-800/60">
            {
              comparisonRows.map((row) => {
                const capgoStatus = getStatusMeta(row.capgoClass, 'text-emerald-400')
                const capawesomeStatus = getStatusMeta(row.capawesomeClass, 'text-rose-400')

                return (
                  <tr>
                    <td class="py-4 px-6 text-gray-300">{row.capability({}, { locale })}</td>
                    <td class="py-4 px-6 font-semibold text-gray-200">
                      <div class="flex gap-3 items-start">
                        <span class="inline-flex justify-center items-center mt-1 w-6 h-6 rounded-full ring-1 shrink-0 bg-white/5 ring-white/10">
                          {capgoStatus.type === 'positive' ? (
                            <svg
                              class={`${capgoStatus.iconClass} h-4 w-4`}
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              aria-hidden="true"
                            >
                              <path d="M5 13l4 4L19 7" />
                            </svg>
                          ) : capgoStatus.type === 'negative' ? (
                            <svg
                              class={`${capgoStatus.iconClass} h-4 w-4`}
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              aria-hidden="true"
                            >
                              <path d="M6 18L18 6M6 6l12 12" />
                            </svg>
                          ) : (
                            <svg
                              class={`${capgoStatus.iconClass} h-4 w-4`}
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              aria-hidden="true"
                            >
                              <path d="M6 10h12M6 14h12" />
                            </svg>
                          )}
                        </span>
                        <div class="space-y-1">
                          <div set:html={row.capgo({}, { locale })} />
                          {row.capgoLinks && (
                            <div class="text-sm text-blue-300">
                              ({' '}
                              {row.capgoLinks.map((link, index) => (
                                <span>
                                  {index > 0 ? ', ' : ''}
                                  <a class="text-blue-300 underline hover:text-blue-200 decoration-dotted" href={link.href} target="_blank" rel="noopener">
                                    {link.label}
                                  </a>
                                </span>
                              ))}{' '}
                              )
                            </div>
                          )}
                        </div>
                      </div>
                    </td>
                    <td class="py-4 px-6 font-medium text-gray-200">
                      <div class="flex gap-3 items-start">
                        <span class="inline-flex justify-center items-center mt-1 w-6 h-6 rounded-full ring-1 shrink-0 bg-white/5 ring-white/10">
                          {capawesomeStatus.type === 'positive' ? (
                            <svg
                              class={`${capawesomeStatus.iconClass} h-4 w-4`}
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              aria-hidden="true"
                            >
                              <path d="M5 13l4 4L19 7" />
                            </svg>
                          ) : capawesomeStatus.type === 'negative' ? (
                            <svg
                              class={`${capawesomeStatus.iconClass} h-4 w-4`}
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              aria-hidden="true"
                            >
                              <path d="M6 18L18 6M6 6l12 12" />
                            </svg>
                          ) : (
                            <svg
                              class={`${capawesomeStatus.iconClass} h-4 w-4`}
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              aria-hidden="true"
                            >
                              <path d="M6 10h12M6 14h12" />
                            </svg>
                          )}
                        </span>
                        <div class="space-y-1">
                          <div set:html={row.capawesome({}, { locale })} />
                          {row.capawesomeLinks && (
                            <div class="text-sm text-blue-300">
                              ({' '}
                              {row.capawesomeLinks.map((link, index) => (
                                <span>
                                  {index > 0 ? ', ' : ''}
                                  <a class="text-blue-300 underline hover:text-blue-200 decoration-dotted" href={link.href} target="_blank" rel="noopener">
                                    {link.label}
                                  </a>
                                </span>
                              ))}{' '}
                              )
                            </div>
                          )}
                        </div>
                      </div>
                    </td>
                  </tr>
                )
              })
            }
          </tbody>
        </table>
      </div>

      <!-- Implementation Insights -->
      <div class="p-8 mt-12 bg-gray-800 rounded-2xl ring-1 ring-white/10">
        <h2 class="text-2xl font-semibold text-white">{m.capwesome_implementation_title({}, { locale })}</h2>
        <p class="mt-3 text-gray-300" set:html={m.capwesome_implementation_intro({}, { locale })} />
        <ul class="mt-6 space-y-3 text-gray-200">
          {
            implementationInsights.map((item) => (
              <li class="flex gap-3 items-start">
                <span aria-hidden="true" class="shrink-0 mt-1 w-2 h-2 bg-emerald-400 rounded-full" />
                <span set:html={item({}, { locale })} />
              </li>
            ))
          }
        </ul>
        <p class="mt-6 text-sm text-emerald-300">
          {m.capwesome_implementation_cta({}, { locale })}{' '}
          <a class="underline hover:text-emerald-200" href={migrationGuideUrl}>
            {m.capwesome_implementation_cta_link({}, { locale })}
          </a>
        </p>
      </div>

      <!-- Differentiators -->
      <div class="grid gap-6 mt-12 lg:grid-cols-2">
        <div class="p-8 bg-gray-800 rounded-2xl ring-1 ring-white/10">
          <h2 class="text-2xl font-semibold text-white">{m.capwesome_differentiators_title({}, { locale })}</h2>
          <p class="mt-3 text-gray-300">{m.capwesome_differentiators_intro({}, { locale })}</p>
          <ul class="mt-6 space-y-3 text-gray-200">
            {
              differentiators.map((item) => (
                <li class="flex gap-3 items-start">
                  <span aria-hidden="true" class="shrink-0 mt-1 w-2 h-2 bg-blue-400 rounded-full" />
                  <span set:html={item({}, { locale })} />
                </li>
              ))
            }
          </ul>
        </div>
        <div
          class="overflow-hidden relative p-8 bg-linear-to-br rounded-2xl border border-blue-500/30 from-blue-900/60 via-slate-900/50 to-black/60 shadow-[0_40px_70px_-30px_rgba(37,99,235,0.75)]"
        >
          <div class="absolute -right-6 -top-10 w-32 h-32 rounded-full pointer-events-none bg-blue-500/40 blur-3xl"></div>
          <div class="absolute -left-12 -bottom-16 w-40 h-40 rounded-full pointer-events-none bg-purple-500/30 blur-3xl"></div>
          <div
            class="inline-flex gap-2 items-center py-1 px-3 text-xs font-semibold tracking-wide text-blue-100 uppercase rounded-full ring-1 ring-inset bg-blue-500/20 ring-blue-300/40"
          >
            <span aria-hidden="true">ü§ù</span>
            <span>{m.capwesome_ionic_title({}, { locale })}</span>
          </div>
          <h3 class="mt-4 text-2xl font-semibold text-white">{m.capwesome_ionic_desc({}, { locale })}</h3>
          <p class="mt-4 text-sm leading-relaxed text-blue-100/90">{m.capwesome_ionic_note({}, { locale })}</p>
        </div>
      </div>

      <div class="overflow-hidden p-1 mt-12 bg-linear-to-r rounded-3xl ring-1 from-[#44BCFF]/10 via-[#FF44EC]/10 to-[#FF675E]/10 ring-white/10">
        <div class="overflow-hidden relative py-12 px-8 bg-gray-900 sm:py-16 sm:px-12 rounded-[1.45rem]">
          <div class="absolute -left-10 -top-24 w-48 h-48 rounded-full pointer-events-none bg-[#44BCFF]/30 blur-3xl"></div>
          <div class="absolute -right-16 -bottom-28 w-56 h-56 rounded-full pointer-events-none bg-[#FF44EC]/20 blur-3xl"></div>
          <div class="grid relative gap-6 lg:items-center lg:grid-cols-[1.5fr_auto]">
            <div>
              <span class="inline-flex items-center py-1 px-3 text-xs font-semibold tracking-widest text-blue-200 uppercase rounded-full ring-1 bg-white/5 ring-white/10">
                {m.capwesome_switch_cta_title({}, { locale })}
              </span>
              <h2 class="mt-4 text-3xl font-bold text-white sm:text-4xl lg:text-[2.6rem]" set:html={m.capwesome_switch_cta_desc({}, { locale })} />
              <p class="mt-4 max-w-xl text-sm text-gray-300" set:html={m.capwesome_switch_cta_subtext({}, { locale })} />
            </div>
            <div class="flex flex-col gap-3 items-start lg:items-end">
              <div class="inline-flex relative group">
                <div
                  class="absolute -inset-px rounded-xl opacity-70 duration-1000 group-hover:-inset-1 group-hover:opacity-100 group-hover:duration-200 transitiona-all animate-tilt bg-linear-to-r from-[#44BCFF] via-[#FF44EC] to-[#FF675E] blur-lg"
                >
                </div>
                <a
                  href={getRelativeLocaleUrl(locale, 'register')}
                  class="inline-flex relative z-10 justify-center items-center py-4 px-8 text-lg font-bold text-white bg-gray-900 rounded-xl transition-all duration-200 focus:ring-2 focus:ring-gray-900 focus:ring-offset-2 focus:outline-none"
                >
                  {m.capwesome_switch_cta_button({}, { locale })}
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Notes & Sources -->
      <div class="p-8 mt-12 rounded-2xl ring-1 bg-gray-800/80 ring-white/10">
        <p class="text-sm text-gray-300">{m.capwesome_notes({}, { locale })}</p>
        <ul class="grid gap-3 mt-6 text-sm text-gray-400 sm:grid-cols-2">
          {
            sources.map((source) => (
              <li class="flex flex-col gap-1 p-4 rounded-lg border border-white/5 bg-gray-900/30">
                <span class="text-gray-200">{source.label({}, { locale })}</span>
                <a class="text-blue-300 underline hover:text-blue-200 decoration-dotted" href={source.href} target="_blank" rel="noopener">
                  {source.linkLabel}
                </a>
              </li>
            ))
          }
        </ul>
      </div>

      <!-- CTA -->
      <div class="flex flex-col gap-4 items-center mt-12 sm:flex-row">
        <a
          href="https://cal.com/team/capgo/demo"
          target="_blank"
          class="inline-flex justify-center items-center py-3 px-6 font-semibold text-white rounded-xl ring-1 bg-white/10 ring-white/20 hover:bg-white/15"
        >
          {m.capwesome_cta_book_demo({}, { locale })}
        </a>
        <a
          href={getRelativeLocaleUrl(locale, 'docs/')}
          class="inline-flex justify-center items-center py-3 px-6 font-semibold text-white bg-gray-800 rounded-xl ring-1 hover:bg-gray-700 ring-white/10"
        >
          {m.capwesome_cta_explore_docs({}, { locale })}
        </a>
      </div>
    </div>
  </section>
</Layout>
